<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="yinwoods,yinwoods#163.com"><title>pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨ Â· yinwoods</title><meta name="description" content="æœ€è¿‘åœ¨å­¦ä¹ çˆ¬è™«çš„è¿‡ç¨‹ä¸­ï¼Œè¯»äº†ä¸å°‘ç›¸å…³åšæ–‡ï¼Œæ„Ÿè§‰æ”¶è·è‰¯å¤šã€‚
å‰ä¸¤å¤©åˆšåˆšåŠ¨æ‰‹å†™äº†ä¸€ä¸ªçˆ¬å–éƒ‘å·å¤§å­¦ä¸ªäººæˆç»©å¹¶è®¡ç®—å¹³å‡ç»©ç‚¹çš„ç¨‹åºï¼Œç‰¹æ„æ‹¿åˆ°è¿™é‡Œæ¥ä¸å¤§å®¶åˆ†äº«ã€‚
è™½ç„¶å†™çš„æ˜¯é’ˆå¯¹éƒ‘å·å¤§å­¦æ•™åŠ¡ç³»ç»Ÿçš„çˆ¬è™«ï¼Œä½†æˆ‘ç›¸ä¿¡åªè¦ç¨ä½œä¿®æ”¹å°±å¯ä»¥åº”ç”¨äºå¤šæ•°å¤§å­¦çš„æ•™åŠ¡ç³»ç»Ÿäº†ã€‚
é¦–å…ˆè¯´ä¸€ä¸‹ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼š

1ã€æ‰“å¼€æ•™åŠ¡ç³»ç»Ÿç™»å½•ç•Œé¢ï¼Œ"><meta name="keywords" content="Hexo,Linux,Python"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">yinwoods</a></h3><div class="description"><p>To Be A Better Man!ğŸ˜ˆ</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/yinwoods"><i class="fa fa-weibo"></i></a></li><li><a href="http://facebook.com/yinwoods"><i class="fa fa-facebook"></i></a></li><li><a href="http://github.com/yinwoods"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">é¦–é¡µ</a></li><li><a href="/archives">å½’æ¡£</a></li><li><a href="/links">å‹é“¾</a></li><li><a href="/about">å…³äº</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨</a></h3></div><div class="post-content"><p>æœ€è¿‘åœ¨å­¦ä¹ çˆ¬è™«çš„è¿‡ç¨‹ä¸­ï¼Œè¯»äº†ä¸å°‘ç›¸å…³åšæ–‡ï¼Œæ„Ÿè§‰æ”¶è·è‰¯å¤šã€‚</p>
<p>å‰ä¸¤å¤©åˆšåˆšåŠ¨æ‰‹å†™äº†ä¸€ä¸ªçˆ¬å–éƒ‘å·å¤§å­¦ä¸ªäººæˆç»©å¹¶è®¡ç®—å¹³å‡ç»©ç‚¹çš„ç¨‹åºï¼Œç‰¹æ„æ‹¿åˆ°è¿™é‡Œæ¥ä¸å¤§å®¶åˆ†äº«ã€‚</p>
<p>è™½ç„¶å†™çš„æ˜¯é’ˆå¯¹éƒ‘å·å¤§å­¦æ•™åŠ¡ç³»ç»Ÿçš„çˆ¬è™«ï¼Œä½†æˆ‘ç›¸ä¿¡åªè¦ç¨ä½œä¿®æ”¹å°±å¯ä»¥åº”ç”¨äºå¤šæ•°å¤§å­¦çš„æ•™åŠ¡ç³»ç»Ÿäº†ã€‚</p>
<p>é¦–å…ˆè¯´ä¸€ä¸‹ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼š</p>
<blockquote>
<p>1ã€æ‰“å¼€æ•™åŠ¡ç³»ç»Ÿç™»å½•ç•Œé¢ï¼Œè·å–ç›¸åº”çš„<code>url</code>ä»¥åŠè¡¨å•åŸŸéœ€è¦å¡«å†™é€‰é¡¹çš„åç§°ã€‚</p>
<p>2ã€å¡«å†™å¿…è¦ä¿¡æ¯ã€è®¾ç½®<code>cookie</code>ï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨ç™»å½•ç³»ç»Ÿ</p>
<p>3ã€åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–ä¸åŒå­¦æœŸæˆç»©é¡µé¢å¯¹åº”çš„<code>url</code>ï¼Œå¹¶ä¿å­˜ã€‚</p>
<p>4ã€å¾ªç¯æ‰“å¼€åˆšåˆšä¿å­˜çš„ä¸åŒå­¦æœŸæˆç»©é¡µé¢çš„<code>url</code>ï¼Œåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¯¾ç¨‹ã€æˆç»©ä¿¡æ¯ã€‚</p>
<p>5ã€è®¡ç®—å¹³å‡ç»©ç‚¹å¹¶è¾“å‡º</p>
</blockquote>
<p>ä»ä¸Šé¢çš„æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°çš„æ¯”è¾ƒå¤æ‚çš„åœ°æ–¹åªæœ‰ç™»å½•ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p>ä¸ºäº†å¾ˆå¥½åœ°è®²è§£æ“ä½œæ­¥éª¤ï¼Œæˆ‘ä»¬å…ˆè®¾è®¡ä¸€ä¸ªç±»ï¼Œåå­—å«åš<code>ZZU</code></p>
<p>å¹¶è®¾ç½®ä»¥ä¸‹æˆå‘˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#éƒ¨åˆ†ZZUç±»æˆå‘˜</span></div><div class="line">self.cookies 	<span class="comment">#cookie</span></div><div class="line">self.size = <span class="number">0</span>   <span class="comment">#æ€»è¯¾ç¨‹æ•°ç›®</span></div><div class="line">self.courses = []   <span class="comment">#è¯¾ç¨‹åç§°</span></div><div class="line">self.courses_Attribute = []     <span class="comment">#è¯¾ç¨‹ç±»å‹</span></div><div class="line">self.credits = []    <span class="comment">#è¯¾ç¨‹å­¦åˆ†</span></div><div class="line">self.grades = []    <span class="comment">#è¯¾ç¨‹æˆç»©</span></div><div class="line">self.points = []    <span class="comment">#è¯¾ç¨‹ç»©ç‚¹</span></div><div class="line">self.urls_Set = []  <span class="comment">#å„å­¦æœŸæˆç»©URLé¡µé¢é›†åˆ</span></div></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸€æ­¥ï¼šè·å–ç™»å½•é¡µé¢urlåŠè¡¨å•ä¿¡æ¯"><a href="#ç¬¬ä¸€æ­¥ï¼šè·å–ç™»å½•é¡µé¢urlåŠè¡¨å•ä¿¡æ¯" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè·å–ç™»å½•é¡µé¢urlåŠè¡¨å•ä¿¡æ¯"></a>ç¬¬ä¸€æ­¥ï¼šè·å–ç™»å½•é¡µé¢<code>url</code>åŠè¡¨å•ä¿¡æ¯</h3><blockquote>
<ul>
<li>æ‰“å¼€æ•™åŠ¡ç³»ç»Ÿï¼Œè¿›å…¥ç™»å½•ç•Œé¢ï¼Œåˆ©ç”¨<code>F12</code>æŸ¥çœ‹ç½‘é¡µæºç ä¿¡æ¯ï¼Œæå–è¡¨å•åŸŸå†…å®¹ï¼š</li>
</ul>
</blockquote>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post27-æ•™åŠ¡1.png" alt="æ•™åŠ¡ç³»ç»Ÿ"></p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post27-æ•™åŠ¡2.png" alt="æ•™åŠ¡ç³»ç»Ÿ"></p>
<blockquote>
<ul>
<li><p>ä»ä¸Šé¢çš„å›¾ç‰‡å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬éœ€è¦å¡«å†™çš„å†…å®¹æœ‰ï¼š<code>nianjiï¼ˆå¹´çº§ï¼‰</code>ã€<code>xuehaoï¼ˆå­¦å·ï¼‰</code>ã€<code>mimaï¼ˆå¯†ç ï¼‰</code>ã€<code>selecï¼ˆç™»å½•é¡µé¢ï¼‰</code>å‡ ä¸ªé€‰é¡¹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä»¤<code>selec</code>ä¸º<code>http://jw.zzu.edu.cn/scripts/qscore.dll/search</code>å³è¿›å…¥é€‰è¯¾ç³»ç»Ÿã€‚</p>
</li>
<li><p>å› æ­¤æˆ‘ä»¬å¯ä»¥ä¸º<code>ZZU</code>æ·»åŠ ä¸€ä¸ªå˜é‡å«åš<code>postdata</code>ç”¨æ¥å­˜å‚¨ä»¥ä¸Šä¿¡æ¯ï¼Œå†…å®¹ä¸ºï¼š</p>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ZZUç±»ç™»å½•è¡¨å•ä¿¡æ¯</span></div><div class="line">self.current_Url = http://jw.zzu.edu.cn/scripts/qscore.dll/search</div><div class="line">self.postdata = urllib.parse.urlencode(&#123;</div><div class="line">           <span class="string">'nianji'</span>: <span class="string">''</span>,</div><div class="line">           <span class="string">'xuehao'</span>: <span class="string">''</span>,</div><div class="line">           <span class="string">'mima'</span>: <span class="string">''</span>,</div><div class="line">           <span class="string">'selec'</span>: <span class="string">'http://jw.zzu.edu.cn/scripts/qscore.dll/search'</span></div><div class="line">       &#125;).encode()</div></pre></td></tr></table></figure>
<h3 id="ç¬¬äºŒæ­¥ï¼šè®¾ç½®cookieå¹¶ç™»å½•"><a href="#ç¬¬äºŒæ­¥ï¼šè®¾ç½®cookieå¹¶ç™»å½•" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè®¾ç½®cookieå¹¶ç™»å½•"></a>ç¬¬äºŒæ­¥ï¼šè®¾ç½®<code>cookie</code>å¹¶ç™»å½•</h3><blockquote>
<ul>
<li>è¿™é‡Œå¯èƒ½çœ‹èµ·æ¥æ¯”è¾ƒéš¾ï¼Œå…¶å®åªç”¨è°ƒç”¨ç›¸å…³å‡½æ•°å³å¯</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ZZUç±»cookie</span></div><div class="line">self.cookies = http.cookiejar.CookieJar()	<span class="comment">#è®¾ç½®cookie</span></div><div class="line">self.opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(self.cookies))</div><div class="line">request = urllib.request.Request(</div><div class="line">       url = self.current_Url,</div><div class="line">       data = self.postdata</div><div class="line">   )</div><div class="line">   res = self.opener.open(request)	<span class="comment">#æäº¤è¡¨å•å†…å®¹ï¼Œç™»å½•ç³»ç»Ÿ</span></div><div class="line">   print(res.read().decode(<span class="string">'GBK'</span>))	<span class="comment">#å¯ä»¥å‘ç°æ‰“å°çš„ç½‘é¡µæºç ä¸ºç™»å½•åçš„æºç ï¼Œè¯´æ˜ç™»å½•æˆåŠŸ</span></div></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–æ‰€æœ‰å­¦æœŸé¡µé¢çš„url"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–æ‰€æœ‰å­¦æœŸé¡µé¢çš„url" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–æ‰€æœ‰å­¦æœŸé¡µé¢çš„url"></a>ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–æ‰€æœ‰å­¦æœŸé¡µé¢çš„<code>url</code></h3><blockquote>
<ul>
<li>è¿™é‡Œéœ€è¦æˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆæå–å‡ºæ‰€æœ‰å­¦æœŸé¡µé¢<code>url</code>çš„å…±åŒç‰¹å¾ï¼Œä¹‹åæ‰èƒ½å®ŒæˆåŒ¹é…</li>
</ul>
</blockquote>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post27-æ•™åŠ¡3.png" alt="æ•™åŠ¡ç³»ç»Ÿ"></p>
<blockquote>
<ul>
<li>å¯¹äºæˆ‘æ ¡éƒ‘å·å¤§å­¦çš„ç³»ç»Ÿï¼Œå¯ä»¥å‘ç°ä¸åŒå­¦æœŸ<code>url</code>åªæ˜¯<code>search?userid=</code>åé¢çš„å‚æ•°ä¸åŒè€Œå·²ï¼›å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>regx = re.compile(&#39;href=&quot;(http://jw.zzu.edu.cn/scripts/qscore.dll/search.*?)&quot;&gt;&#39;)</code>æ¥åŒ¹é…æ‰€æœ‰çš„<code>url</code></li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">regx = re.compile(<span class="string">'href="(http://jw.zzu.edu.cn/scripts/qscore.dll/search.*?)"&gt;'</span>)</div></pre></td></tr></table></figure>
<h3 id="ç¬¬å››æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–è¯¾ç¨‹ã€æˆç»©ç›¸å…³ä¿¡æ¯"><a href="#ç¬¬å››æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–è¯¾ç¨‹ã€æˆç»©ç›¸å…³ä¿¡æ¯" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–è¯¾ç¨‹ã€æˆç»©ç›¸å…³ä¿¡æ¯"></a>ç¬¬å››æ­¥ï¼šåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å–è¯¾ç¨‹ã€æˆç»©ç›¸å…³ä¿¡æ¯</h3><blockquote>
<ul>
<li>åŒä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å…ˆæ¥æå–è¯¾ç¨‹ã€æˆç»©ä¿¡æ¯çš„ç‰¹å¾ï¼Œ</li>
</ul>
</blockquote>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post27-æ•™åŠ¡4.png" alt="æ•™åŠ¡ç³»ç»Ÿæˆç»©ç‰¹å¾"></p>
<blockquote>
<ul>
<li>å¯ä»¥å‘ç°è¯¾ç¨‹ã€æˆç»©ä¿¡æ¯æ˜¯åˆ†åˆ«è¢«äº”ä¸ª<code>&lt;td&gt;</code>æ ‡ç­¾åŒ…ä½çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·åŒ¹é…<code>re.compile(&#39;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&#39;, re.U)</code>,ä¸äº†è§£<code>re.U</code>å«ä¹‰çš„å¯ä»¥ç§»æ­¥è¿™é‡Œ<a href="http://blog.yinwoods.com/coding/python%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B.html" target="_blank" rel="external">pythonçˆ¬è™«åŸºç¡€æ•™ç¨‹</a>å·©å›ºä¸‹ã€‚</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#ZZUç±»åŒ¹é…è¯¾ç¨‹ã€æˆç»©ä¿¡æ¯</span></div><div class="line">regx = re.compile(<span class="string">'&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;'</span>, re.U)</div></pre></td></tr></table></figure>
<h3 id="ç¬¬äº”æ­¥ï¼šè®¡ç®—å¹³å‡ç»©ç‚¹"><a href="#ç¬¬äº”æ­¥ï¼šè®¡ç®—å¹³å‡ç»©ç‚¹" class="headerlink" title="ç¬¬äº”æ­¥ï¼šè®¡ç®—å¹³å‡ç»©ç‚¹"></a>ç¬¬äº”æ­¥ï¼šè®¡ç®—å¹³å‡ç»©ç‚¹</h3><blockquote>
<ul>
<li>æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬èƒ½è·å¾—ä¸€å­¦æœŸçš„æ‰€æœ‰æˆç»©ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸€å®šå¯ä»¥è·å–æ‰€æœ‰å­¦æœŸæˆç»©ï¼Œä»è€Œè®¡ç®—<code>GPA</code></li>
</ul>
</blockquote>
<p>ä¸Šé¢è¯´çš„é›¶é›¶ç¢ç¢ï¼Œå¯èƒ½ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä¸‹é¢é™„ä¸Šå®Œæ•´ä»£ç ä»¥åŠå¿…è¦æ³¨é‡Šï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> urllib</div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"><span class="keyword">import</span> http.cookiejar</div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZZU</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.cookies = http.cookiejar.CookieJar()</div><div class="line">        self.postdata = urllib.parse.urlencode(&#123;</div><div class="line">            <span class="string">'nianji'</span>: <span class="string">''</span>,    <span class="comment">#å¡«å†™ä½ çš„å¹´çº§</span></div><div class="line">            <span class="string">'xuehao'</span>: <span class="string">''</span>,    <span class="comment">#å¡«å†™ä½ çš„å­¦å·</span></div><div class="line">            <span class="string">'mima'</span>: <span class="string">''</span>,      <span class="comment">#å¡«å†™ä½ çš„å¯†ç </span></div><div class="line">            <span class="string">'selec'</span>: <span class="string">'http://jw.zzu.edu.cn/scripts/qscore.dll/search'</span></div><div class="line">            &#125;).encode()</div><div class="line">        self.size = <span class="number">0</span>   <span class="comment">#è¯¾ç¨‹æ•°ç›®</span></div><div class="line">        self.opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(self.cookies))</div><div class="line">        self.courses = []   <span class="comment">#è¯¾ç¨‹åç§°</span></div><div class="line">        self.courses_Attribute = []     <span class="comment">#è¯¾ç¨‹ç±»å‹</span></div><div class="line">        self.credits = []    <span class="comment">#è¯¾ç¨‹å­¦åˆ†</span></div><div class="line">        self.grades = []    <span class="comment">#è¯¾ç¨‹æˆç»©</span></div><div class="line">        self.points = []    <span class="comment">#è¯¾ç¨‹ç»©ç‚¹</span></div><div class="line">        self.urls_Set = []  <span class="comment">#å„å­¦æœŸæˆç»©URLé¡µé¢é›†åˆ</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPage</span><span class="params">(self)</span>:</span></div><div class="line">        request = urllib.request.Request(</div><div class="line">                url = self.current_Url,</div><div class="line">                data = self.postdata</div><div class="line">                )</div><div class="line">        res = self.opener.open(request)</div><div class="line">        <span class="keyword">return</span> res.read().decode(<span class="string">'GBK'</span>)</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getGrades</span><span class="params">(self)</span>:</span></div><div class="line">        self.size = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> zzu.urls_Set:</div><div class="line">            self.current_Url = url</div><div class="line">            page = self.getPage()</div><div class="line"></div><div class="line">            <span class="comment">#æå–æˆç»©è¡¨æ¯è¡Œä¿¡æ¯</span></div><div class="line">            regx = re.compile(<span class="string">'&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;&lt;td.*?&gt;(.*?)&lt;/td&gt;'</span>, re.U)</div><div class="line">            myItems = regx.findall(page)</div><div class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> myItems:</div><div class="line">                self.size += <span class="number">1</span>      <span class="comment">#ä¿å­˜æ•°é‡</span></div><div class="line">                self.courses.append(item[<span class="number">0</span>])</div><div class="line">                self.courses_Attribute.append(item[<span class="number">1</span>])</div><div class="line">                self.credits.append(item[<span class="number">2</span>])</div><div class="line">                self.grades.append(item[<span class="number">3</span>])</div><div class="line">                self.points.append(item[<span class="number">4</span>])</div><div class="line"></div><div class="line">        cnt = <span class="number">0</span></div><div class="line">        sum_credits = <span class="number">0</span></div><div class="line">        sum_points = <span class="number">0.0</span></div><div class="line">        <span class="keyword">while</span>(cnt &lt; self.size):</div><div class="line">            <span class="keyword">if</span> self.points[cnt] != <span class="string">'---'</span>: <span class="comment">#æ²¡æœ‰ç»©ç‚¹çš„è¯¾ç¨‹ä¸è®¡åœ¨å†…</span></div><div class="line">                sum_credits += float(self.credits[cnt])</div><div class="line">                sum_points += float(self.credits[cnt])*float(self.points[cnt])</div><div class="line">            cnt += <span class="number">1</span></div><div class="line">        print(<span class="string">"å¤§å­¦æœŸé—´æ€»å­¦åˆ†ï¼š "</span> + str(sum_credits))</div><div class="line">        print(<span class="string">"å¤§å­¦æœŸé—´æ€»ç»©ç‚¹ï¼š"</span> + str(sum_points))</div><div class="line">        print(<span class="string">"å¤§å­¦æœŸé—´å¹³å‡ç»©ç‚¹ä¸ºï¼š"</span> + str(sum_points/sum_credits))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(self)</span>:</span>   <span class="comment">#æ‰“å°æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯</span></div><div class="line">        regx = re.compile(<span class="string">'å§“åï¼š(.*?)&amp;'</span>)</div><div class="line">        name = regx.findall(self.getPage())</div><div class="line">        print(<span class="string">"æˆ‘å«"</span> + name[<span class="number">0</span>])</div><div class="line">        print(<span class="string">"å¤§å­¦æœŸé—´å…±å­¦ä¹ "</span> + str(self.size) + <span class="string">"é—¨è¯¾ç¨‹"</span>)</div><div class="line">        print(<span class="string">"è¯¾ç¨‹"</span>.ljust(<span class="number">14</span>) + <span class="string">"\t"</span> + <span class="string">"ç±»å‹"</span> + <span class="string">"\t"</span> + <span class="string">"å­¦åˆ†"</span> + <span class="string">"\t"</span> + <span class="string">"æˆç»©"</span> + <span class="string">"\t"</span> + <span class="string">"ç»©ç‚¹"</span>)</div><div class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">0</span>, self.size):</div><div class="line">            print(self.courses[num][<span class="number">0</span>:<span class="number">8</span>].ljust(<span class="number">6</span>) + <span class="string">"\t"</span> + self.courses_Attribute[num] + <span class="string">"\t"</span> + self.credits[num] + <span class="string">"\t"</span> + self.grades[num].rjust(<span class="number">3</span>) + <span class="string">"\t"</span> + self.points[num])</div><div class="line"></div><div class="line"></div><div class="line">url = <span class="string">'http://jw.zzu.edu.cn/scripts/qscore.dll/search'</span></div><div class="line">zzu = ZZU()</div><div class="line">zzu.current_Url = url</div><div class="line">regx = re.compile(<span class="string">'href="(http://jw.zzu.edu.cn/scripts/qscore.dll/search.*?)"&gt;'</span>)</div><div class="line">List = regx.search(zzu.getPage())</div><div class="line">url = List.group()[<span class="number">6</span>:<span class="number">-2</span>] <span class="comment">#æˆªå–url</span></div><div class="line"></div><div class="line">zzu.urls_Set.append(url)</div><div class="line"></div><div class="line">zzu.current_Url = url</div><div class="line">page = zzu.getPage()</div><div class="line">regx = re.compile(<span class="string">'href="(http://jw.zzu.edu.cn/scripts/qscore.dll/search.*?)"&gt;'</span>)</div><div class="line">zzu.urls_Set += regx.findall(page)</div><div class="line"></div><div class="line">zzu.getGrades()</div><div class="line"><span class="comment">#zzu.print_info()</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æˆ‘çš„GPAæŸ¥è¯¢ç»“æœ:</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post27-æ•™åŠ¡5.png" alt="æ•™åŠ¡ç³»ç»Ÿ"></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-09-05</span><i class="fa fa-comment-o"></i><a href="/2015/09/05/pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨/#comments">è¯„è®º</a><i class="fa fa-tag"></i><a href="/categories/coding/" title="coding" class="tag">coding </a><a href="/tags/python-çˆ¬è™«/" title="python, çˆ¬è™«" class="tag">python, çˆ¬è™« </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://blog.yinwoods.work/2015/09/05/pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨/,yinwoods,pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2015/09/07/sublimeåŸºæœ¬é…ç½®/" title="sublimeåŸºæœ¬é…ç½®" class="btn">ä¸Šä¸€ç¯‡</a></li><li class="next pagbuttons"><a role="navigation" href="/2015/09/03/pythonçˆ¬è™«åŸºç¡€æ•™ç¨‹/" title="pythonçˆ¬è™«åŸºç¡€æ•™ç¨‹" class="btn">ä¸‹ä¸€ç¯‡</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'yinwoods';
var disqus_identifier = '2015/09/05/pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨/';
var disqus_title = 'pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨';
var disqus_url = 'http://blog.yinwoods.work/2015/09/05/pythonå®æˆ˜ä¹‹éƒ‘å·å¤§å­¦GPAè®¡ç®—å™¨/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//yinwoods.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>