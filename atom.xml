<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>yinwoods</title>
  <subtitle>To Be A Better Man!ğŸ˜ˆ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.yinwoods.work/"/>
  <updated>2017-12-30T06:54:42.677Z</updated>
  <id>http://blog.yinwoods.work/</id>
  
  <author>
    <name>yinwoods</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é…ç½®ä¸åŒå±€åŸŸç½‘sshäº’è”</title>
    <link href="http://blog.yinwoods.work/2017/12/30/%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E5%B1%80%E5%9F%9F%E7%BD%91ssh%E4%BA%92%E8%81%94/"/>
    <id>http://blog.yinwoods.work/2017/12/30/é…ç½®ä¸åŒå±€åŸŸç½‘sshäº’è”/</id>
    <published>2017-12-30T06:54:00.000Z</published>
    <updated>2017-12-30T06:54:42.677Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æ–°å‘å®éªŒå®¤ç”³è¯·äº†ä¸‰å°æœåŠ¡å™¨ç”¨äºåšæ¯•ä¸šè®¾è®¡ï¼Œä½†æ˜¯å› ä¸ºä¸å¸¸åœ¨å®éªŒå®¤ï¼Œæ‰€ä»¥æƒ³åˆ°æœ‰æ²¡æœ‰ä¸€ä¸ªå¥½çš„æ–¹æ³•èƒ½å¤Ÿåšåˆ°å³ä½¿ä¸åœ¨å®éªŒå®¤çš„å±€åŸŸç½‘ä¸­ä¹Ÿèƒ½å¤Ÿsshåˆ°å®éªŒå®¤çš„æœºå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´åšåˆ°ä»ä¸€ä¸ªå±€åŸŸç½‘ä¸­çš„Aæœºå™¨sshè‡³å¦ä¸€ä¸ªå±€åŸŸç½‘ä¸­çš„Bæœºå™¨ã€‚</p>
<p>å…¶å®å¤§æ¦‚æƒ³ä¸€ä¸‹ï¼Œå°±çŸ¥é“å®Œå…¨æ˜¯å¯è¡Œçš„ï¼Œæ¯•ç«ŸAä¸Béƒ½è”ç½‘äº†ï¼Œæ²¡é“ç†è”ç½‘çš„æœºå™¨å´æ— æ³•äº’ç›¸é€šä¿¡ã€‚ä½†ä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°å­˜åœ¨çš„é™åˆ¶ï¼Œå°±æ˜¯æˆ‘æ€ä¹ˆæ‹¿åˆ°Bçš„å”¯ä¸€IDï¼Œä»¥æ­¤æ¥ä¸å®ƒå»ºç«‹é€šä¿¡å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬sshç”¨çš„æ˜¯åŸŸåæˆ–è€…å…¬ç½‘IPï¼ˆå½’æ ¹ç»“åº•å°±æ˜¯å…¬ç½‘IPï¼‰ï¼Œç”±æ­¤æƒ³åˆ°èƒ½å¦åˆ©ç”¨ä¸€å°å…·å¤‡å…¬ç½‘IPçš„æœºå™¨Cä½œä¸ºä¸¤ä¸ªå±€åŸŸç½‘ABä¹‹é—´çš„è·³æ¿æœºå‘¢ï¼Ÿ</p>
<p>çœ‹äº†ä¸‹sshå‘½ä»¤ï¼Œå‘ç°æ˜¯å¯ä»¥çš„ï¼Œä¸éœ€è¦å®‰è£…å…¶ä»–è½¯ä»¶ï¼Œä»…å€ŸåŠ©sshå³å¯å®ç°ã€‚</p>
<p>åœ¨æœºå™¨Bä¸Šæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -fCNR &lt;port1&gt;:localhost:22 username@C</div></pre></td></tr></table></figure>
<p>å‘½ä»¤çš„æ„æ€æ˜¯åœ¨Cä¸Šåšç«¯å£è½¬å‘ï¼Œå°†Cæœºå™¨çš„port1ç«¯å£è½¬å‘åˆ°Bæœºå™¨çš„22ç«¯å£ï¼ˆ22æ˜¯sshdçš„é»˜è®¤ç«¯å£ï¼‰</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåšåˆ°ä½¿ç”¨A sshè¿å…¥Cï¼Œå†æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -p port1 localhost</div></pre></td></tr></table></figure>
<p>å³å¯sshè¿å…¥B</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘æ–°å‘å®éªŒå®¤ç”³è¯·äº†ä¸‰å°æœåŠ¡å™¨ç”¨äºåšæ¯•ä¸šè®¾è®¡ï¼Œä½†æ˜¯å› ä¸ºä¸å¸¸åœ¨å®éªŒå®¤ï¼Œæ‰€ä»¥æƒ³åˆ°æœ‰æ²¡æœ‰ä¸€ä¸ªå¥½çš„æ–¹æ³•èƒ½å¤Ÿåšåˆ°å³ä½¿ä¸åœ¨å®éªŒå®¤çš„å±€åŸŸç½‘ä¸­ä¹Ÿèƒ½å¤Ÿsshåˆ°å®éªŒå®¤çš„æœºå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´åšåˆ°ä»ä¸€ä¸ªå±€åŸŸç½‘ä¸­çš„Aæœºå™¨sshè‡³å¦ä¸€ä¸ªå±€åŸŸç½‘ä¸­çš„Bæœºå™¨ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®å¤§æ¦‚æƒ³ä¸€ä¸‹ï¼Œå°±çŸ¥é“å®Œå…¨æ˜¯å¯è¡Œçš„ï¼Œæ¯•
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="ssh ç«¯å£è½¬å‘" scheme="http://blog.yinwoods.work/tags/ssh-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>AWSä¸Škafkaç«¯å£å¼€æ”¾å¤–ç½‘è®¿é—®é—®é¢˜è§£å†³æ–¹æ³•</title>
    <link href="http://blog.yinwoods.work/2017/11/15/AWS%E4%B8%8AKafka%E7%AB%AF%E5%8F%A3%E5%A4%96%E7%BD%91%E5%BC%80%E6%94%BE%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>http://blog.yinwoods.work/2017/11/15/AWSä¸ŠKafkaç«¯å£å¤–ç½‘å¼€æ”¾é—®é¢˜è§£å†³æ–¹æ³•/</id>
    <published>2017-11-15T14:23:00.000Z</published>
    <updated>2017-11-16T07:45:10.954Z</updated>
    
    <content type="html"><![CDATA[<p>ç›®å‰å…¬å¸é‡‡ç”¨ELKæ¥å­˜æ”¾ä»¥åŠåˆ©ç”¨æ—¥å¿—ï¼Œé‡‡ç”¨filebeatå°†æ—¥å¿—å‘é€è‡³Kafkaï¼Œä¹‹åå†å†™ä¸€ä¸ªpythonè„šæœ¬ä½œä¸ºæ¶ˆè´¹è€…æŠŠKafkaå†…çš„æ—¥å¿—æ‹‰å–ä¸‹æ¥å¹¶æ‰“å…¥åˆ°elasticsearchä¸­ï¼Œä¾›åæœŸæŸ¥è¯¢æ£€ç´¢ä½¿ç”¨ã€‚</p>
<p>æœ¬æ¥è¿™æ˜¯ä¸€å¥—æ¯”è¾ƒå®Œå¤‡çš„æµç¨‹ï¼Œä½†ç”±äºæœ€è¿‘æ¥äº†æ–°çš„ä¸šåŠ¡ï¼Œè€Œæ–°äº§ç”Ÿçš„æ—¥å¿—åœ¨å¯¹æ–¹çš„æœºå™¨ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦æŠŠKafkaç«¯å£å¼€æ”¾è‡³å…¬ç½‘ï¼Œä¾›å¤–éƒ¨æœºå™¨å†™å…¥æ¶ˆæ¯ï¼›</p>
<p>åœ¨ç¡®è®¤Kafkaç«¯å£å¼€æ”¾åï¼Œè¿œç¨‹ä¸»æœºå¯ä»¥è¿æ¥Kafkaå¹¶å»ºç«‹topicï¼Œä½†æ˜¯å´æ— æ³•å†™æ—¥å¿—ï¼›ä¸­é—´æŠ˜è…¾äº†å¥½å‡ ä¸ªå°æ—¶æ‰æŠ˜è…¾å‡ºæ¥ï¼Œè§‰å¾—æœ‰å¿…è¦è®°å½•ä¸€ä¸‹ï¼Œé¿å…åäººè¸©å‘ã€‚</p>
<p>é¦–å…ˆåˆ†åˆ«ä¿®æ”¹kafkaé›†ç¾¤å†…æœºå™¨é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<p> config/server.properties:</p>
<ul>
<li><code>advertised.host=PUBLIC_IP</code></li>
<li><code>host.name=HOST_NAME</code></li>
<li>host.port=9092</li>
</ul>
<p>config/producer.properties:</p>
<ul>
<li><code>metadata.broker.list=PUBLIC_IP</code></li>
</ul>
<p>è¿™æ ·è®¾ç½®ä¹‹åï¼Œè¿œç¨‹ä¸»æœºä»ç„¶æ— æ³•å†™æ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºè¿œç¨‹ä¸»æœºæ— æ³•ç›´æ¥è¿æ¥<code>HOST_NAME</code>ï¼›ç”±æ­¤æƒ³åˆ°ä¿®æ”¹è¿œç¨‹ä¸»æœºçš„<code>/etc/hosts</code>ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<p>/etc/hosts:</p>
<ul>
<li><code>PUBLIC_IP1</code> <code>HOST_NAME1</code></li>
<li><code>PUBLIC_IP2</code> <code>HOST_NAME2</code></li>
<li><code>PUBLIC_IP3</code> <code>HOST_NAME3</code></li>
<li>â€¦</li>
<li><code>PUBLIC_IPn</code> <code>HOST_NAMEn</code></li>
</ul>
<p>ç»¼ä¸Šï¼Œç»è¿‡ä¸Šé¢çš„è¿™äº›é…ç½®ï¼Œç°åœ¨filebeatå°±å¯ä»¥å‘Kafkaæ‰“æ—¥å¿—äº†ï½</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›®å‰å…¬å¸é‡‡ç”¨ELKæ¥å­˜æ”¾ä»¥åŠåˆ©ç”¨æ—¥å¿—ï¼Œé‡‡ç”¨filebeatå°†æ—¥å¿—å‘é€è‡³Kafkaï¼Œä¹‹åå†å†™ä¸€ä¸ªpythonè„šæœ¬ä½œä¸ºæ¶ˆè´¹è€…æŠŠKafkaå†…çš„æ—¥å¿—æ‹‰å–ä¸‹æ¥å¹¶æ‰“å…¥åˆ°elasticsearchä¸­ï¼Œä¾›åæœŸæŸ¥è¯¢æ£€ç´¢ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¥è¿™æ˜¯ä¸€å¥—æ¯”è¾ƒå®Œå¤‡çš„æµç¨‹ï¼Œä½†ç”±äºæœ€è¿‘æ¥äº†æ–°çš„ä¸šåŠ¡ï¼Œ
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="kafka aws" scheme="http://blog.yinwoods.work/tags/kafka-aws/"/>
    
  </entry>
  
  <entry>
    <title>druid hadoop index ä»»åŠ¡æ€§èƒ½è°ƒä¼˜</title>
    <link href="http://blog.yinwoods.work/2017/08/22/druid-hadoop-index%E4%BB%BB%E5%8A%A1%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
    <id>http://blog.yinwoods.work/2017/08/22/druid-hadoop-indexä»»åŠ¡æ€§èƒ½è°ƒä¼˜/</id>
    <published>2017-08-22T14:23:00.000Z</published>
    <updated>2017-08-22T14:43:59.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>ç”±äºæ—¥å¸¸æ‰€åšç»Ÿè®¡å¤šæ•°åŸºäºä¸€ä»½æ‹¼æ¥æ—¥å¿—ï¼Œç»“åˆæœ€è¿‘åšçš„druidç›¸å…³å·¥ä½œï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°æŠŠæ‹¼æ¥æ—¥å¿—ä¸€äº›ç»Ÿè®¡å¸¸ç”¨å­—æ®µselect group by å‡ºæ¥é€šè¿‡ druidç»Ÿè®¡ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè‡ªå·±ä»æ¯ç‡¥ç¹ççš„ç»Ÿè®¡è„šæœ¬ä¸­è§£è„±å‡ºæ¥äº†ã€‚</p>
<h3 id="æ€§èƒ½è°ƒä¼˜"><a href="#æ€§èƒ½è°ƒä¼˜" class="headerlink" title="æ€§èƒ½è°ƒä¼˜"></a>æ€§èƒ½è°ƒä¼˜</h3><p>ä½†æ˜¯åœ¨æ‰§è¡Œdruidçš„indexä»»åŠ¡æ—¶é‡åˆ°äº†ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡ä¹…çš„é—®é¢˜ï¼Œç”±äºé›†ç¾¤ä¸Šè¿˜æœ‰å…¶ä»–ä¾‹è¡ŒæœåŠ¡éœ€è¦èµ„æºï¼Œå› æ­¤æˆ‘è¿™ä¸ªä½ä¼˜å…ˆçº§çš„ä»»åŠ¡å¿…é¡»èƒ½å¤Ÿå¿«é€Ÿæ‰§è¡Œå®Œæˆæ‰å¯ä»¥ã€‚é€šè¿‡è¯•é”™ä»¥åŠå¯¹ç½‘ä¸Šç›¸å…³èµ„æ–™çš„æœç´¢ï¼Œå¾—åˆ°ä¸€ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ul>
<li>é€šè¿‡è®¾ç½®yarnçš„è°ƒåº¦ç­–ç•¥ï¼Œä¸ºè¿™ç§é»˜è®¤å ç”¨èµ„æºå¤šã€æ‰§è¡Œæ—¶é—´ä¹…çš„ä»»åŠ¡å•ç‹¬å¼€è¾Ÿä¸€ä¸ªé˜Ÿåˆ—ï¼Œé™åˆ¶å…¶èƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§èµ„æºé‡ï¼Œä»è€Œä¿è¯å…¶ä»–é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡èƒ½å¤ŸåŠæ—¶å¾—åˆ°å¤„ç†ã€‚è€Œhadoop indexä»»åŠ¡å¯ä»¥é€šè¿‡åœ¨tuningConfigä¸­çš„jobPropertiesè®¾ç½®mapreduce.job.queuename</li>
<li>é™ä½æ¯ä¸ªsegmentçš„è¡Œæ•°ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡è®¾ç½®targetPartitionSizeå®Œæˆã€‚å› ä¸ºä¸€ä¸ªsegmentå¯¹åº”ä¸€ä¸ªreducerï¼Œæ‰€ä»¥é€šè¿‡å‡å°‘è¡Œæ•°ï¼Œå¢åŠ segmentsä¸ªæ•°ä»è€Œå¢åŠ reducerä¸ªæ•°ï¼Œå……åˆ†åº”ç”¨å¹¶è¡ŒåŒ–ã€‚</li>
<li>åœ¨ioConfigä¸­è®¾ç½®rowFlushBoundaryå­—æ®µï¼Œå¹¶å°½å¯èƒ½å¤§ã€‚è¿™ä¸ªå‚æ•°æ„å‘³ç€åœ¨å°†æ•°æ®å†™å…¥ç£ç›˜å‰å †ä¸­ç¼“å­˜çš„è¡Œæ•°ï¼Œé€šè¿‡æé«˜ç¼“å­˜ä»è€Œä¼˜åŒ–ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ã€‚ä½†ä¹Ÿè¦æ³¨æ„è®¾ç½®ä¸è¦è¶…è¿‡å †å†…å­˜çš„ä¸Šé™ã€‚</li>
</ul>
<h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul>
<li><p>1ã€<a href="https://groups.google.com/forum/#!topic/druid-user/hG8ctsdt7XA" target="_blank" rel="external">Scheduling Hadoop indexing tasks in specific YARN queue</a></p>
</li>
<li><p>2ã€<a href="https://groups.google.com/forum/#!msg/druid-user/w82AsjkHzzk/qIxbjrcVBgAJ" target="_blank" rel="external">Druid hadoop EMR indexing is extremly slow</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;èµ·å› &quot;&gt;&lt;a href=&quot;#èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;èµ·å› &quot;&gt;&lt;/a&gt;èµ·å› &lt;/h3&gt;&lt;p&gt;ç”±äºæ—¥å¸¸æ‰€åšç»Ÿè®¡å¤šæ•°åŸºäºä¸€ä»½æ‹¼æ¥æ—¥å¿—ï¼Œç»“åˆæœ€è¿‘åšçš„druidç›¸å…³å·¥ä½œï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°æŠŠæ‹¼æ¥æ—¥å¿—ä¸€äº›ç»Ÿè®¡å¸¸ç”¨å­—æ®µselect group by
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="druid" scheme="http://blog.yinwoods.work/tags/druid/"/>
    
  </entry>
  
  <entry>
    <title>druidå†…å­˜å ç”¨è¿‡å¤šé—®é¢˜æ’æŸ¥</title>
    <link href="http://blog.yinwoods.work/2017/08/02/druid%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8%E8%BF%87%E5%A4%9A%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/"/>
    <id>http://blog.yinwoods.work/2017/08/02/druidå†…å­˜å ç”¨è¿‡å¤šé—®é¢˜æ’æŸ¥/</id>
    <published>2017-08-02T13:53:00.000Z</published>
    <updated>2017-08-02T14:05:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä½¿ç”¨druidæ¥åšå¹¿å‘Šå¹³å°çš„å®æ—¶åˆ†æï¼Œå‘ç°åå°å†…å­˜å ç”¨é•¿æœŸä¸º48Gï¼ˆä¸€å…±56Gï¼‰ï¼Œèµ·åˆæ€€ç–‘æ˜¯å› ä¸ºæ¯å¤©dataSourceæ•°æ®é‡è¾ƒå¤§ï¼Œå¦‚æœdruidå°†æ‰€æœ‰æ•°æ®åŠ è½½è¿›å†…å­˜å¤„ç†åˆ™ä¼šå¯¼è‡´è¿™ä¹ˆ48Gçš„å†…å­˜å ç”¨ï¼›ä½†æ˜¯åœ¨å¯¹dataSourceåšreindexå¤„ç†åï¼ŒdataSourceå¤§å°ç¼©å‡ä¸º5Må·¦å³çš„æƒ…å†µä¸‹å†…å­˜ä»ç„¶æ²¡æœ‰é™ä¸‹æ¥ã€‚</p>
<p>é€šè¿‡å¯¹ç³»ç»ŸçŠ¶å†µçš„ç»¼åˆè€ƒè™‘ï¼Œç°åœ¨æœ‰ä»¥ä¸‹ä¸¤ä¸ªçŒœæƒ³ï¼š</p>
<ul>
<li>druidé…ç½®é”™è¯¯ï¼Œå³ä½¿dataSourceå¾ˆå°ï¼Œdruidä»ç„¶æŠ¢ç€å†…å­˜ä¸æ”¾</li>
<li>reindexæ“ä½œé”™è¯¯ï¼Œä¹‹å‰çš„segmentå¹¶æœªåˆ é™¤ï¼Œdruidä»ç„¶åŠ è½½å†…å­˜å¯¼è‡´å†…å­˜æº¢å‡º</li>
</ul>
<p>å…¶å®è¿™é‡Œä¹‹æ‰€ä»¥å¯¹é—®é¢˜äº§ç”Ÿçš„åŸå› ä¸ç¡®å®šï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºè‡ªå·±å¯¹druidè¿™ä¸€å¥—æœåŠ¡å¹¶ä¸äº†è§£ï¼Œç»è¿‡æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œäº†è§£åˆ°druidå¹¶ä¸ä¼šæŠŠæ‰€æœ‰çš„æ•°æ®åŠ è½½è¿›å†…å­˜å†å¤„ç†ã€‚ è€Œä¸”ï¼Œåœ¨æ‰§è¡Œreindexæ—¶ï¼Œhistoricalçš„æ•°æ®ä¼šè¢«åˆ é™¤ï¼Œä½†deep storageå†…çš„æ•°æ®ä»ç„¶ä¿ç•™ï¼›åœ¨å¤„ç†åç»­æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­historicalä¹Ÿä¸ä¼šæŒ‰éœ€é‡æ–°å°†deep storageä¸­çš„æ•°æ®åŠ è½½è¿›æ¥ã€‚å¦‚æœç¡®å®æœ‰æŸ¥è¯¢å·²åˆ é™¤segmentæ•°æ®çš„éœ€æ±‚ï¼Œå¯ä»¥å…ˆå°†æ•°æ®ä»deep segmentå¯¼å…¥historicalï¼Œä¹‹åå†æŸ¥è¯¢ã€‚å¦‚æœæƒ³ä»deep storageä¸­åˆ é™¤segmentå¯ä»¥å‚è€ƒï¼š<a href="http://druid.io/docs/latest/misc/tasks.html" target="_blank" rel="external">ğŸ”—</a></p>
<p>historicalå¹¶ä¸ä¼šæŒ‰éœ€å°†æ‰€æœ‰æ•°æ®å­˜å…¥segmentCacheï¼Œåªæœ‰åœ¨coordinatorè¦æ±‚historicalæå‰è½½å…¥ä¸€ä¸ªsegmentæ—¶æ‰ä¼šæŠŠæ•°æ®å­˜å…¥segmentCacheã€‚ä¹Ÿå°±æ˜¯è¯´historicalåœ¨åŠ è½½æ•°æ®æ—¶ä¼šå…ˆå°†æ‰€æœ‰çš„segmentæ•°æ®ä¸‹è½½è‡³æœ¬åœ°ç¡¬ç›˜ï¼Œå› æ­¤è¦æ³¨æ„åœ¨åŠ è½½æ•°æ®ä¹‹å‰éœ€è¦ä¿è¯historicalèŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„ç¡¬ç›˜ç©ºé—´å­˜æ”¾è¿™äº›æ•°æ®ã€‚</p>
<p>å¯¹äºæŸ¥è¯¢é¢‘ç‡ä¸é«˜çš„å†å²æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªåŠæ³•æ¥é™ä½æˆæœ¬ï¼š</p>
<p>1ã€åœ¨æ€§èƒ½ç›¸å¯¹è¾ƒå·®çš„æœºå™¨ä¸Šï¼ˆæ¯”å¦‚ä½¿ç”¨æœºæ¢°ç¡¬ç›˜è€Œä¸æ˜¯SSDï¼‰æ„å»ºhistoricalèŠ‚ç‚¹å¹¶è®¾ç½®tierè§„åˆ™æ¥ä¸“é—¨å¤„ç†è¿™äº›å†å²æ•°æ®</p>
<p>2ã€å¦ä¸€ä¸ªæ–¹æ³•æ˜¯å¯¹è¶…è¿‡æŸä¸ªå†å²æ—¶æœŸçš„æ•°æ®è®¾ç½®è¾ƒå¤§çš„query granularityï¼Œä»è€Œé™ä½segmentå¤§å°ï¼›</p>
<p>å…·ä½“çš„historical tieré…ç½®å‚è€ƒ<a href="http://druid.io/docs/latest/configuration/historical.html" target="_blank" rel="external">ğŸ”—</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ä½¿ç”¨druidæ¥åšå¹¿å‘Šå¹³å°çš„å®æ—¶åˆ†æï¼Œå‘ç°åå°å†…å­˜å ç”¨é•¿æœŸä¸º48Gï¼ˆä¸€å…±56Gï¼‰ï¼Œèµ·åˆæ€€ç–‘æ˜¯å› ä¸ºæ¯å¤©dataSourceæ•°æ®é‡è¾ƒå¤§ï¼Œå¦‚æœdruidå°†æ‰€æœ‰æ•°æ®åŠ è½½è¿›å†…å­˜å¤„ç†åˆ™ä¼šå¯¼è‡´è¿™ä¹ˆ48Gçš„å†…å­˜å ç”¨ï¼›ä½†æ˜¯åœ¨å¯¹dataSourceåšreindexå¤„ç†åï¼ŒdataSourc
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="druid" scheme="http://blog.yinwoods.work/tags/druid/"/>
    
  </entry>
  
  <entry>
    <title>airflow + celery è¸©å‘è®°å½•</title>
    <link href="http://blog.yinwoods.work/2017/07/26/airflow+celery%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>http://blog.yinwoods.work/2017/07/26/airflow+celeryè¸©å‘è®°å½•/</id>
    <published>2017-07-26T09:02:00.000Z</published>
    <updated>2017-07-26T15:51:13.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åˆè¯†-airflow"><a href="#åˆè¯†-airflow" class="headerlink" title="åˆè¯† airflow"></a>åˆè¯† <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a></h3><p>å…¶å®æ—©åœ¨å»å¹´å°±å·²ç»æ¥è§¦åˆ° <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> äº†ï¼Œå½“æ—¶çš„éœ€æ±‚æ˜¯æŒ‰å°æ—¶æ‹¼æ¥ä¸¤ä»½çº¿ä¸Šæ—¥å¿—ï¼Œè€Œæ‹¼æ¥æ“ä½œå¿…é¡»ä¾èµ–äºä¸¤ä»½æ—¥å¿—çš„å®Œæ•´æ€§ã€‚ä»è¿™ä¸ªéœ€æ±‚å‡ºå‘ï¼Œäº†è§£åˆ°äº† <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ï¼Œä½†è¿«äºå®˜æ–¹æ–‡æ¡£çš„æ™¦æ¶©éš¾æ‡‚ï¼Œå†åŠ ä¸Šè¿™ä¸ªä»»åŠ¡å¯¹ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> çš„éœ€æ±‚ä¸å¤Ÿå¼ºï¼Œå°±å¼ƒå‘äº†ï¼›æœ€åä½¿ç”¨ python è„šæœ¬ä¸­ä¸€ä¸ª while True æ­»å¾ªç¯ + time.sleep() æ¥è§£å†³é—®é¢˜(å¦‚æœæ‰€ä¾èµ–çš„æ—¥å¿—æ²¡æœ‰å®Œå…¨å†™å…¥ï¼Œåˆ™ sleep ä¸€æ®µæ—¶é—´)ã€‚</p>
<h3 id="æ­£å¼å…¥å‘"><a href="#æ­£å¼å…¥å‘" class="headerlink" title="æ­£å¼å…¥å‘"></a>æ­£å¼å…¥å‘</h3><p>å‰å‡ å¤© boss å¸ƒç½®äº†ä¸€ä¸ªå¹¿å‘Šå¹³å°çš„ç»Ÿè®¡ä»»åŠ¡ï¼Œä¾èµ–å€’ä¹Ÿä¸å¤æ‚ï¼Œä½†æ˜¯è€ƒè™‘åˆ°æœªæ¥å¹³å°çš„æ‰©å±•æ€§ï¼Œè¿˜æ˜¯éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå¾ˆå¥½çš„å¤„ç†ç»Ÿè®¡ä»»åŠ¡çš„å·¥å…·çš„ã€‚è‡ªå·±ä¹Ÿè°ƒç ”æ¯”è¾ƒäº†ä¸€ä¸‹<code>ETL(æ•°æ®ä»“åº“)</code>è¿™æ–¹é¢çš„å·¥å…·ï¼Œç¡®å®æ•° <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> åŠŸèƒ½æœ€ä¸ºå¼ºå¤§ï¼Œæ—¢ç„¶è¿™æ ·é‚£å°±å…¥å‘å§ã€‚</p>
<h3 id="airflow-å®‰è£…é…ç½®è¿‡ç¨‹"><a href="#airflow-å®‰è£…é…ç½®è¿‡ç¨‹" class="headerlink" title="airflow å®‰è£…é…ç½®è¿‡ç¨‹"></a><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> å®‰è£…é…ç½®è¿‡ç¨‹</h3><p>è¿™é‡Œéƒ½æ˜¯æŒ‰ç…§å®˜ç½‘æ“ä½œï¼Œå…·ä½“å¦‚ä¸‹:</p>
<p>1ã€è®¾ç½® <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> é¡¹ç›®è·¯å¾„ï¼Œé»˜è®¤æ˜¯ç”¨æˆ·ä¸»ç›®å½•ä¸‹ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºç”¨ç¯å¢ƒå˜é‡ <code>AIRFLOW_HOME</code> æŒ‡å®š;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> AIRFLOW_HOME=~/airflow</div></pre></td></tr></table></figure>
<p>2ã€<a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> å®‰è£…ï¼Œå› ä¸º <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æ˜¯åŸºäº python ç¼–å†™ï¼Œå› æ­¤å¯ä»¥ç›´æ¥åˆ©ç”¨ pip å®‰è£…ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> è¿˜æä¾›äº†ä½¿ç”¨å…¶ä»–è½¯ä»¶çš„æ’ä»¶ï¼Œä¾‹å¦‚ mysqlã€hdfsã€hive ç­‰å·¥å…·ï¼Œå½“ç„¶è¿™äº›ä¹Ÿå¯ä»¥åœ¨åç»­éœ€è¦æ—¶å†å®‰è£…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pip3 install airflow</div><div class="line"></div><div class="line"><span class="comment"># å®‰è£… [airflow](https://github.com/apache/incubator-airflow) hive æ’ä»¶</span></div><div class="line">pip3 install <span class="string">"airflow[hive]"</span></div></pre></td></tr></table></figure>
<p>3ã€åˆå§‹åŒ– <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ç›¸å…³æ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow initdb</div></pre></td></tr></table></figure>
<p>4ã€å¯åŠ¨ webserver æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow webserver</div></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ€åŸºç¡€çš„ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æœåŠ¡å°±å¯åŠ¨äº†ï¼Œä¸‹é¢è¯´ä¸€è¯´ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> çš„é…ç½®ã€‚</p>
<h3 id="airflow-åŸºç¡€é…ç½®"><a href="#airflow-åŸºç¡€é…ç½®" class="headerlink" title="airflow åŸºç¡€é…ç½®"></a><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> åŸºç¡€é…ç½®</h3><p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> çš„é…ç½®æ–‡ä»¶ä¿å­˜åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œå‘½åä¸º airflow.cfg ï¼Œé€šè¿‡æ–‡ä»¶å†…çš„æ³¨é‡Šä¹Ÿå¯ä»¥çŸ¥é“æ¯ä¸ªé…ç½®é¡¹çš„å¤§è‡´å«ä¹‰ï¼Œè¿™é‡Œç®€å•è¯´ä¸‹å¸¸ç”¨çš„é…ç½®é¡¹ã€‚</p>
<h4 id="æ›´æ”¹æ•°æ®åº“"><a href="#æ›´æ”¹æ•°æ®åº“" class="headerlink" title="æ›´æ”¹æ•°æ®åº“"></a>æ›´æ”¹æ•°æ®åº“</h4><p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ä¸ºäº†èƒ½å¤Ÿè®©ç”¨æˆ·å¿«é€Ÿä½¿ç”¨é€‰æ‹©äº† sqllite æ•°æ®åº“ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¾€å¾€ mysql æ›´ä¸ºå¹¿æ³›ä½¿ç”¨ï¼Œè‹¥è¦ä½¿ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ä½¿ç”¨ mysql ï¼Œé¦–å…ˆæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install <span class="string">"airflow[mysql]"</span></div></pre></td></tr></table></figure>
<p>æ›´æ”¹ airflow.cfg ä¸­ <code>sql_alchemy_conn</code> çš„å€¼ï¼Œé€šè¿‡å˜é‡åå¯çŸ¥é…ç½®ä½¿ç”¨çš„æ˜¯ <a href="https://www.sqlalchemy.org/" target="_blank" rel="external">sql_alchemy</a> çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼Œå…·ä½“æ ¼å¼ä¸ºï¼š<code>mysql+pymysql://username:password@host:port/database</code>ï¼Œå½“ç„¶è¿™é‡Œ <a href="https://github.com/PyMySQL/PyMySQL" target="_blank" rel="external">pymysql</a> å¯ä»¥æ ¹æ®è‡ªå·±å–œå¥½æ›´æ¢ã€‚</p>
<p>ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œéœ€è¦æ‰§è¡Œ <code>airflow resetdb</code> å¹¶é‡æ–°å¯åŠ¨ web æœåŠ¡(<code>airflow webserver</code>)ï¼Œæ•°æ®åº“æ›´æ¢åˆ™ç”Ÿæ•ˆã€‚</p>
<h4 id="ä¸ºwebæœåŠ¡å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½"><a href="#ä¸ºwebæœåŠ¡å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½" class="headerlink" title="ä¸ºwebæœåŠ¡å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½"></a>ä¸ºwebæœåŠ¡å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½</h4><p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> é»˜è®¤æ˜¯æ— éœ€ç™»å½•å³å¯è®¿é—®ä½¿ç”¨çš„ï¼Œè€Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸ºäº†æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œéœ€è¦å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯åŠŸèƒ½ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[webserver]</div><div class="line"><span class="comment"># å¼€å¯ç”¨æˆ·èº«ä»½éªŒè¯</span></div><div class="line">authenticate = True</div><div class="line"></div><div class="line"><span class="comment"># æ ¹æ®ç”¨æˆ·æ˜¾ç¤ºdagåˆ—è¡¨(ä¾èµ–äºç”¨æˆ·èº«ä»½éªŒè¯çš„å¼€å¯)</span></div><div class="line">filter_by_owner = False</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¼€å¯äº†ç”¨æˆ·èº«ä»½éªŒè¯çš„åŠŸèƒ½ï¼Œä½†ç³»ç»Ÿè¿˜æ²¡æœ‰é»˜è®¤ç”¨æˆ·ï¼Œéœ€è¦è‡ªè¡Œæ‰‹åŠ¨æ·»åŠ ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥æ’å…¥é»˜è®¤ç”¨æˆ·ä¿¡æ¯åˆ°æ•°æ®åº“å¯¹åº”çš„ users è¡¨ä¸­(ä¸æ¨è);å¦ä¸€ç§åˆ™æ˜¯é€šè¿‡ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æä¾›çš„åŠŸèƒ½æ¥æ·»åŠ ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p>
<p>æ‰“å¼€ipythonï¼Œæ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> airflow</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> airflow <span class="keyword">import</span> models, settings</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> airflow.contrib.auth.backends.password_auth <span class="keyword">import</span> PasswordUser</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>user = PasswordUser(models.User())</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>user.username = <span class="string">'new_user_name'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>user.email = <span class="string">'new_user_email@example.com'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>user.password = <span class="string">'set_the_password'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>session = settings.Session()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>session.add(user)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>session.commit()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>session.close()</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</div></pre></td></tr></table></figure>
<p>é‡å¯ web æœåŠ¡( <code>airflow webserver</code> )ï¼Œåˆ·æ–°ç½‘å€æµè§ˆå™¨ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç”¨æˆ·ç™»å½•é¡µé¢ã€‚</p>
<h3 id="é…ç½®-airflow-Celery"><a href="#é…ç½®-airflow-Celery" class="headerlink" title="é…ç½® airflow + Celery"></a>é…ç½® <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> + <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a></h3><p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æä¾›äº†ä¸‰ç§ Executor ï¼Œåˆ†åˆ«æ˜¯ <code>SequentialExecutor</code>ã€<code>LocalExecutor</code> ä»¥åŠ <code>CeleryExecutor</code>ï¼›<a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> é…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤çš„æ‰§è¡Œæ–¹å¼æ˜¯(<code>SequentialExecutor</code>)ï¼Œè¿™ä¸‰è€…çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>SequentialExecutor</code>: å•è¿›ç¨‹é¡ºåºæ‰§è¡Œï¼Œé€šå¸¸åªç”¨äºæµ‹è¯•</li>
<li><code>LocalExecutor</code>: å¤šè¿›ç¨‹æœ¬åœ°æ‰§è¡Œï¼Œä½¿ç”¨pythonçš„å¤šè¿›ç¨‹åº“è¾¾åˆ°å¤šè¿›ç¨‹æ‰§è¡Œç›®çš„</li>
<li><code>CeleryExecutor</code>: ä½¿ç”¨<a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> ä½œä¸ºæ‰§è¡Œå™¨ï¼Œé…ç½® <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> åå¯ä»¥åˆ©ç”¨é›†ç¾¤åˆ†å¸ƒå¼æ‰§è¡Œä»»åŠ¡</li>
</ul>
<p>åœ¨è¿™é‡Œæˆ‘é€‰ç”¨äº†<a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a>ï¼ŒåŒæ ·æ˜¯ä¸ºäº† <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æœªæ¥çš„å¯æ‰©å±•æ€§ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ä½¿ç”¨ <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> æ—¶ï¼Œåç«¯æœåŠ¡å¯ä»¥ä½¿ç”¨ <a href="https://www.rabbitmq.com/" target="_blank" rel="external">RabbitMQ</a> æˆ– <a href="https://redis.io/" target="_blank" rel="external">Redis</a> ï¼Œç›¸å¯¹æ¥è¯´è‡ªå·±å¯¹ redis ç†Ÿæ‚‰ä¸€äº›ï¼Œä½†æ®æˆ‘æ‰€çŸ¥ <a href="https://redis.io/" target="_blank" rel="external">Redis</a> ç›¸å¯¹æ¥è¯´æ¯”è¾ƒåƒå†…å­˜ï¼Œå› æ­¤åœ¨è¿™é‡Œé€‰ç”¨äº† <a href="https://www.rabbitmq.com/" target="_blank" rel="external">RabbitMQ</a> ã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<h4 id="å®‰è£…-RabbitMQ"><a href="#å®‰è£…-RabbitMQ" class="headerlink" title="å®‰è£… RabbitMQ"></a>å®‰è£… <a href="https://www.rabbitmq.com/" target="_blank" rel="external">RabbitMQ</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Ubuntu 17.04</span></div><div class="line">sudo apt install erlang rabbitmq-server</div></pre></td></tr></table></figure>
<h4 id="RabbitMQ-æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç "><a href="#RabbitMQ-æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç " class="headerlink" title="RabbitMQ æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç "></a><a href="https://www.rabbitmq.com/" target="_blank" rel="external">RabbitMQ</a> æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Ubuntu 17.04</span></div><div class="line">sudo rabbitmqctl add_user airflow airflow</div><div class="line">sudo rabbitmqctl add_vhost airflow</div><div class="line">sudo rabbitmqctl set_user_tags airflow airflow</div><div class="line">sudo rabbitmqctl set_permissions -p airflow airflow <span class="string">".*"</span> <span class="string">".*"</span> <span class="string">".*"</span></div><div class="line">sudo rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</div></pre></td></tr></table></figure>
<p>æ›´æ”¹é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># transport://userid:password@hostname:port/virtual_host</span></div><div class="line">broker_url = amqp://ariflow:airflow@localhost:5672/airflow</div><div class="line">celery_result_backend = amqp://airflow:airflow@localhost:5672/airflow</div></pre></td></tr></table></figure>
<p>è‡³æ­¤ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> + <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> é…ç½®å®Œæˆï¼Œæ¥ä¸‹æ¥è¯´è¯´å¦‚ä½•å¯åŠ¨æœåŠ¡</p>
<h3 id="å¯åŠ¨-Airflow-Celery-æœåŠ¡"><a href="#å¯åŠ¨-Airflow-Celery-æœåŠ¡" class="headerlink" title="å¯åŠ¨ Airflow + Celery æœåŠ¡"></a>å¯åŠ¨ Airflow + Celery æœåŠ¡</h3><p>ä¸€å…±æœ‰å››ä¸ªæœåŠ¡ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>airflow webserver</code> æœåŠ¡</li>
<li><code>airflow flower</code> <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> ç®¡ç†ç•Œé¢</li>
<li><code>airflow worker</code> <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> Worker</li>
<li><code>airflow scheduler</code> è°ƒåº¦å™¨</li>
</ul>
<h4 id="å¯åŠ¨-airflow-webserver-æœåŠ¡"><a href="#å¯åŠ¨-airflow-webserver-æœåŠ¡" class="headerlink" title="å¯åŠ¨ airflow webserver æœåŠ¡"></a>å¯åŠ¨ <code>airflow webserver</code> æœåŠ¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow webserver</div></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨airflow-flower"><a href="#å¯åŠ¨airflow-flower" class="headerlink" title="å¯åŠ¨airflow flower"></a>å¯åŠ¨<a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> flower</h4><p><code>airflow flower</code> æ˜¯ä¸€ä¸ªç›‘æ§ <a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> åˆ†å¸ƒå¼é˜Ÿåˆ—çš„ web æœåŠ¡ï¼Œé€šè¿‡å®ƒå¯ä»¥çœ‹åˆ° <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> dag ä¸­task çš„æ‰§è¡ŒçŠ¶å†µã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow flower</div></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨-airflow-worker"><a href="#å¯åŠ¨-airflow-worker" class="headerlink" title="å¯åŠ¨ airflow worker"></a>å¯åŠ¨ <code>airflow worker</code></h4><p><a href="http://www.celeryproject.org/" target="_blank" rel="external">Celery</a> çš„ workerï¼Œç”¨äºæ‰§è¡Œ dag ä¸­å…·ä½“çš„ task</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow worker</div></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨-airflow-scheduler"><a href="#å¯åŠ¨-airflow-scheduler" class="headerlink" title="å¯åŠ¨ airflow scheduler"></a>å¯åŠ¨ <code>airflow scheduler</code></h4><p><code>airflow scheduler</code> ç”¨äºå¯åŠ¨è°ƒåº¦å™¨ï¼Œå®Œæˆå¯¹ dag ä¸­ task çš„è°ƒåº¦ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">airflow scheduler</div></pre></td></tr></table></figure>
<h3 id="airflow-ç®€å•ç¤ºä¾‹"><a href="#airflow-ç®€å•ç¤ºä¾‹" class="headerlink" title="airflow ç®€å•ç¤ºä¾‹"></a><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ç®€å•ç¤ºä¾‹</h3><p>ç¯å¢ƒå·²ç»æ­å¥½ï¼Œç°åœ¨å†™ä¸ª dag æ¥æµ‹è¯•ä¸€ä¸‹ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> å§ã€‚åœ¨å…·ä½“çš„ä»£ç å±•ç°ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ä¸Šæ–‡å·²ç»å‡ºç°å¤šæ¬¡çš„ dag è¿™ä¸ªæ¦‚å¿µï¼Œdag å¯¹äºç†Ÿæ‚‰å›¾è®ºçš„åŒå­¦ä¸€å®šä¸é™Œç”Ÿï¼Œä¹Ÿå³ <code>(Directed Acyclic Graph, DAG)</code> ï¼Œä¸ºä»€ä¹ˆå«æœ‰å‘æ— ç¯å›¾å‘¢ï¼Œå› ä¸ºä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å°±æ˜¯ä¸€ä¸ª DAG ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/images/dag.png" alt="DAG">ã€‚</p>
<p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ä¼šé»˜è®¤è¯»å– <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ç›®å½•ä¸‹ dags ä¸­çš„æ‰€æœ‰ python æ–‡ä»¶ä½œä¸º dag ï¼Œå› æ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ª dags ç›®å½•ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç å†™å…¥ <code>dags/test.py</code> ä¸­ï¼Œä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿çœ‹åˆ° dag æµ‹è¯•æˆåŠŸä¸å¦ï¼Œåœ¨ test.py é‡Œé¢è®¾ç½®äº†æ¯æ¬¡å‘ test ç›®å½•ä¸‹çš„æ–‡ä»¶å†™å…¥æ–°å†…å®¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> builtins <span class="keyword">import</span> range</div><div class="line"><span class="keyword">import</span> airflow</div><div class="line"><span class="keyword">from</span> airflow.operators.python_operator <span class="keyword">import</span> PythonOperator</div><div class="line"><span class="keyword">from</span> airflow.models <span class="keyword">import</span> DAG</div><div class="line"></div><div class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</div><div class="line"></div><div class="line">args = &#123;</div><div class="line">    <span class="string">'owner'</span>: <span class="string">'yinwoods'</span>,</div><div class="line">    <span class="string">'start_date'</span>: airflow.utils.dates.datetime(<span class="number">2017</span>, <span class="number">7</span>, <span class="number">27</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">dag = DAG(</div><div class="line">    dag_id=<span class="string">'yinwoods'</span>, default_args=args,</div><div class="line">    schedule_interval=<span class="string">'0 1 * * *'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_write_function</span><span class="params">(random_base)</span>:</span></div><div class="line">    <span class="string">"""This is a function that will run within the DAG execution"""</span></div><div class="line">    <span class="keyword">with</span> open(<span class="string">'~/airflow/test/'</span> + random_base, <span class="string">'a'</span>) <span class="keyword">as</span> f:</div><div class="line">        f.write(random_base[<span class="number">-1</span>] + <span class="string">'\n'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_context</span><span class="params">(ds, **kwargs)</span>:</span></div><div class="line">    pprint(kwargs)</div><div class="line">    print(ds)</div><div class="line">    <span class="keyword">return</span> <span class="string">'Whatever you return gets printed in the logs'</span></div><div class="line"></div><div class="line"></div><div class="line">run_this = PythonOperator(</div><div class="line">    task_id=<span class="string">'print_the_context'</span>,</div><div class="line">    provide_context=<span class="keyword">True</span>,</div><div class="line">    python_callable=print_context,</div><div class="line">    op_kwargs=&#123;<span class="string">'test'</span>: <span class="string">'test'</span>&#125;,</div><div class="line">    dag=dag)</div><div class="line"></div><div class="line"><span class="comment"># Generate 10 sleeping tasks, sleeping from 0 to 9 seconds respectively</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</div><div class="line">    task = PythonOperator(</div><div class="line">        task_id=<span class="string">'print_for_'</span> + str(i),</div><div class="line">        python_callable=my_write_function,</div><div class="line">        op_kwargs=&#123;<span class="string">'random_base'</span>: <span class="string">'file_'</span> + str(i)&#125;,</div><div class="line">        dag=dag)</div><div class="line"></div><div class="line">    task.set_upstream(run_this)</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä¿å­˜åï¼Œæ‰§è¡Œ <code>python test.py</code> å³å°†è¯¥ dag å¯¼å…¥ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> ä¸­ï¼Œä¹‹åå¯ä»¥é€‰ç”¨ <code>airflow test</code> æˆ– <code>airflow backfill</code> æµ‹è¯•ï¼Œè¿™é‡Œå°±ä¸å†è®²è¿°å…·ä½“ç”¨æ³•ã€‚</p>
<p>å¯åŠ¨ dag æ—¶æ—¢å¯ä»¥ä½¿ç”¨ <code>airflow run dag_id task_id execution_date</code> ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ web ç•Œé¢çš„æ‰§è¡ŒæŒ‰é’®æ‰§è¡Œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯åŠ¨ä¹‹å‰éœ€è¦ <code>airflow unpause dag_id</code> æˆ–åœ¨ web ç•Œé¢å¼€å¯ dag å¯¹åº”çš„æŒ‰é’®ã€‚</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥çœ‹åˆ°æ‰§è¡ŒçŠ¶æ€ä»¥åŠç»“æœäº†ã€‚å¦å¤–ä¸‹é¢æä¾›äº†å¦ä¸€ä»½ç¤ºä¾‹ä»£ç ï¼Œæ³¨æ„è§‚å¯Ÿè¿™ä»½ä»£ç ä¸­å®šä¹‰ä»»åŠ¡é—´ä¾èµ–å…³ç³»çš„è¯­å¥:)ï¼Œä¸ªäººè®¤ä¸ºè¿™æ ·çš„è¯­å¥èƒ½å¤Ÿæ›´ç›´è§‚è¡¨æ˜ä»»åŠ¡ä¹‹é—´çš„å…³ç³»ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</div><div class="line"><span class="keyword">from</span> [airflow](https://github.com/apache/incubator-airflow) <span class="keyword">import</span> DAG</div><div class="line"><span class="keyword">from</span> airflow.operators.dummy_operator <span class="keyword">import</span> DummyOperator</div><div class="line"><span class="keyword">from</span> airflow.operators.python_operator <span class="keyword">import</span> PythonOperator</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hello</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello world!'</span></div><div class="line"></div><div class="line">dag = DAG(<span class="string">'hello_world'</span>, description=<span class="string">'Simple tutorial DAG'</span>,</div><div class="line">          schedule_interval=<span class="string">'0 12 * * *'</span>,</div><div class="line">          start_date=datetime(<span class="number">2017</span>, <span class="number">3</span>, <span class="number">20</span>),</div><div class="line">          catchup=<span class="keyword">False</span>)</div><div class="line"></div><div class="line">dummy_operator = DummyOperator(task_id=<span class="string">'dummy_task'</span>, retries=<span class="number">3</span>, dag=dag)</div><div class="line"></div><div class="line">hello_operator = PythonOperator(task_id=<span class="string">'hello_task'</span>,</div><div class="line">                                python_callable=print_hello, dag=dag)</div><div class="line"></div><div class="line">dummy_operator &gt;&gt; hello_operator</div></pre></td></tr></table></figure>
<p>å¦‚æœæ‰§è¡Œ dag åï¼Œå‘ç° dag ä¸­éƒ¨åˆ† task ä¸€ç›´å¤„äº queue çš„çŠ¶æ€ï¼Œå¯ä»¥æŸ¥çœ‹ <code>airflow scheduler</code> çš„æ‰§è¡ŒçŠ¶æ€ï¼Œå¦‚æœæ˜¯æŒ‚æ‰äº†ï¼Œä¸”é‡å¯ååˆæŒ‚æ‰å¯ä»¥å‚è€ƒä¸‹é¢çš„è§£å†³æ–¹æ³•ã€‚</p>
<h3 id="æ”¹æºç è§£å†³-airflow-scheduler-ä¸­æ–­-bug"><a href="#æ”¹æºç è§£å†³-airflow-scheduler-ä¸­æ–­-bug" class="headerlink" title="æ”¹æºç è§£å†³ airflow scheduler ä¸­æ–­ bug"></a>æ”¹æºç è§£å†³ <code>airflow scheduler</code> ä¸­æ–­ bug</h3><p>æˆ‘åœ¨ä½¿ç”¨ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a>  çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº† <code>airflow scheduler</code> å¯åŠ¨åæ‰§è¡Œç‰‡åˆ»å³è¢«æ–­å¼€è¿æ¥çš„æƒ…å†µï¼Œé€šè¿‡è°·æ­Œæœç´¢ï¼Œæ‰¾åˆ°äº†ä»¥ä¸‹ä¿®æ”¹ <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> æºç çš„è§£å†³æ–¹æ³•ï¼Œè‡³äºè¿™ä¸ªä¸­æ–­bugçš„å…·ä½“åŸå› å°šä¸æ¸…æ¥šã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">--- /usr/local/lib/python3<span class="number">.4</span>/dist-packages/airflow/jobs.py.orig	<span class="number">2017</span><span class="number">-02</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">58</span>:<span class="number">55.057991344</span> +<span class="number">0000</span></div><div class="line">+++ /usr/local/lib/python3<span class="number">.4</span>/dist-packages/airflow/jobs.py	<span class="number">2017</span><span class="number">-02</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">57</span>:<span class="number">07.060060262</span> +<span class="number">0000</span></div><div class="line"><span class="meta">@@ -1371,6 +1371,8 @@</span></div><div class="line">         last_stat_print_time = datetime(<span class="number">2000</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">         <span class="comment"># Last time that self.heartbeat() was called.</span></div><div class="line">         last_self_heartbeat_time = datetime.now()</div><div class="line">+        <span class="comment"># Last time that self.executor.heartbeat() was called.</span></div><div class="line">+        last_executor_heartbeat_time = datetime.now()</div><div class="line">         <span class="comment"># Last time that the DAG dir was traversed to look for files</span></div><div class="line">         last_dag_dir_refresh_time = datetime.now()</div><div class="line"></div><div class="line"><span class="meta">@@ -1436,9 +1438,14 @@</span></div><div class="line">                 self._execute_task_instances(simple_dag_bag,</div><div class="line">                                              (State.SCHEDULED,))</div><div class="line"></div><div class="line">-            <span class="comment"># Call hearbeats</span></div><div class="line">-            self.logger.info(<span class="string">"Heartbeating the executor"</span>)</div><div class="line">-            self.executor.heartbeat()</div><div class="line">+            <span class="comment"># Heartbeat the executor periodically</span></div><div class="line">+            time_since_last_heartbeat = (datetime.now() -</div><div class="line">+                                         last_executor_heartbeat_time).total_seconds()</div><div class="line">+            <span class="keyword">if</span> time_since_last_heartbeat &gt; self.heartrate:</div><div class="line">+                self.logger.info(<span class="string">"Heartbeating the executor"</span>)</div><div class="line">+                <span class="keyword">try</span>: self.executor.heartbeat()</div><div class="line">+                <span class="keyword">except</span> ConnectionResetError: <span class="keyword">pass</span>  <span class="comment"># RabbitMQ sometimes resets the socket connection</span></div><div class="line">+                last_executor_heartbeat_time = datetime.now()</div><div class="line"></div><div class="line">             <span class="comment"># Process events from the executor</span></div><div class="line">             self._process_executor_events()</div></pre></td></tr></table></figure>
<p><a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> çš„ä»‹ç»ä¸ä½¿ç”¨å°±å…ˆå†™åˆ°è¿™é‡Œï¼Œå¦‚æœè¯»è€…æœ‰ä¸æˆ‘ç±»ä¼¼æˆ–ç›¸åŒçš„é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºæ¢è®¨ã€‚</p>
<h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul>
<li><a href="https://airflow.incubator.apache.org/" target="_blank" rel="external">Airflow å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="http://morefreeze.github.io/2016/12/airflow.html" target="_blank" rel="external">Airflow ç®€æ˜æŒ‡å—</a></li>
<li><a href="http://blog.genesino.com/2016/05/airflow/#%E9%85%8D%E7%BD%AEceleryexecutor-rabbitmq%E6%94%AF%E6%8C%81" target="_blank" rel="external">Airflow Useage</a></li>
<li><a href="https://issues.apache.org/jira/browse/AIRFLOW-342" target="_blank" rel="external">Exception in <a href="https://github.com/apache/incubator-airflow" target="_blank" rel="external">airflow</a> scheduler: Connection reset by peer</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åˆè¯†-airflow&quot;&gt;&lt;a href=&quot;#åˆè¯†-airflow&quot; class=&quot;headerlink&quot; title=&quot;åˆè¯† airflow&quot;&gt;&lt;/a&gt;åˆè¯† &lt;a href=&quot;https://github.com/apache/incubator-airflow&quot;
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python, airflow, celery" scheme="http://blog.yinwoods.work/tags/python-airflow-celery/"/>
    
  </entry>
  
  <entry>
    <title>ã€ŠFluent Pythonã€‹è¯»ä¹¦ç¬”è®°</title>
    <link href="http://blog.yinwoods.work/2017/07/25/fluent-python-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.yinwoods.work/2017/07/25/fluent-python-è¯»ä¹¦ç¬”è®°/</id>
    <published>2017-07-25T06:12:37.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬äºŒæ¬¡è¯»Fluent Pythonäº†ï¼Œè®°å¾—ç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™æ€»æœ‰é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œä½†è¿«äºå½“æ—¶åˆšæ¥è§¦pythonä¸ä¹…ï¼Œä¸”æ²¡æœ‰åšè¯»ä¹¦ç¬”è®°ï¼Œæ‰€ä»¥åªæ˜¯çœ‹çš„æ—¶å€™è§‰å¾—è¿™æœ¬ä¹¦å¾ˆå¥½ï¼Œçœ‹è¿‡å°±å¿˜äº†ã€‚ç¬¬äºŒæ¬¡è¯»ï¼Œç‰¹æ„ä¹°äº†çº¸è´¨ç‰ˆï¼Œæ‰“ç®—å°†è¯»ä¹¦è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³ã€æ€è€ƒéƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾›ä»–äººä»¥åŠæœªæ¥çš„è‡ªå·±å‚è€ƒã€‚</p>
<h3 id="ç¬¬äºŒç« -An-Array-of-Sequences"><a href="#ç¬¬äºŒç« -An-Array-of-Sequences" class="headerlink" title="ç¬¬äºŒç«  An Array of Sequences"></a>ç¬¬äºŒç«  An Array of Sequences</h3><ul>
<li>Pg46: å€Ÿç”¨äºŒåˆ†æœç´¢æ¥å®ç°å¤šé‡æ¡ä»¶åˆ¤æ–­ï¼Œè¿™æ ·çš„æ“ä½œå€¼å¾—å€Ÿé‰´ï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">grade</span><span class="params">(score, breakpoints=[<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>], grades=<span class="string">'FDCBA'</span>)</span>:</span></div><div class="line">    i = bisect.bisect(breakpoints, score)</div><div class="line">    <span class="keyword">return</span> grades[i]</div></pre></td></tr></table></figure>
<ul>
<li><p>Pg48: å¤§é‡æ•°å€¼çš„è¯»å†™ä»¥åŠç›¸å…³æ“ä½œæœ€å¥½ä½¿ç”¨é’ˆå¯¹æ•°å€¼ä¼˜åŒ–çš„arrayè€Œä¸æ˜¯list</p>
</li>
<li><p>Pg51: å¤§é‡æ•°æ®çš„å¤åˆ¶å¯ä»¥å€ŸåŠ©memoryview</p>
</li>
</ul>
<h3 id="ç¬¬ä¸‰ç« -Dictionaries-and-Sets"><a href="#ç¬¬ä¸‰ç« -Dictionaries-and-Sets" class="headerlink" title="ç¬¬ä¸‰ç«  Dictionaries and Sets"></a>ç¬¬ä¸‰ç«  Dictionaries and Sets</h3><ul>
<li>Pg70: åœ¨ä½¿ç”¨dictçš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™éš¾ä»¥ç¡®å®škeyæ˜¯å¦åœ¨dictä¸­å­˜åœ¨ï¼Œå› æ­¤ä¼šå…ˆåˆ©ç”¨getæ–¹æ³•å–keyå¯¹åº”çš„valueï¼Œåœ¨å¯¹valueè¿›è¡Œä¸€äº›æ“ä½œä¹‹åå†update dictï¼Œè¿™æ ·çš„æ“ä½œä¼šæ˜¾å¾—å¾ˆçç¢ï¼Œå¾ˆå¤šæ—¶å€™å¯ä»¥å€ŸåŠ©dict.setdefault()æ–¹æ³•æ¥å®Œæˆä¸Šè¿°ä¸€ç³»åˆ—æ“ä½œã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt = dict(one=<span class="number">1</span>, two=<span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt.setdefault(<span class="string">'three'</span>, <span class="number">0</span>)</div><div class="line"><span class="number">0</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt.update(&#123;<span class="string">'three'</span>: dt.setdefault(<span class="string">'three'</span>, <span class="number">0</span>) + <span class="number">3</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt</div><div class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt.update(&#123;<span class="string">'one'</span>: dt.setdefault(<span class="string">'one'</span>, <span class="number">0</span>) + <span class="number">3</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>dt</div><div class="line">&#123;<span class="string">'one'</span>: <span class="number">4</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>Pg70: åœ¨dictä¸Šåšä¸€äº›æ“ä½œæ—¶ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›ç›´æ¥åˆ©ç”¨[key]å½¢å¼å–å€¼æ—¶ä¸äº§ç”Ÿ<code>KeyError</code>ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼›ä¸€ç§æ˜¯å€Ÿç”¨defaultDictï¼Œå¦ä¸€ç§åˆ™æ˜¯ç»§æ‰¿dictç±»å¹¶è‡ªå·±å®ç°<strong>missing</strong>æ–¹æ³•</p>
</li>
<li><p>Pg78: pythonæ ‡å‡†åº“ä¸­å¹¶æ²¡æœ‰æä¾›åªè¯»çš„dictï¼Œä½†æ˜¯å¯ä»¥å€Ÿç”¨typesä¸­çš„MappingProxyTypeæ¥å®ç°ç›¸å…³åŠŸèƒ½ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯MappingProxyTypeå®ä¾‹ä¼šéšç€ä¼ é€’è¿›æ¥çš„dictæ”¹å˜è€Œæ”¹å˜</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> types <span class="keyword">import</span> MappingProxyType</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="number">1</span>: <span class="string">'A'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy = MappingProxyType(d)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy</div><div class="line">mappingproxy(&#123;<span class="number">1</span>: <span class="string">'A'</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy[<span class="number">1</span>]</div><div class="line"><span class="string">'A'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy[<span class="number">2</span>] = <span class="string">'x'</span></div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">TypeError: <span class="string">'mappingproxy'</span> object does <span class="keyword">not</span> support item assignment</div><div class="line"><span class="string">'mappingproxy'</span> object does <span class="keyword">not</span> support item assignment</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="number">2</span>] = <span class="string">'B'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy</div><div class="line">mappingproxy(&#123;<span class="number">1</span>: <span class="string">'A'</span>, <span class="number">2</span>: <span class="string">'B'</span>&#125;)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d_proxy[<span class="number">2</span>]</div><div class="line"><span class="string">'B'</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¬¬äºŒæ¬¡è¯»Fluent Pythonäº†ï¼Œè®°å¾—ç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™æ€»æœ‰é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œä½†è¿«äºå½“æ—¶åˆšæ¥è§¦pythonä¸ä¹…ï¼Œä¸”æ²¡æœ‰åšè¯»ä¹¦ç¬”è®°ï¼Œæ‰€ä»¥åªæ˜¯çœ‹çš„æ—¶å€™è§‰å¾—è¿™æœ¬ä¹¦å¾ˆå¥½ï¼Œçœ‹è¿‡å°±å¿˜äº†ã€‚ç¬¬äºŒæ¬¡è¯»ï¼Œç‰¹æ„ä¹°äº†çº¸è´¨ç‰ˆï¼Œæ‰“ç®—å°†è¯»ä¹¦è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³ã€æ€è€ƒéƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾›ä»–äººä»¥åŠæœªæ¥çš„è‡ªå·±å‚è€ƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python" scheme="http://blog.yinwoods.work/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python requestsåº“å¤„ç†302é‡å®šå‘</title>
    <link href="http://blog.yinwoods.work/2017/06/24/python-requests%E5%BA%93%E5%A4%84%E7%90%86302%E9%87%8D%E5%AE%9A%E5%90%91/"/>
    <id>http://blog.yinwoods.work/2017/06/24/python-requestsåº“å¤„ç†302é‡å®šå‘/</id>
    <published>2017-06-24T11:10:37.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æ¥äº†ä¸€ä¸ªæ´»ï¼Œç»™å®šä¸€äº›é“¾æ¥ï¼Œç»Ÿè®¡æ¯ä¸ªé“¾æ¥çš„è·³è½¬æ¬¡æ•°ä»¥åŠæœ€ç»ˆè·³è½¬è‡³çš„ç½‘å€ã€‚</p>
<p>åˆšå¼€å§‹æ˜¯ç”¨scrapyå†™çš„ï¼Œé€šè¿‡Googleä¸stack overflowäº†è§£åˆ°ä¸‹é¢è¿™ç§å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">conn = pymysql.connect(</div><div class="line">        host=<span class="string">'host'</span>,</div><div class="line">        user=<span class="string">'user'</span>,</div><div class="line">        password=<span class="string">'password'</span>,</div><div class="line">        db=<span class="string">'database'</span>)</div><div class="line">cursor = conn.cursor()</div><div class="line"></div><div class="line">sql = <span class="string">'''</span></div><div class="line">    select distinct click_url from table</div><div class="line">    where country = "&#123;&#125;" and status=0'''.format(country)</div><div class="line">cursor.execute(sql)</div><div class="line">urls = cursor.fetchall()</div><div class="line">start_urls = (x[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> urls)</div><div class="line"></div><div class="line"><span class="comment"># æ— é™è·³è½¬ æµ‹è¯•ä½¿ç”¨</span></div><div class="line"><span class="comment"># start_urls = ('http://maoshuai.sinaapp.com/cnblog/302test.php', )</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> self.start_urls:</div><div class="line">        <span class="keyword">yield</span> scrapy.Request(url, meta=&#123;<span class="string">'original_url'</span>: url&#125;)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></div><div class="line">    <span class="comment"># print('response url', response.url)</span></div><div class="line">    <span class="comment"># print('response status', response.status)</span></div><div class="line">    request = response.request</div><div class="line">    redirected_url = request.url</div><div class="line"></div><div class="line">    original_url = response.meta[<span class="string">'original_url'</span>]</div><div class="line"></div><div class="line">    <span class="keyword">if</span> original_url <span class="keyword">not</span> <span class="keyword">in</span> self.redirect_count.keys():</div><div class="line">        self.redirect_count.update(&#123;original_url: <span class="number">0</span>&#125;)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> response.status &gt;= <span class="number">300</span> <span class="keyword">and</span> response.status &lt; <span class="number">400</span>:</div><div class="line"></div><div class="line">        self.redirect_count[original_url] += <span class="number">1</span></div><div class="line">        location = to_native_str(</div><div class="line">                response.headers[<span class="string">'location'</span>].decode(<span class="string">'latin1'</span>))</div><div class="line">        request = response.request</div><div class="line">        redirected_url = urljoin(request.url, location)</div><div class="line">        <span class="comment"># print('redirected to ', redirected_url)</span></div><div class="line">        <span class="keyword">yield</span> scrapy.Request(</div><div class="line">                redirected_url,</div><div class="line">                meta=&#123;<span class="string">'original_url'</span>: original_url&#125;,</div><div class="line">                callback=self.parse)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        redirected = request.replace(</div><div class="line">                url=redirected_url, method=<span class="string">'GET'</span>, body=<span class="string">''</span>)</div><div class="line">        redirected.headers.pop(<span class="string">'Content-Type'</span>, <span class="keyword">None</span>)</div><div class="line">        redirected.headers.pop(<span class="string">'Content-Length'</span>, <span class="keyword">None</span>)</div><div class="line">        <span class="keyword">yield</span> redirected</div><div class="line"></div><div class="line">    count = self.redirect_count.get(original_url)</div><div class="line">    <span class="keyword">if</span> count &gt;= <span class="number">1</span> <span class="keyword">and</span> response.url.startswith(<span class="string">'https://play.google.com'</span>):</div><div class="line">        print(self.redirect_count.get(original_url))</div><div class="line">        self.update_count(</div><div class="line">                original_url, self.redirect_count.get(original_url))</div></pre></td></tr></table></figure>
<p>å¤§è‡´è¯´ä¸€ä¸‹ä¸Šé¢ä»£ç çš„æ€è·¯ï¼Œåœ¨start_requestsä¸­ï¼Œyield requestæ—¶æºå¸¦åŸå§‹URLï¼Œä»è€Œåˆ©ç”¨dictç»Ÿè®¡è¯¥URLçš„è·³è½¬æ¬¡æ•°ï¼›parseå‡½æ•°æ˜¯æ ¸å¿ƒåŠŸèƒ½ä»£ç ï¼Œç”¨äºå¤„ç†302é‡å®šå‘ï¼Œé€šè¿‡é€’å½’è°ƒç”¨parseå‡½æ•°å¤„ç†é‡å®šå‘åçš„URLã€‚</p>
<p>ä¸Šé¢è¿™ç§ä»£ç æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ç”±äºéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ï¼Œè€Œè‡ªå·±å¯¹ä¸Šé¢ä»£ç çš„æ•´ä¸ªæ‰§è¡Œæµç¨‹ä¸å¤Ÿæ¸…æ¥šï¼Œå› æ­¤æœ€åè¿˜æ˜¯é€‰ç”¨requestsåº“æ¥è§£å†³è¯¥é—®é¢˜ï¼Œå°½ç®¡é€Ÿåº¦ä¸Šä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯è‡ªå·±å¯¹æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæœ‰æ›´æ¸…æ™°çš„æŠŠæ§ã€‚ï¼ˆPSï¼šä¹Ÿæ˜¯ä»è¿™é‡Œæˆ‘æ„è¯†åˆ°å½“æ€§èƒ½ä¸æ˜¯ç¨‹åºçš„ç“¶é¢ˆæ—¶ï¼Œä¸€å®šä¸è¦ç‰ºç‰²ç¨³å®šæ€§æ¥æå‡ç¨‹åºæ€§èƒ½ï¼Œè¿™ç§è¡Œä¸ºå¸¦æ¥çš„ä»£ä»·å¾€å¾€æ˜¯å·¨å¤§çš„ï¼ï¼‰</p>
<p>æ”¹ç”¨requestsæ”¹å†™åï¼Œå†™èµ·æ¥å¾ˆè½»æ¾ï¼Œå› ä¸ºä½¿ç”¨response.historyå°±å¯ä»¥è½»æ¾è·å–é‡å®šå‘æœ€ç»ˆé“¾æ¥ä»¥åŠä¸­é—´é‡å®šå‘æ¬¡æ•°ã€‚å…·ä½“ä»£ç å‚è€ƒ<a href="http://docs.python-requests.org/en/master/user/quickstart/" target="_blank" rel="external">requestså®˜æ–¹æ–‡æ¡£</a>å³å¯ã€‚</p>
<p>ä½†éšååˆæœ‰äº†æ–°éœ€æ±‚ï¼Œå½“ä½¿ç”¨ç§»åŠ¨å®¢æˆ·ç«¯è®¿é—®è¿™äº›é“¾æ¥æ—¶ï¼Œé“¾æ¥å¯èƒ½æœ€ç»ˆè·³è½¬è‡³ä»¥<code>market://</code>å¼€å¤´çš„URLï¼Œè€Œè¿™ç§URLä¼šè¢«requestsè®¤ä¸ºæ˜¯æ— æ•ˆURLè€ŒæŠ¥é”™ï¼Œä¸ºäº†èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¿™ç§æƒ…å†µï¼Œä¹Ÿå³è·å–ä»¥<code>market://</code>å¼€å¤´çš„æœ€ç»ˆURLä»¥åŠä¸­é—´çš„è·³è½¬æ¬¡æ•°ï¼Œå¾ˆæ˜æ˜¾ç®€å•åœ°ä½¿ç”¨response.historyæ— æ³•è¾¾åˆ°ç›®çš„ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœåœ¨è®¿é—®ä¸€ä¸ªURLæ—¶ï¼Œç¦æ­¢é‡å®šå‘ï¼Œç„¶åè‡ªè¡Œå¤„ç†é‡å®šå‘è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ã€‚ä½†æ˜¯åœ¨å®è·µä¸­é‡åˆ°302ä¸­responseçš„Locationå­—æ®µè·³è½¬è‡³æœ¬ç«™æ ¹åŸŸåä¸‹çš„å…¶ä»–é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´Locationå­—æ®µä¿å­˜çš„æ˜¯ä¸€ä¸ªç›¸å¯¹URLï¼Œå› æ­¤è‡ªè¡Œå¤„ç†é‡å®šå‘å°±éœ€è¦é¢å¤–å¤„ç†ç›¸å¯¹URLï¼Œè¿™è®©é‡å®šå‘é—®é¢˜åˆä¸€æ­¥å¤æ‚åŒ–ï¼Œæ•…æ”¾å¼ƒè¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>ä¹‹åæƒ³åˆ°çš„æ–¹æ³•æ˜¯æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œç›¸ä¿¡å®˜æ–¹æ–‡æ¡£åº”è¯¥æœ‰å¯¹é‡å®šå‘é—®é¢˜æ›´åŠ è‡ªå®šä¹‰çš„æ”¯æŒã€‚æœä¸å…¶ç„¶ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£çš„è§’è½é‡Œç¿»é˜…åˆ°requestsä¸­æœ‰<code>resolve_redirects()</code>æ–¹æ³•ï¼Œè™½ç„¶æ–‡æ¡£ä¸­å¯¹è¯¥æ–¹æ³•æ— è¾ƒå¤šä»‹ç»ï¼Œä½†é€šè¿‡Googleå¤§æ³•ä¹Ÿæ˜¯æ‰¾åˆ°äº†ä¸€äº›ä»£ç ç‰‡æ®µï¼Œé€šè¿‡å¯¹ä»£ç è¿›è¡ŒåŠ å·¥æ”¹é€ ï¼Œå¾—åˆ°èƒ½å¤Ÿå®Œç¾è§£å†³æˆ‘çš„éš¾é¢˜çš„ä»¥ä¸‹ä»£ç ç‰ˆæœ¬ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">iter_send</span><span class="params">(self, session, request, **kwargs)</span>:</span></div><div class="line">    <span class="comment"># è¿”å›é‡å®šå‘è¿‡ç¨‹ä¸­ä¸€ç³»åˆ—response</span></div><div class="line">    <span class="comment"># å¦‚æœæœ€ç»ˆç»“æœä¸ºåº”ç”¨å†…è·³è½¬urlï¼Œç±»ä¼¼market://å½¢å¼åˆ™è¿”å›ä¸Šä¸€ä¸ªresponse</span></div><div class="line">    resp = session.send(request, allow_redirects=<span class="keyword">False</span>,</div><div class="line">                        timeout=<span class="number">10</span>, **kwargs)</div><div class="line">    redir_iter = session.resolve_redirects(resp, request, timeout=<span class="number">10</span>)</div><div class="line">    <span class="keyword">while</span> resp.is_redirect:</div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            resp = next(redir_iter)</div><div class="line">            <span class="keyword">yield</span> resp</div><div class="line">        <span class="keyword">except</span> requests.exceptions.InvalidSchema:</div><div class="line">            <span class="keyword">break</span></div><div class="line">    <span class="keyword">yield</span> resp</div></pre></td></tr></table></figure>
<p>è™½ç„¶é—®é¢˜çš„æ•´ä¸ªè§£å†³è¿‡ç¨‹è‡ªå·±æ²¡æœ‰è¿›è¡Œå¤æ‚åœ°ç¼–ç¨‹ï¼Œä½†æ˜¯å¯ä»¥å‘ç°ä»£ç å†™çš„å¤šäº†èƒ½å¤Ÿè®­ç»ƒå‡ºç¨‹åºå‘˜çš„ä¸€ç§ç›´è§‰ï¼Œæ¥ç€å†å»éªŒè¯è‡ªå·±çš„ç›´è§‰å¾€å¾€èƒ½å¤ŸèŠ‚çœå¾ˆå¤šæ—¶é—´ï¼Œå¯è§ç»éªŒçš„é‡è¦æ€§äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘æ¥äº†ä¸€ä¸ªæ´»ï¼Œç»™å®šä¸€äº›é“¾æ¥ï¼Œç»Ÿè®¡æ¯ä¸ªé“¾æ¥çš„è·³è½¬æ¬¡æ•°ä»¥åŠæœ€ç»ˆè·³è½¬è‡³çš„ç½‘å€ã€‚&lt;/p&gt;
&lt;p&gt;åˆšå¼€å§‹æ˜¯ç”¨scrapyå†™çš„ï¼Œé€šè¿‡Googleä¸stack overflowäº†è§£åˆ°ä¸‹é¢è¿™ç§å†™æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python, requests" scheme="http://blog.yinwoods.work/tags/python-requests/"/>
    
  </entry>
  
  <entry>
    <title>BKæ ‘æ•°æ®ç»“æ„å­¦ä¹ </title>
    <link href="http://blog.yinwoods.work/2017/04/09/BK%E6%A0%91%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0/"/>
    <id>http://blog.yinwoods.work/2017/04/09/BKæ ‘æ•°æ®ç»“æ„å­¦ä¹ /</id>
    <published>2017-04-08T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>BKæ ‘æ˜¯ä¸€ç§åŸºäºæ ‘çš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥å¿«é€ŸæŸ¥æ‰¾åŸºäºç¼–è¾‘è·ç¦»çš„ç›¸ä¼¼å­—ç¬¦ä¸²åŒ¹é…ï¼Œæ¯”å¦‚æ‹¼å†™çº é”™æˆ–æ¨¡ç³ŠæŸ¥æ‰¾ã€‚è®¸å¤šè½¯ä»¶ä¸­çš„è‡ªåŠ¨æ‹¼å†™çº é”™å°±æ˜¯åŸºäºè¿™ä¸ªæ•°æ®ç»“æ„æ¥å®ç°çš„ã€‚</p>
<p>BKæ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¯å…¸ä¸­çš„ä¸€ä¸ªå•è¯ï¼Œè€Œæ ‘ä¸­çš„è¾¹æƒé‡åˆ™è¡¨æ˜å¶å­ç»“ç‚¹åˆ°æ ¹èŠ‚ç‚¹ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ã€‚ä¾‹å¦‚ä»èŠ‚ç‚¹uåˆ°èŠ‚ç‚¹vçš„è¾¹ä¸Šæƒé‡ä¸ºwï¼Œé‚£ä¹ˆwå°±æ˜¯æŠŠuè½¬åŒ–ä¸ºvçš„ç¼–è¾‘è·ç¦»ã€‚</p>
<p>ä¾‹å¦‚å¯¹äºè¯å…¸<code>{&quot;help&quot;, &quot;hell&quot;, &quot;hello&quot;}</code>ï¼Œå…¶å¯¹åº”çš„BKæ ‘å¦‚ä¸‹ï¼š</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/2017-04-09-1.png" alt="BKæ ‘"></p>
<p>BKæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸å­èŠ‚ç‚¹çš„ç¼–è¾‘è·ç¦»å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œåœ¨æ’å…¥èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­å¦‚æœç¼–è¾‘è·ç¦»ä¸å½“å‰èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ç›¸åŒï¼Œåˆ™è€ƒè™‘æ’å…¥åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚BKæ ‘æ¯æ¬¡æ’å…¥å‡ä»æ ¹ç»“ç‚¹å¼€å§‹ï¼Œæ ¹èŠ‚ç‚¹å¯ä»¥æ˜¯è¯å…¸ä¸­çš„ä»»æ„ä¸€ä¸ªå•è¯ã€‚</p>
<p>ä¾‹å¦‚å‘ä¸Šè¿°è¯å…¸æ’å…¥æ–°å•è¯<code>shell</code>æ—¶æ’å…¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¯”è¾ƒshellä¸æ ¹èŠ‚ç‚¹helpçš„ç¼–è¾‘è·ç¦»ï¼Œå¾—åˆ°2</li>
<li>å‘ç°æ ¹èŠ‚ç‚¹å·²ç»å­˜åœ¨ç¼–è¾‘è·ç¦»ä¸º2çš„å­èŠ‚ç‚¹helloï¼Œå› æ­¤å°è¯•å°†shellæ’å…¥åˆ°å­èŠ‚ç‚¹helloä¸Š</li>
<li>æ¯”è¾ƒshellä¸helloçš„ç¼–è¾‘è·ç¦»ï¼Œå› ä¸ºhelloæ²¡æœ‰ç¼–è¾‘è·ç¦»ä¸º2çš„å­èŠ‚ç‚¹ï¼Œå› æ­¤æ’å…¥</li>
</ul>
<p>å¾—åˆ°ä¸‹å›¾ï¼š<br><img src="http://7xlnl2.com1.z0.glb.clouddn.com/2017-04-09-2.png" alt="æ–°çš„BKæ ‘"></p>
<p>å¯¹äºä¸€ä¸ªç»™å®šçš„TOLï¼ˆtolerance valueï¼‰ä½œä¸ºç¼–è¾‘è·ç¦»çš„ä¸Šé™ï¼Œæˆ‘ä»¬ä½¿ç”¨BKæ ‘æ¥æŸ¥æ‰¾ä¸ç»™å®šèŠ‚ç‚¹Nç¼–è¾‘è·ç¦»å°äºç­‰äºTOLçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>è®¡ç®—ç»™å®šèŠ‚ç‚¹Nä¸æ ¹èŠ‚ç‚¹çš„ç¼–è¾‘è·ç¦»Dï¼Œæ¥ç€ç»§ç»­æœç´¢ä¸æ ¹èŠ‚ç‚¹ç¼–è¾‘è·ç¦»åœ¨[D - TOL, D + TOL]ä¹‹é—´çš„å­èŠ‚ç‚¹ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹çŸ¥é“æ‰¾åˆ°æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LEN 10</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">    <span class="built_in">string</span> word;</div><div class="line">    <span class="comment">// next[i]ä¸­ä¿å­˜çš„å€¼ä¸ºä¸wordç¼–è¾‘è·ç¦»ä¸ºiçš„è¯åœ¨treeä¸­çš„ä¸‹æ ‡</span></div><div class="line">    <span class="keyword">int</span> next[<span class="number">2</span> * LEN];</div><div class="line"></div><div class="line">    Node(<span class="built_in">string</span> x): word(x) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">2</span>*LEN; ++i) &#123;</div><div class="line">            next[i] = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Node():word() &#123;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">Node RT;</div><div class="line"><span class="keyword">int</span> dp[<span class="number">2</span> * LEN][<span class="number">2</span> * LEN];</div><div class="line">Node tree[MAXN];</div><div class="line"></div><div class="line"><span class="keyword">int</span> ptr = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> min(min(a, b), c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">editDistance</span><span class="params">(<span class="built_in">string</span> &amp;a, <span class="built_in">string</span> &amp;b)</span> </span>&#123;</div><div class="line">    <span class="comment">// åŠ¨æ€è§„åˆ’è·å–æœ€çŸ­ç¼–è¾‘è·ç¦»</span></div><div class="line">    <span class="keyword">int</span> a_len = a.length();</div><div class="line">    <span class="keyword">int</span> b_len = b.length();</div><div class="line"></div><div class="line">    <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=a_len; ++i)</div><div class="line">        dp[i][<span class="number">0</span>] = i;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=b_len; ++j)</div><div class="line">        dp[<span class="number">0</span>][j] = j;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=a_len; ++i) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=b_len; ++j) &#123;</div><div class="line">            <span class="keyword">if</span>(a[i<span class="number">-1</span>] != b[j<span class="number">-1</span>]) &#123;</div><div class="line">                dp[i][j] = min(<span class="number">1</span> + dp[i<span class="number">-1</span>][j],      <span class="comment">// deletion</span></div><div class="line">                               <span class="number">1</span> + dp[i][j<span class="number">-1</span>],      <span class="comment">// insertion</span></div><div class="line">                               <span class="number">1</span> + dp[i<span class="number">-1</span>][j<span class="number">-1</span>]);   <span class="comment">// replacement</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> dp[a_len][b_len];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Node &amp;root, Node &amp;cur)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(root.word.length() == <span class="number">0</span>) &#123;</div><div class="line">        root = cur;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> distance = editDistance(cur.word, root.word);</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(tree[root.next[distance]].word.length() == <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">// è‹¥ä¸rootç¼–è¾‘è·ç¦»ä¸ºdistanceçš„ä½ç½®æ²¡æœ‰èŠ‚ç‚¹ï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹æ ‡è®°ä¸ºå¶å­ç»“ç‚¹</span></div><div class="line">        ++ptr;</div><div class="line">        tree[ptr] = cur;</div><div class="line">        root.next[distance] = ptr;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        add(tree[root.next[distance]], cur);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; getSimilarWords(Node &amp;root, <span class="built_in">string</span> &amp;s, <span class="keyword">int</span> TOL) &#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(root.word == <span class="string">""</span>)</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> distance = editDistance(root.word, s);</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(distance &lt;= TOL)</div><div class="line">        ret.push_back(root.word);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> start = distance - TOL;</div><div class="line">    <span class="keyword">if</span>(start &lt; <span class="number">0</span>)</div><div class="line">        start = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(start &lt; distance + TOL) &#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; tmp = getSimilarWords(tree[root.next[start]], s, TOL);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : tmp) &#123;</div><div class="line">            ret.push_back(i);</div><div class="line">        &#125;</div><div class="line">        ++start;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> dictionary[] = &#123;<span class="string">"hello"</span>, <span class="string">"help"</span>, <span class="string">"shel"</span>, <span class="string">"smell"</span>, <span class="string">"fell"</span>,</div><div class="line">                           <span class="string">"felt"</span>, <span class="string">"oops"</span>, <span class="string">"pop"</span>, <span class="string">"oouch"</span>, <span class="string">"halt"</span>&#125;;</div><div class="line"></div><div class="line">    ptr = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> sz = <span class="keyword">sizeof</span>(dictionary) / <span class="keyword">sizeof</span>(<span class="built_in">string</span>);</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;sz; ++i) &#123;</div><div class="line">        Node temp = Node(dictionary[i]);</div><div class="line">        add(RT, temp);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">string</span> w1 = <span class="string">"ops"</span>;</div><div class="line">    <span class="built_in">string</span> w2 = <span class="string">"helt"</span>;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; match = getSimilarWords(RT, w1, <span class="number">2</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"similar words in dictionary for: "</span> &lt;&lt; w1 &lt;&lt; <span class="string">":"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : match) &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"- "</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    match = getSimilarWords(RT, w2, <span class="number">2</span>);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"similar words in dictionary for: "</span> &lt;&lt; w2 &lt;&lt; <span class="string">":"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x : match) &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"* "</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>BKæ ‘çš„åº”ç”¨ï¼š</p>
<p>ä¸€èˆ¬æåˆ°BKæ ‘ï¼Œäº†è§£è¿™ä¸ªæ•°æ®ç»“æ„çš„äººéƒ½ä¼šæƒ³åˆ°å•è¯çº é”™ã€‚è€Œæœ€è¿‘çœ‹åˆ°ä¸€éåšæ–‡è®²è¿°äº†å¦‚ä½•ä½¿ç”¨BKæ ‘å®ç°æµ·é‡å›¾ç‰‡çš„å»é‡ï¼ˆæ‰¾åˆ°ä¸ç»™å®šå›¾ç‰‡ç¼–è¾‘è·ç¦»åœ¨ä¸Šé™èŒƒå›´å†…çš„æ‰€æœ‰å›¾ç‰‡å¹¶åˆ é™¤ï¼‰ï¼Œå…¶å®ä»”ç»†æƒ³ä¸€æƒ³å¯¹BKæ ‘åº”ç”¨çš„æ­£ç¡®ç†è§£åº”è¯¥æ˜¯åŸºäºç›¸ä¼¼åº¦æœç´¢ç»“æœï¼Œè€Œä¸åº”è¯¥ç®€å•ç²—æš´åœ°ç†è§£ä¸ºå•è¯çº é”™ï¼ˆå…¶å®ä¹Ÿæ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼‰è¿™ç§å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œè¿™æ ·çš„è®¤çŸ¥æœ‰æ—¶å€™å¯èƒ½ä¼šé™åˆ¶æˆ‘ä»¬åœ¨å®é™…åœºæ™¯ä¸­å¯¹è„‘æµ·ä¸­çŸ¥è¯†çš„å˜ç°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;BKæ ‘æ˜¯ä¸€ç§åŸºäºæ ‘çš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥å¿«é€ŸæŸ¥æ‰¾åŸºäºç¼–è¾‘è·ç¦»çš„ç›¸ä¼¼å­—ç¬¦ä¸²åŒ¹é…ï¼Œæ¯”å¦‚æ‹¼å†™çº é”™æˆ–æ¨¡ç³ŠæŸ¥æ‰¾ã€‚è®¸å¤šè½¯ä»¶ä¸­çš„è‡ªåŠ¨æ‹¼å†™çº é”™å°±æ˜¯åŸºäºè¿™ä¸ªæ•°æ®ç»“æ„æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;BKæ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¯å…¸ä¸­çš„ä¸€ä¸ªå•è¯ï¼Œè€Œæ ‘ä¸­çš„è¾¹æƒé‡åˆ™è¡¨æ˜å¶å­ç»“ç‚¹åˆ°æ ¹èŠ‚ç‚¹ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ã€‚ä¾‹å¦‚ä»èŠ‚ç‚¹uåˆ°
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="data structure" scheme="http://blog.yinwoods.work/tags/data-structure/"/>
    
  </entry>
  
  <entry>
    <title>2016å¹´å¹´ç»ˆæ€»ç»“</title>
    <link href="http://blog.yinwoods.work/2016/12/30/2016%E5%B9%B4%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    <id>http://blog.yinwoods.work/2016/12/30/2016å¹´å¹´ç»ˆæ€»ç»“/</id>
    <published>2016-12-29T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥ä¸è§‰2016å°±è¦ç»“æŸäº†,ä¹Ÿåˆ°äº†äº¤ä¸Šè‡ªå·±2016å¹´ç­”å·çš„æ—¶å€™äº†ã€‚æ¬²æ‰¬å…ˆæŠ‘çš„2016å¹´å¹´ç»ˆæ€»ç»“ï¼Œå…ˆä»åæ¶ˆæ¯å¼€å§‹å§ã€‚</p>
<h3 id="2016å¹´é—æ†¾çš„"><a href="#2016å¹´é—æ†¾çš„" class="headerlink" title="2016å¹´é—æ†¾çš„"></a>2016å¹´é—æ†¾çš„</h3><p>å…¶å®ä»è‡ªå·±å†…å¿ƒæ·±å¤„æ¥è¯´ï¼Œæ²¡æœ‰è§‰å¾—2016å¹´æœ‰ä»€ä¹ˆé—æ†¾ï¼Œä½†ä½œä¸ºå¹´ç»ˆæ€»ç»“å¦‚æœä¸€ç‚¹é—æ†¾éƒ½æ²¡æœ‰ä¹Ÿç¡®å®è¯´ä¸è¿‡å»:)ã€‚</p>
<p>æœ€å¤§çš„é—æ†¾æ˜¯ç­”åº”è‡ªå·±å»æ—¥æœ¬æ—…è¡Œçš„æ‰¿è¯ºæ²¡æœ‰åšåˆ°å§ï¼ŒåŸå› æ˜¯ç­¾è¯å¤ªéš¾åŠäº†ï¼Œå°¤å…¶å¯¹æˆ‘æ¥è¯´ã€‚ã€‚ã€‚æ‰€ä»¥æš‘å‡çš„æ¯•ä¸šæ—…è¡Œé€‰æ‹©äº†æ¢…å¼€ä¸¤åº¦â€”â€”äº‘å—ï¼Œä¹Ÿè¿˜ç®—ç©çš„å¼€å¿ƒå§ï¼Œä¸è¿‡å› ä¸ºæ˜¯ç¬¬äºŒæ¬¡å»ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæˆäº†åŸºå‹å›¢çš„å¯¼æ¸¸ï¼ŒçœŸçœŸæ˜¯ç—›å¹¶å¿«ä¹ç€ã€‚</p>
<h3 id="2016å¹´å¤±å»çš„"><a href="#2016å¹´å¤±å»çš„" class="headerlink" title="2016å¹´å¤±å»çš„"></a>2016å¹´å¤±å»çš„</h3><p>2016å¹´å¤±å»äº†ä¸€äº›åšæŒäº†å¾ˆä¹…çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªäººæŒç»­äº†å‡ å¹´çš„å–œæ¬¢ï¼Œå½“ç„¶æˆ‘æ‰¿è®¤è¿™ç§å–œæ¬¢æœ¬èº«å°±æ˜¯ä¸ç†æ™ºã€ç•¸å½¢çš„ï¼Œä¸è¿‡å®ƒä¹Ÿæ˜¯å€¾å…¥å¿ƒè¡€ã€ä¸æ±‚å›æŠ¥çš„ã€‚anywayï¼Œè·¯è¿‡äº†ï¼Œå¤±å»äº†ï¼Œæ²¡ä»€ä¹ˆå¯é—æ†¾çš„ã€‚</p>
<h3 id="2016å¹´å˜æœ¬åŠ å‰çš„"><a href="#2016å¹´å˜æœ¬åŠ å‰çš„" class="headerlink" title="2016å¹´å˜æœ¬åŠ å‰çš„"></a>2016å¹´å˜æœ¬åŠ å‰çš„</h3><p>2016å¹´çš„è‡ªå·±äººæƒ…å‘³å¥½åƒåˆè·Œäº†ã€‚ã€‚ã€‚ä»¥å‰å¤§æ¦‚æœ‰ä¸ª50%ï¼Ÿç°åœ¨å¯èƒ½åªå‰©ä¸‹20-30%äº†ï¼Ÿç»†æ€ææï¼Œåæ€è¿™ä¸€å¹´ä¸­çš„è‡ªå·±ç¡®å®å¦‚æœ‹å‹æ‰€è¯´ç»å¸¸æ‘†ä¸ªè‡­è„¸ï¼Œä¸€è„¸é«˜å†·ï¼ˆéè¤’ä¹‰ï¼‰ã€‚è™½ç„¶å’Œæœ‹å‹åœ¨ä¸€èµ·æ—¶è¿˜å¯ä»¥åšåˆ°æ¬¢å£°ç¬‘è¯­ï¼Œä½†å¤§å¤šæ—¶å€™çœŸçš„æ˜¯ç»·ç€è‡­è„¸ä¸€è¨€ä¸å‘å•Šï¼Œä¹Ÿè®¸è¿™ä¹Ÿæ˜¯æˆ‘ç ”ç©¶ç”Ÿå…¥å­¦åˆ°ç°åœ¨æ–°è®¤è¯†å¥³ç”Ÿä¸ªæ•°ä¸º0çš„åŸå› ï¼Ÿå“ˆå“ˆå“ˆã€‚ä¸è¿‡è¯è¯´å›æ¥ï¼Œä½œä¸ºä¸€ä¸ª20å¤šå²ç¤¾ä¼šäººå‘˜é¢„å¤‡å½¹ç ”ç©¶ç”Ÿï¼Œè¿™äº›ç¼ºç‚¹è‡ªå·±ä¸€ç›´æ˜¯å¿ƒé‡Œæœ‰æ•°çš„ï¼Œä¹‹æ‰€ä»¥æ²¡æœ‰æ”¹ä¸æ˜¯å› ä¸ºè‡ªå·±æ— èƒ½ä¸ºåŠ›ï¼Œè€Œæ˜¯æˆ‘éœ€è¦ã€‚ä¸‰ç‚¹åŸå› å§:</p>
<ul>
<li><p>å®éªŒå®¤çš„æ°›å›´æ€»æ˜¯é€éœ²ç€è¿·ä¹‹å°´å°¬çš„æ°”æ¯ï¼ˆéå¸¸é€‚åˆç°é˜¶æ®µçš„æˆ‘ï¼‰ï¼Œç¡®å®ä¸é€‚åˆæ•´å¤©å˜»å˜»å“ˆå“ˆã€æ²¡å¿ƒæ²¡è‚ºçš„ç”Ÿæ´»ï¼›</p>
</li>
<li><p>å‡ºäºå±è”½å¤–ç•Œå¹²æ‰°ï¼Œä¸“å¿ƒåšäº‹çš„è€ƒè™‘å§ï¼Œæ¯•ç«Ÿç²¾åŠ›æœ‰é™ï¼Œè€Œä¸”è‡ªå·±æƒ³è¦åšçš„äº‹éœ€è¦å€¾å…¥ç»å¤§éƒ¨åˆ†ç²¾åŠ›ï¼›</p>
</li>
<li><p>è‡ªå·±ä¸€ç›´ä»¥æ¥æœ‰ä¸ªè‡­æ¯›ç—…ï¼šå¤ªå¤§å˜´å·´å•¦ã€‚ã€‚ã€‚æ‰€ä»¥ä¸‡è¨€ä¸‡å½“ï¼Œä¸å¦‚ä¸€é»˜ï¼›</p>
</li>
</ul>
<h3 id="2016å¹´æ”¹æ­£çš„"><a href="#2016å¹´æ”¹æ­£çš„" class="headerlink" title="2016å¹´æ”¹æ­£çš„"></a>2016å¹´æ”¹æ­£çš„</h3><p>é¦–æ¨å¤§å˜´å·´ã€‚ã€‚ã€‚æ€ä¹ˆä»¥å‰è‡ªå·±æƒ³è¯´çš„è¯å°±é‚£ä¹ˆå¤šå‘¢ï¼Œè€Œä¸”å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯å‡ºäºå¤¸è€€è‡ªå·±æŠ€æœ¯ä¸Šçš„ä¸€äº›å¾®ä¸è¶³é“çš„å°æˆå°±ã€‚æ‰€å¹¸åœ¨2016å¹´çš„å°å°¾å·´ä»æ‰‹ä¸­æµé€ä¹‹é™…æ”¹æ‰äº†ï¼Œå…¶å®2015å¹´è‡ªå·±ç¤¾äº¤åœˆå­åŸºæœ¬å…¨éƒ¨å™¤å£°ï¼Œæ€ä¹ˆ2016å¹´å°±åƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œä¸€ç›´BBå¨BBå¨ã€‚ã€‚ã€‚å½“ç„¶ä¹‹æ‰€ä»¥æ”¹æ‰äº†è¿™ä¸ªç¼ºç‚¹å€’ä¸åªæ˜¯è¯´åœ¨ç¤¾äº¤åœˆå­å†…å‘å£°å˜å°‘ï¼Œè€Œæ˜¯æºäºå¯¹è‡ªå·±å†…å¿ƒæ·±å¤„çš„å®¡è§†ï¼Œæœªæ¥è‡ªå·±è§‰å¾—å¥½çš„ä¸œè¥¿å¯èƒ½è¿˜æ˜¯ä¼šåˆ†äº«ï¼Œå¯æ˜¯ä¸å†å¸Œæœ›å…¨ä¸–ç•Œéƒ½çŸ¥é“äº†ï¼Œæ¯•ç«Ÿç”Ÿæ´»æ˜¯è‡ªå·±çš„ã€‚</p>
<h3 id="2016å¹´æ”¶è·çš„"><a href="#2016å¹´æ”¶è·çš„" class="headerlink" title="2016å¹´æ”¶è·çš„"></a>2016å¹´æ”¶è·çš„</h3><p>è¯´äº†ä¸€å †ï¼Œç»ˆäºè¦è¿ˆå…¥åšå®¢æ­£é¢˜äº†ï¼Œå…¶å®2016å¹´å½’æ ¹åˆ°åº•ï¼Œè‡ªå·±çš„æ”¶è·è¿œè¿œå¤§äºæ”¶å…¥çš„ï¼Œä¹Ÿä¸å±€é™äºæŠ€æœ¯æ–¹é¢ï¼Œè€Œæ˜¯æ¶µç›–ç”Ÿæ´»çš„å„ä¸ªæ–¹é¢ï¼Œä¸‹é¢å¨“å¨“é“æ¥ï¼Œä¹Ÿç®—æ˜¯å¯¹è‡ªå·±2016å¹´çš„æ”¶è·åšä¸€ä¸ªæ¢³ç†å§ã€‚</p>
<h4 id="æŠ€æœ¯ä¸Šæ”¶è·çš„"><a href="#æŠ€æœ¯ä¸Šæ”¶è·çš„" class="headerlink" title="æŠ€æœ¯ä¸Šæ”¶è·çš„"></a>æŠ€æœ¯ä¸Šæ”¶è·çš„</h4><p>ä½œä¸ºä¸€ä¸ªç¨‹åºçŒ¿ï¼Œè¦æ˜¯å¹´åº¦æ€»ç»“ä¸æ¯«ä¸ææŠ€æœ¯ï¼Œé‚£è¿™ä¸€å¹´å¾—æ˜¯è¿‡å¾—å¤šå¤±è´¥å•Š:Pã€‚2016å¹´å¯ä»¥ç®—æ˜¯è‡ªå·±æ­£å¼è¿ˆå…¥è®¡ç®—æœºæŠ€æœ¯å¤§é—¨é—¨æ§›çš„ä¸€å¹´å§ï¼ˆç°åœ¨ç¡®å®æ˜¯è¿™ä¹ˆè§‰å¾—ï¼Œä¸çŸ¥é“ä»¥åä¼šä¸ä¼šæ‰“è„¸ï¼Œä¸è¿‡æˆé•¿ä¸å°±æ˜¯ä¸æ–­æ‰“è„¸çš„è¿‡ç¨‹å—ï¼‰ï¼Œè¿™ä¸€å¹´å¯ä»¥æ¸…æ¥šåœ°å¯Ÿè§‰åˆ°è‡ªå·±çªç ´äº†é•¿æœŸä»¥æ¥çš„æŠ€æœ¯ç“¶é¢ˆï¼Œæœ¬ç§‘å››å¹´è‡ªå·±å¾ˆåŠªåŠ›ï¼Œå¯æ˜¯è‹¦äºæ²¡æœ‰ä¸€ä¸ªå¯ä¾›æ·±è€•çš„æ–¹å‘ï¼Œå­¦äº†ä¸€å¤§å †ä¸œè¥¿ï¼Œåˆ°å¤´æ¥å‘ç°èƒ½è®°ä½ã€åœ¨ç”Ÿæ´»ä¸­èƒ½è¿ç”¨åˆ°çš„çš„å´å¯¥å¯¥æ— å‡ ã€‚ä¸è¿‡ä¹Ÿæ­£æ˜¯å› ä¸ºä»¥å‰è‡ªå·±å­¦çš„å¤ªæ‚ï¼Œæ‰€ä»¥æœ‰äº†ä»Šå¤©çš„é‡å˜åˆ°è´¨å˜è½¬åŒ–çš„è¿‡ç¨‹ã€‚å¼•å‘è´¨å˜çš„åŸå› æ€»ç»“ä¸‹æ¥æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å§ï¼š</p>
<ul>
<li><p>å®ä¹ å‘†çš„å…¬å¸æ˜¯åˆåˆ›å…¬å¸ï¼Œä»€ä¹ˆåŸºç¡€è®¾æ–½éƒ½æœ‰è‡ªå·±æ­å»ºï¼Œæ‰€ä»¥å¾—åˆ°äº†æå¤§çš„é”»ç‚¼ï¼Œå¤–åŠ é¢†å¯¼ç›¸å½“æœ‰èŠ‚å¥çš„pushï¼Œæ‰€ä»¥æˆé•¿é€Ÿåº¦è¿œå¿«äºåœ¨å­¦æ ¡çš„æ—¥å­ï¼›</p>
</li>
<li><p>è¿›å…¥äº†ä¸€ä¸ªæ›´é«˜çš„å¹³å°ï¼Œæ¥è§¦çš„äººã€æŠ€æœ¯ä¹Ÿå¤„äºä¸€ä¸ªæ›´é«˜çš„å±‚æ¬¡ï¼Œå› æ­¤èƒ½å¤Ÿåœ¨å®é™…ç”Ÿæ´»ä¸­ä»èº«è¾¹çš„æœ‹å‹ã€åŒäº‹èº«ä¸Šå­¦ä¹ å¾ˆå¤šï¼›</p>
</li>
<li><p>åœ¨å®ä¹ è¿‡ç¨‹ä¸­å¯¹ä¸€ä¸ªç¨‹åºçŒ¿çš„æˆé•¿æ›²çº¿æœ‰äº†ä¸€ä¸ªå¤§è‡´çš„è®¤çŸ¥ï¼Œæ‰€ä»¥å¯¹è‡ªå·±çš„å‘å±•è·¯çº¿ä¹Ÿæœ‰äº†ä¸€ä¸ªå¤§è‡´è§„åˆ’ï¼›</p>
</li>
<li><p>åº¦è¿‡äº†2015å¹´çš„èˆ’é€‚åŒºï¼Œè¿›å…¥äº†ä¸€ä¸ªå¿™ç¢Œçš„é˜¶æ®µï¼Œè¿™ç§çªå˜çš„ç¯å¢ƒå¾€å¾€ä¹Ÿä¼šå¯¼è‡´ä¸€ä¸ªäººçš„çªå˜ï¼ˆfor me, technologicallyï¼‰ï¼›</p>
</li>
<li><p>è‡ªå·±æš‘å‡æœŸé—´å¼€å§‹é˜…è¯»è‹±æ–‡æŠ€æœ¯ä¹¦ç±å¹¶ <strong>è¯»å®Œ</strong> ï¼Œæ”¾ä½›æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨å•Šã€‚ã€‚ã€‚å¦‚æœæ˜¯ä¸­æ–‡æŠ€æœ¯èµ„æ–™æ˜¯V0.1çš„è¯ï¼Œè‹±æ–‡èµ„æ–™å®Œå…¨æ˜¯V2.0å•Šï¼ï¼çœŸçš„å¼ºçƒˆæ¨èåšæŠ€æœ¯çš„æœ‹å‹å¥½å¥½å­¦è‹±è¯­ï¼Œ å®ƒè¿œæ¯”ä½ æƒ³è±¡ä¸­æœ‰ç”¨åœ°å¤šå¾—å¤šï¼›</p>
</li>
</ul>
<p>ä¹‹æ‰€ä»¥è¯´è¿™ä¸€å¹´è‡ªå·±çš„æŠ€æœ¯ä¸Šäº§ç”Ÿäº†è´¨å˜ï¼ŒåŸå› æ˜¯ç°åœ¨çš„è‡ªå·±æ„Ÿè§‰å­¦ä»€ä¹ˆä¸œè¥¿éƒ½ç›¸å½“å¿«ï¼ˆå¯¹æ¯”ä»¥å‰çš„è‡ªå·±æ¥è¯´ï¼‰ã€‚ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<ul>
<li><p>ç°åœ¨å¯ä»¥ä¸å®¢æ°”åœ°è¯´è‡ªå·±ç†Ÿç»ƒæŒæ¡äº†pythonï¼ŒåŸå› ä¸ä»…ä»…æ˜¯å†™äº†å‡ ä¸‡è¡Œpythonä»£ç é‚£ä¹ˆç®€å•ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­å¯æ˜¯æŸ¥é˜…äº†æ•°é‡ç›¸å½“åºå¤§çš„pythonè‹±æ–‡èµ„æ–™å•Šï¼›</p>
</li>
<li><p>åå‡ å¤©è¿‡äº†ä¸€éã€ŠLinux Command Guideã€‹ï¼Œå†åŠ ä¸Šå®ä¹ è¿‡ç¨‹ä¸­ç»å¸¸äº²çœ¼ç›®ç¹bossä½¿ç”¨linuxçš„èŠ±å¼ç»„åˆå‘½ä»¤ï¼Œè‡ªå·±ç°åœ¨å¯¹linuxä¹Ÿèƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨äº†ï¼Œç†Ÿæ‚‰åæ„ˆå‘è§‰å¾—linuxæ˜¯æ•ˆç‡ç¥å™¨ï¼Œä½¿ç”¨èµ·æ¥æ¸¸åˆƒæœ‰ä½™ã€‚</p>
</li>
<li><p>å‡ å¤©è¿‡äº†ä¸€éã€ŠLearn the vi and vim Editorsã€‹ï¼Œå¯¹vimçš„ä½¿ç”¨ä»¥åŠlinux shellçš„ä½¿ç”¨è‡ªå®šä¹‰é…ç½®éƒ½æœ‰äº†ä¸€å®šçš„äº†è§£ï¼ŒåŒæ•ˆç‡ç¥å™¨ã€‚ã€‚ã€‚ä¸ºä»€ä¹ˆè‡ªå·±ç°åœ¨æ‰æ·±å…¥å­¦ä¹ å•Šå•Šå•Šå•Š</p>
</li>
<li><p>å®ä¹ è¿‡ç¨‹ä¸­å®Œå…¨æ˜¯sshè¿œç¨‹æ“ä½œï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®ç›¸å…³æ“ä½œç¼–å†™mapreduceä»»åŠ¡ã€éƒ¨ç½²å®šæ—¶ä»»åŠ¡ã€æ­å»ºdockerå¼€å‘ç¯å¢ƒä»¥åŠpython tornadoåå°å¼€å‘ç­‰ç­‰ã€‚ã€‚ã€‚</p>
</li>
</ul>
<p>æ€»ä¹‹ï¼Œåœ¨16å¹´å¹´åº•å›é¦–è¿™ä¸€å¹´ï¼Œæˆ‘å¯¹è‡ªå·±çš„æŠ€æœ¯æˆé•¿æ˜¯ç›¸å½“æ»¡æ„çš„ï¼ŒåŒæ—¶ä¹Ÿå¯¹2017å¹´çš„è‡ªå·±ä¹ƒè‡³æœªæ¥çš„è‡ªå·±æœ‰äº†æ›´å¤šä¿¡å¿ƒã€‚</p>
<h4 id="å¿ƒçµä¸Šæ”¶è·çš„"><a href="#å¿ƒçµä¸Šæ”¶è·çš„" class="headerlink" title="å¿ƒçµä¸Šæ”¶è·çš„"></a>å¿ƒçµä¸Šæ”¶è·çš„</h4><p>16å¹´çœŸçš„æ˜¯è‡ªå·±äººç”Ÿè¿ˆå‘æ–°é˜¶æ®µçš„å…ƒå¹´ï¼Œæƒ³æƒ³15å¹´çš„è‡ªå·±é¢“åœ°å°±å·®è‡ªæš´è‡ªå¼ƒäº†ã€‚ã€‚ã€‚ç°åœ¨åˆ™å¯¹è‡ªå·±æœ‰ç€è¶³å¤Ÿçš„ä¿¡å¿ƒï¼Œè¿™äº›ä¿¡å¿ƒæºäºå¯¹è‡ªå·±çš„è®¤çŸ¥ï¼Œè®¤æ¸…äº†è‡ªå·±æ˜¯æ€æ ·çš„ï¼Œèº«è¾¹äººæ˜¯æ€æ ·çš„ï¼Œè¿™ä¸ªç¤¾ä¼šåˆæ˜¯æ€æ ·çš„ï¼Œä»˜å‡ºäº†é‚£ä¹ˆå¤šï¼Œæœ‰ä»€ä¹ˆç†ç”±ä¸è‡ªä¿¡å‘¢ï¼Ÿæˆ‘æƒ³ä¸€ä¸ªäººçš„æˆé•¿è¿‡ç¨‹å°±æ˜¯è¿™æ ·å§ï¼Œæ­¤èµ·å½¼ä¼ã€ä¸Šä¸Šä¸‹ä¸‹ï¼Œå¯æ˜¯éšç€æ—¶é—´çš„æµé€ï¼Œæˆ‘ä»¬å¯¹è‡ªå·±çš„è®¤çŸ¥ç»ˆä¼šè¶‹å‘äºä¸€ä¸ªç†æ€§çš„åŒºé—´ï¼Œè¯´ç€è¯´ç€åˆæœ‰äº›æœŸå¾…ä¸‹æ¬¡é¢“åºŸçš„è‡ªå·±äº†ï¼Œè¦å†é‡åˆ°ä»€ä¹ˆæ ·çš„å¤§ç‰›ï¼Œæ‰¿å—ä»€ä¹ˆæ ·çš„åŠæ‰“å‘¢ï¼Ÿ</p>
<p>è‡ªå·±å¦ä¸€ä¸ªå˜åŒ–å°±æ˜¯èƒ½å¤Ÿæ›´æ¸…æ™°åœ°å®¡è§†è‡ªå·±çš„æœªæ¥äº†å§ï¼ŒæåŠæ¢¦æƒ³ï¼Œè‡ªå·±å°±å……æ»¡äº†æ–—å¿—ã€‚ã€‚ã€‚å¹²åŠ²åè¶³ï¼Œæ‰“é¸¡è¡€çŠ¶æ€ã€‚è¿™ç§çŠ¶æ€å§ï¼Œå°±å¥½æ¯”æœ‰äº›æ·˜æ°”çš„å°å­©å­æƒ³è¦åƒç³–ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆä¸ç»™ï¼Œé‚£ä»–å“­å“‘äº†å—“å­ä¹Ÿè¦åƒåˆ°é‚£å—ç³–ï¼Œæˆ‘ç°åœ¨å°±æ˜¯è¿™æ ·ã€‚ã€‚ã€‚æœ‰äº›äº‹æ˜¯çœŸçš„æ— è®ºå¦‚ä½•ä¹Ÿè¦åšåˆ°ï¼Œè¿™ä¹ˆè¯´å¯èƒ½ä¸å¤ªåˆé€‚ï¼Œæ˜¯æœ‰äº›äº‹æ— è®ºå¦‚ä½•ä¹Ÿè¦å°½åŠ›åšåˆ°å§ã€‚å“ªæ€•è¿™æ¡è·¯è¦ä¸€ä¸ªäººèµ°ï¼Œè¦ç‰ºç‰²å¾ˆå¤šã€‚ä½†å¿ƒç”˜æƒ…æ„¿ï¼Œåªæœ‰è¿™æ ·è‡ªå·±æ‰ä¼šæ„Ÿåˆ°å¼€å¿ƒã€‚</p>
<p>æœ€åä¸€ç‚¹å°±æ˜¯è‡ªå·±ä¸€ç›´ä»¥æ¥æƒ³åšçš„ä¸€ä¸ªæ”¹å˜äº†ï¼Œä¹Ÿæ˜¯æˆ‘è®¤ä¸ºè‡ªå·±ä»¥å‰æœ€ç¼ºçš„ä¸€ç‚¹å§ï¼šé—·å£°å‘å¤§è´¢ï¼Œè¿™æ ·æ‰æ˜¯æœ€å¥½çš„ï¼Œå“ˆå“ˆå“ˆã€‚2017å¹´è¦ä½è°ƒåœ°åˆ’è¿‡å»ï½</p>
<h3 id="å†™è¿‡çš„ä»£ç "><a href="#å†™è¿‡çš„ä»£ç " class="headerlink" title="å†™è¿‡çš„ä»£ç "></a>å†™è¿‡çš„ä»£ç </h3><p>ä»Šå¹´githubæäº¤ä¸»è¦è¿˜æ˜¯è‡ªå·±çš„åšå®¢ï¼Œå¿æ„§ã€‚ã€‚ã€‚</p>
<p>å¦å¤–ä¹æœˆä»½è‡ªå·±å†™äº†ä¸ªé’ˆå¯¹åŒ—èˆªåƒåœ¾ç³»ç»Ÿçš„çˆ¬è™«çˆ¬å–ä¸ªäººè¯¾è¡¨ã€‚</p>
<p>æ˜å¹´å†æ¥å†å‰~</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post59-github.jpg" alt="Github"></p>
<h4 id="è¯»è¿‡çš„ä¹¦"><a href="#è¯»è¿‡çš„ä¹¦" class="headerlink" title="è¯»è¿‡çš„ä¹¦"></a>è¯»è¿‡çš„ä¹¦</h4><p>ç°åœ¨çš„ç¤¾äº¤åª’ä½“ä¸Šå¥½åƒæ€»æ˜¯å€¾å‘äºæŠŠè¯»ä¹¦å®£æ‰¬ä¸ºä¸€ä»¶å¾ˆä¼˜é›…ã€é«˜ç«¯çš„è¡Œä¸ºã€‚æ— è§£ã€‚åœ¨æˆ‘çœ¼é‡Œå®ƒå’Œçœ‹ç”µå½±æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå†µä¸”å¾ˆå¤šäººè¯»å†å¤šçš„ä¹¦è„‘å­é‡Œçš„æ€æƒ³ä¹Ÿæ˜¯è‡­ä¸å¯é—»ã€‚è¯»è¿‡çš„ä¹¦ç›®ã€èµ°è¿‡çš„è·¯é€”ï¼Œæ•æˆ‘ç›´è¨€ï¼Œå’Œä¸€ä¸ªäººçš„ä¸‰è§‚ä¿®å…»ä¸è§å¾—æ˜¯ä¸€ä¸ªæ­£æ¯”ä¾‹å‡½æ•°ï¼Œé‡è¦çš„æ˜¯è¿™äº›è¿‡ç¨‹ä¸­è‡ªå·±çš„æ€è€ƒå§ã€‚æ‰€ä»¥èº«è¾¹å¦‚æœæœ‰äººè¯´ä»–åœ¨è¯»é²è¿…ã€èŒ¨å¨æ ¼ã€æ‘ä¸Šæ˜¥æ ‘ç­‰ç­‰ï¼Œæˆ‘å“ªæ€•åœ¨è¯»çš„æ˜¯è¡—è¾¹é»„è‰²å°ä¹¦åˆŠä¹Ÿä¸ä¼šè§‰å¾—è‡ªå·±å§¿åŠ¿å°±ä½åˆ°å“ªé‡Œå»äº†ã€‚è¨€å½’æ­£ä¼ ï¼Œ16å¹´è¯»çš„è¿˜æ˜¯å°è¯´ã€æŠ€æœ¯ä¹¦ç±å±…å¤šï¼Œæœ‰ä¸‹é¢è¿™äº›å§ï¼š</p>
<ul>
<li><p>ä¸€æœˆï¼šå‡†é£æœˆè°ˆ</p>
</li>
<li><p>äºŒæœˆï¼šæ–‡åŒ–çš„åŠ›é‡</p>
</li>
<li><p>å››æœˆï¼šæ€§çˆ±ä¸å©šå§»ã€ä¹”å®¶å¤§é™¢ã€è¾¹åŸ</p>
</li>
<li><p>äº”æœˆï¼šè¥¿æ¸¸è®°</p>
</li>
<li><p>å…­æœˆï¼šå°ç¥æ¼”ä¹‰ã€çº¢é«˜ç²±</p>
</li>
<li><p>ä¸ƒæœˆï¼š <strong>é€€åï¼Œæˆ‘è¦å¼€å§‹è£…é€¼äº†ã€‚ã€‚ã€‚</strong> Learn C the Hard Wayã€æ“ä½œç³»ç»Ÿæ€è€ƒã€è®ºæŒä¹…æˆ˜ã€è¡Œè€…æ— ç–†</p>
</li>
<li><p>å…«æœˆï¼šFluent Pythonã€Python Cookbook 3rd Editionã€Code Like a Pythonista Idiomatic Pythonã€Intermediate Pythonã€Web Scraping with Python</p>
</li>
<li><p>ä¹æœˆï¼šä¸€ä¸ªé™Œç”Ÿå¥³äººçš„æ¥ä¿¡</p>
</li>
<li><p>åæœˆï¼šAlgorithm Unplugged</p>
</li>
<li><p>åä¸€æœˆï¼šThe Linux Command Lineã€ Pro Git</p>
</li>
<li><p>åäºŒæœˆï¼šLearn the Vi and Vimã€Hadoop with Python</p>
</li>
</ul>
<h4 id="çœ‹è¿‡çš„ç”µå½±"><a href="#çœ‹è¿‡çš„ç”µå½±" class="headerlink" title="çœ‹è¿‡çš„ç”µå½±"></a>çœ‹è¿‡çš„ç”µå½±</h4><p>çœ‹è¿‡çš„ç”µå½±è¿˜çœŸä¸å°‘ï¼Œä¸»è¦é›†ä¸­åœ¨ä¸ŠåŠå¹´çš„å®ä¹ è¿‡ç¨‹ä¸­ï¼Œç ”ç©¶ç”Ÿå…¥å­¦ä»¥åæœ€æ–°ç§‘ç ”ï¼Œçœ‹å¾—ç”µå½±ä¹Ÿå°‘äº†ã€‚ã€‚ã€‚</p>
<p>è¯¦æƒ…è§<a href="https://movie.douban.com/standbyme/2016/share?source=broadcast&amp;user_id=79236503" target="_blank" rel="external">é“¾æ¥</a></p>
<h4 id="å¬è¿‡çš„æ­Œ"><a href="#å¬è¿‡çš„æ­Œ" class="headerlink" title="å¬è¿‡çš„æ­Œ"></a>å¬è¿‡çš„æ­Œ</h4><p>16å¹´å› ä¸ºå®ä¹ è¿‡ç¨‹ä¸­åœ¨è·¯ä¸Šçš„æ—¶é—´å¾ˆå¤šï¼Œæ‰€ä»¥å¬çš„æ­Œä¹Ÿå¾ˆå¤šï¼Œä¸€å¹´å¤§æ¦‚å¬äº†æœ‰3000+é¦–ï¼Ÿä¹Ÿæ˜¯åœ¨è¿™ä¸€å¹´ç¡®å®šäº†è‡ªå·±æœ€çˆ±çš„éŸ³ä¹ç±»å‹ï¼šç”µéŸ³ï¼›</p>
<h4 id="å»è¿‡çš„åœ°æ–¹"><a href="#å»è¿‡çš„åœ°æ–¹" class="headerlink" title="å»è¿‡çš„åœ°æ–¹"></a>å»è¿‡çš„åœ°æ–¹</h4><p>è¯´æ¥å¿æ„§ï¼Œä»Šå¹´çœŸçš„æ˜¯æ²¡å»å“ªé‡Œæµªï¼Œæœ€èµ·ç å’Œè‡ªå·±çš„é¢„æœŸè¿˜æ˜¯æœ‰å¾ˆå¤§å·®è·çš„ã€‚è¿œçš„åœ°æ–¹å°±å»äº†å—äº¬ã€æ‰¬å·ã€æ˜†æ˜ã€å¤§ç†ï¼›è¿‘çš„åœ°æ–¹åˆ™å»äº†é¦™å±±ï¼ˆè‡ªå·±è¯´å‡ºæ¥éƒ½å«Œä¸¢äººã€‚ã€‚ã€‚ï¼‰ã€é’é¾™å³¡ã€åæ¸¡ã€‚</p>
<h4 id="äº²æƒ…ä¸Šæ”¶è·çš„"><a href="#äº²æƒ…ä¸Šæ”¶è·çš„" class="headerlink" title="äº²æƒ…ä¸Šæ”¶è·çš„"></a>äº²æƒ…ä¸Šæ”¶è·çš„</h4><p>å› ä¸ºæ˜¯ä¸ªäººæ€»ç»“ï¼Œæ‰€ä»¥ä¸æƒ³æ·±è°ˆè‡ªå·±çš„å®¶åº­ç­‰ç­‰ã€‚æ€»ä¹‹16å¹´ä¸€åˆ‡éƒ½è¿ˆä¸Šäº†æ­£è§„ï¼Œä½œä¸ºæŒèˆµäººï¼Œä¼šè®©ä¸€åˆ‡è¶Šæ¥è¶Šå¥½ã€‚</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post59-2017.jpg" alt="2017"></p>
<h3 id="2017æœŸå¾…çš„"><a href="#2017æœŸå¾…çš„" class="headerlink" title="2017æœŸå¾…çš„"></a>2017æœŸå¾…çš„</h3><p>è¯´å®Œäº†16å¹´çš„æ€»ç»“ï¼Œå…ä¸äº†ä¿—åœ°è¦è°ˆè°ˆ17å¹´çš„å°ç›®æ ‡äº†ï¼Œç»™è‡ªå·±ç«‹å‡ ä¸ªå¤Ÿå¾—ç€çš„FLAGï¼ˆè¯è¯´ç«‹è¿‡çš„FLAGå¥½åƒè¿˜æ²¡å€’è¿‡ï¼‰ã€‚</p>
<h4 id="æŠ€æœ¯ä¸Š"><a href="#æŠ€æœ¯ä¸Š" class="headerlink" title="æŠ€æœ¯ä¸Š"></a>æŠ€æœ¯ä¸Š</h4><p>ä¸ŠåŠå¹´ä¼šç»§ç»­æ·±å…¥åç«¯ï¼Œä¸ŠåŠå¹´ä»ç„¶ä»¥pythonä½œä¸ºä¸»åŠ›å¼€å‘è¯­è¨€ï¼Œå…¶ä¸­å‡½æ•°å¼ç¼–ç¨‹ä¸åç¨‹æ˜¯è‡ªå·±çš„ä¸¤ä¸ªä¸»è¦çªç ´ç‚¹ï¼Œå¦å¤–ç»§ç»­æ·±å…¥å­¦ä¹ ä½¿ç”¨linuxã€vimã€python webå¼€å‘æ¡†æ¶ã€‚</p>
<p>ä¸‹åŠå¹´åˆ™ä¼šç³»ç»Ÿåœ°è¿‡ä¸€éC++ï¼ŒæŒæ¡ç½‘ç»œã€æ“ä½œç³»ç»Ÿç­‰çŸ¥è¯†ï¼ˆä¸»è¦æŒ‡ä¸€äº›è¾ƒä½å±‚çš„çŸ¥è¯†ï¼‰ã€‚</p>
<p>è‡ªå·±æ‰“ç®—æŒæ¡çš„ä¸€äº›é›¶ç¢æˆ–ç›®å‰è¿˜ä¸€ç›´åŠè§£çš„ç›¸å…³æ¦‚å¿µï¼Œå®Œå–„çŸ¥è¯†ä½“ç³»ï¼š</p>
<ul>
<li><p>redisã€memcache</p>
</li>
<li><p>hadoopæ¶æ„åŠç”Ÿæ€</p>
</li>
<li><p>dockeré‡åº¦ä½¿ç”¨</p>
</li>
<li><p>unikernelä½¿ç”¨</p>
</li>
<li><p>NoSQLéç»“æ„åŒ–æ•°æ®åº“</p>
</li>
<li><p>æ·±åº¦å­¦ä¹ çš„åº”ç”¨åŠå‰æ™¯</p>
</li>
</ul>
<p>å¦å¤–è®¡åˆ’å¼€å‘ä¸€ä¸ªé’ˆå¯¹å®éªŒå®¤æŠ¥é”€çš„æŠ¥è´¦ç³»ç»Ÿï¼ŒèŠ‚çœè‡ªå·±æŠ¥è´¦æ—¶é—´ï¼›è¿˜æœ‰ç³»ç»Ÿåœ°è¯»ä¸€äº›Githubä¼˜è´¨æºä»£ç ï¼Œä¹¦ç­¾é‡Œå·²ç»èººäº†å‡ ä¸ªã€‚</p>
<p>å½“ç„¶ï¼Œé‡å¤´æˆæ€»è¦æ”¾åœ¨æœ€åï¼Œ17å¹´æ‰“ç®—è¿ˆå…¥å‰ç«¯å¤§é—¨ï¼Œå°±ä»¥è‡ªå·±çš„åšå®¢ä¸ºå®éªŒå°ç™½é¼ ï¼Œè¾¹å­¦è¾¹ç»ƒï¼Œå°†åšå®¢æ¥ä¸€æ¬¡å½»å¤´å½»å°¾çš„æ”¹å˜ï¼ˆåšçš„è¿‡ç¨‹ä¸­å­¦ä¼šä»¥äº§å“çš„è§’åº¦æ¥çœ‹å¾…æ•´ä¸ªåšå®¢ï¼‰ã€‚</p>
<p>æœ€åå®ç°å°†è‡ªå·±æŠ€æœ¯ä½“ç³»ä¸­å‰ç«¯ã€åç«¯æ‰“é€šçš„ç›®æ ‡ã€‚ä½†åº”è¯¥ä»ç„¶ä¼šä»¥åç«¯ä¸ºä¸»ï¼ˆä½†ä¹Ÿä¸æ’é™¤å­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°å‰ç«¯å¤ªå¥½ç©ï¼Œè½¬å‰ç«¯ä¸ºä¸»çš„å¯èƒ½æ€§ï¼‰ã€‚</p>
<h4 id="æ€§æ ¼ä¸Š"><a href="#æ€§æ ¼ä¸Š" class="headerlink" title="æ€§æ ¼ä¸Š"></a>æ€§æ ¼ä¸Š</h4><p>æ€§æ ¼ä¸Šæƒ³è¦æ”¹å˜çš„åœ°æ–¹æœ‰ï¼š</p>
<ul>
<li><p>æ”¹å–„è‡ªå·±ç»·ç€ä¸ªè„¸çš„è‡­æ¯›ç—…ï¼ˆä¸æ˜¯æ ¹é™¤ï¼‰</p>
</li>
<li><p>å­¦ä¼šå¯’æš„ï¼Œç¥ç‰¹ä¹ˆç§˜åˆ¶æŠ€èƒ½ï¼Œæˆ‘ç°åœ¨æ˜¯çœŸçš„ä¸€ç‚¹ä¸ä¼š</p>
</li>
<li><p>å¤šçœ‹å°‘è¯´</p>
</li>
<li><p>æ€¥äººæ‰€éœ€ï¼Œå¤šå…³å¿ƒèº«è¾¹çš„æœ‹å‹ã€äº²äºº</p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸çŸ¥ä¸è§‰2016å°±è¦ç»“æŸäº†,ä¹Ÿåˆ°äº†äº¤ä¸Šè‡ªå·±2016å¹´ç­”å·çš„æ—¶å€™äº†ã€‚æ¬²æ‰¬å…ˆæŠ‘çš„2016å¹´å¹´ç»ˆæ€»ç»“ï¼Œå…ˆä»åæ¶ˆæ¯å¼€å§‹å§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2016å¹´é—æ†¾çš„&quot;&gt;&lt;a href=&quot;#2016å¹´é—æ†¾çš„&quot; class=&quot;headerlink&quot; title=&quot;2016å¹´é—æ†¾çš„&quot;&gt;&lt;
    
    </summary>
    
      <category term="diary" scheme="http://blog.yinwoods.work/categories/diary/"/>
    
    
      <category term="thoughts" scheme="http://blog.yinwoods.work/tags/thoughts/"/>
    
  </entry>
  
  <entry>
    <title>vim å­¦ä¹ ç¬”è®°</title>
    <link href="http://blog.yinwoods.work/2016/12/04/vim%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://blog.yinwoods.work/2016/12/04/vimå­¦ä¹ ç¬”è®°/</id>
    <published>2016-12-03T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Chapter-3-Moving-Around-in-a-Hurry"><a href="#Chapter-3-Moving-Around-in-a-Hurry" class="headerlink" title="Chapter 3 Moving Around in a Hurry"></a>Chapter 3 Moving Around in a Hurry</h3><p>^F: scroll forward one screen.<br>^B: scroll backward one screen.</p>
<p>^D: scroll forward half screen.<br>^U: scroll backward half screen.</p>
<p>^E: scroll forward one line.<br>^Y: scroll backward one line.</p>
<p>zENTER: move current line to top of screen and scroll.<br>z.: move current line to center of screen and scroll.<br>z-: move current line to bottom of screen and scroll.</p>
<p>H: move to home-the top line of screen.<br>M: move to middle line of screen.<br>L: move to bottom line of screen.</p>
<p>ENTER: move to first character of next line.<br>+: move to first character of next line.<br>-: move to first character of previous line.</p>
<p>^: move to first nonblank character of current line.<br>n|: move to column n of current line.</p>
<p>e: move to end of word.<br>E: move to end of ward(ignore punctuation)</p>
<p>(: move to begining of current sentence.<br>): move to begining of next sentence.</p>
<p>{: move to begining of current paragraph.<br>}: move to begining of next paragraph.</p>
<p>[[: move to begining of current section.<br>]]: move to begining of next section.</p>
<p>/pattern: search forward for pattern.<br>?pattern: search backward for pattern.</p>
<p>n: repeat last search.<br>N: repeat last search in opposite direction.</p>
<p>/: repeat last search forward.<br>?: repeat last search backward.</p>
<p>fx: find next occurrence of x in the line, where x stands for any character.<br>Fx: find previous occurrence of x in the line.</p>
<p>tx: find character before next occurrence of x in the line.<br>Tx: find character after previous occurrence of x in the line.</p>
<p>;: repeat previous find command in same direction.<br>,: repeat previous find command in opposite direction.</p>
<p><code>: returns you to your original position(the position where you issued the last G command).
&#39;&#39;: act same as</code>, except that it returns the cursor to the begining of the line.</p>
<p>^G: show current line(not a movement command)</p>
<h3 id="Chapter-4-Beyond-the-Basics"><a href="#Chapter-4-Beyond-the-Basics" class="headerlink" title="Chapter 4 Beyond the Basics"></a>Chapter 4 Beyond the Basics</h3><p>vim +n file: opens file at line number n<br>vim + file: opens file at last line<br>vim +/pattern file: opens file at the first occurence of pattern<br>vim -c command file: run command after opening file, usually a line number or a search.</p>
<p>vim -R file: operate in read-only mode.<br>vim -r file: recover files after a crash.<br>view file: to look at a file in read-only mode.</p>
<p>â€œ[a-z]command: do command with buffer [a-z].<br>â€œ[a-z]p: put the contents of buffer [a-z] after cursor.<br>â€œ[A-Z]command: accumulate the text dealed by command to buffer named [a-z].</p>
<p>mx: mark current position with x.<br>â€˜x: move cursor to first character of the line marked by x.<br>`x: move cursor to character marked by x.<br>``: return to exact position of previous mark or context after a move.<br>â€˜â€™: return to begining of the line of previous mark or context.</p>
<h3 id="Chapter-5-Introducint-the-ex-Editor"><a href="#Chapter-5-Introducint-the-ex-Editor" class="headerlink" title="Chapter 5 Introducint the ex Editor"></a>Chapter 5 Introducint the ex Editor</h3><p>=: print total number of lines.<br>.=: print line number of current line.<br>/pattern/=: print line number of first line that matches pattern.</p>
<p>start,end[delete|d]: delete lines.<br>start,end[move|m]number: move lines from start through end to number line.<br>start,end[copy|co|t]number: copy lines from start through end to number line.</p>
<p>/pattern/d: delete next line containing pattern.<br>/pattern/+d: delete line below next line containing pattern.<br>/patter1/,/pattern2/d: delete from first line containing patter1 through first line containing pattern2.</p>
<p>g/pattern: find last occurence of pattern in file.<br>g/pattern/p: find and display all lines in file containing pattern.<br>g!/pattern/nu: find and diaplay all lines in file that donâ€™t contain pattern;also display the line number for each line found.</p>
<p>[read|r] filename: read in contents of another file with ex command. </p>
<h3 id="Chapter-6-Global-Replacement"><a href="#Chapter-6-Global-Replacement" class="headerlink" title="Chapter 6 Global Replacement"></a>Chapter 6 Global Replacement</h3><p>put troff italicization codes around the wrod ENTER: :%s/ENTER/\fI&amp;\fP/g</p>
<p>modify a list of pathnames in a file: :%s:/home/time:/home/linda:g</p>
<p>put html italicization codes around the wrod ENTER: :%s:ENTER:<i>&amp;</i>:g</p>
<p>change all periods to semicolons in lines 1 to 10: :1,10s/./;/g</p>
<p>change all occurrences of the word help (or Help) to HELP: :%s/[Hh]elp/HELP/g</p>
<p>replace one or more spaces with a single space: :%s/  */ /g</p>
<p>replace one or more spaces following a colon with two spaces: :%s/:  */:  /g</p>
<p>replace one or more spaces following a period or a colon with two spaces: :%s/([:.])  */\1  /g</p>
<p>standardize various uses of a word or heading: :%s/^Note[ :s]*/Notes: /g</p>
<p>delete all blank lines: :g/^$/d</p>
<p>delete all blank lines, plus any lines that contain only whitespace: :g/^[ tab]*$/d</p>
<p>delete all leading spaces on every line: :%s/^  <em>(.</em>)/\1/</p>
<p>delete all spaces at the end of every line: :%s/(.<em>)  </em>$/\1/</p>
<p>insert a &gt;  at the start of every line in a file: :%s/^/&gt;  /</p>
<p>add a period to the end of the next six lines: :.,+5s/$/./</p>
<p>reverse the order of all hyphen-separated items in a list: :%s/(.<em>) - (.</em>)/\2 - \1/</p>
<p>change every letter in a file to uppercase: :%s/.*/\U&amp;/</p>
<p>reverse the order of lines in a file: :g/.*/mo0</p>
<p>in a text-file database, on all lines not marked Paid in full, append the phrase Overdue: :g!/Paid in full/s/$/ Overdue/</p>
<p>for any line that doesnâ€™t begin with a number, move the line to the end of the file: :g!/^[[:digit:]]/m$</p>
<p>remove numbering from section headings in a document: :%s/^[1-9][0-9]<em>.[1-9][0-9.]</em> //</p>
<h3 id="Chapter-7-Advanced-Editing"><a href="#Chapter-7-Advanced-Editing" class="headerlink" title="Chapter 7 Advanced Editing"></a>Chapter 7 Advanced Editing</h3><p>execute unix command: !command<br>enter shell without exit vim: !sh</p>
<p>examples: r!date, r!sort file, !ls</p>
<p>filter text in ex: start,end!sort</p>
<p>word abbreviation: ab abbr phrase</p>
<p>disable abbreviation: unab abbr</p>
<p>map x sequence : define character x as a sequence of editing commands.<br>unmap x: disable the squence defined for x.<br>map: list the characters that are currently mapped.</p>
<h3 id="Chapter-11-Multiple-Windows-in-Vim"><a href="#Chapter-11-Multiple-Windows-in-Vim" class="headerlink" title="Chapter 11: Multiple Windows in Vim"></a>Chapter 11: Multiple Windows in Vim</h3><p>vim -o[number] file1 file2: opens the edit session with display hrizontally split into number(default is two) equal-sized windows, one for each file.</p>
<p>[n]split [++opt] [+cmd] [file]:<br>n: tells how many lines to display in the new window, which goes at the top.<br>opt: passes vim option information to the new window session (note that it must be preceded by two plus signs).<br>cmd: passes a command for execution in the new window (note that it must be preceded by a single plus sign).<br>file: specifies a file to edit in the new window.</p>
<p>sviw filename: splits screen horizontally to open a new window and sets readonly for that buffer.<br>sfind [++opt] [+cmd] filename: works like :split, but looks for filename in path. if vim does not find the file, it doesnâ€™t split the window.</p>
<p>resize -n: decrease current window size, default amount is one line.<br>resize +n: increase current window size, default amount is one line.</p>
<p>resize n: set current window height, default is to maximize window height.<br>vertical resize n: set current window width to n. default is to make window as wide as possible.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Chapter-3-Moving-Around-in-a-Hurry&quot;&gt;&lt;a href=&quot;#Chapter-3-Moving-Around-in-a-Hurry&quot; class=&quot;headerlink&quot; title=&quot;Chapter 3 Moving Around 
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="tools, linux" scheme="http://blog.yinwoods.work/tags/tools-linux/"/>
    
  </entry>
  
  <entry>
    <title>å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨/äºŒå‰æ ‘çš„æ·±åº¦æ‹·è´</title>
    <link href="http://blog.yinwoods.work/2016/10/24/%E5%90%AB%E9%9A%8F%E6%9C%BA%E6%8C%87%E9%92%88%E7%9A%84%E5%8D%95%E9%93%BE%E8%A1%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E6%8B%B7%E8%B4%9D/"/>
    <id>http://blog.yinwoods.work/2016/10/24/å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨äºŒå‰æ ‘çš„æ·±åº¦æ‹·è´/</id>
    <published>2016-10-23T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´"><a href="#ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´" class="headerlink" title="ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´"></a>ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´</h3><p>æœ€è¿‘é‡åˆ°ä¸€é“å¾ˆæœ‰è¶£çš„é¢˜ç›®ï¼š<code>ç»™å®šæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨ï¼Œé—®å¦‚ä½•æ·±åº¦æ‹·è´è¿™ä¸ªå•é“¾è¡¨ï¼Ÿ</code></p>
<p>ç±»ä¼¼çš„å•é“¾è¡¨å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post57-2.jpg" alt="å›¾1"></p>
<p>æ€»ç»“äº†ä¸‹çœ‹åˆ°çš„ç­”æ¡ˆï¼Œå¤§è‡´å¯åˆ†ä¸ºä¸‰ç§æ–¹æ³•ï¼š</p>
<h4 id="1ã€æš´åŠ›å¤åˆ¶ï¼ˆå¾ˆæœ´ç´ çš„æ–¹æ³•ï¼‰"><a href="#1ã€æš´åŠ›å¤åˆ¶ï¼ˆå¾ˆæœ´ç´ çš„æ–¹æ³•ï¼‰" class="headerlink" title="1ã€æš´åŠ›å¤åˆ¶ï¼ˆå¾ˆæœ´ç´ çš„æ–¹æ³•ï¼‰"></a>1ã€æš´åŠ›å¤åˆ¶ï¼ˆå¾ˆæœ´ç´ çš„æ–¹æ³•ï¼‰</h4><p>å› ä¸ºéšæœºæŒ‡é’ˆå¯èƒ½æŒ‡å‘å½“å‰èŠ‚ç‚¹ä¹‹åçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥è€ƒè™‘åˆ†ä¸¤æ­¥æ¥åšã€‚</p>
<p>ç¬¬ä¸€æ­¥éå†å•é“¾è¡¨ï¼Œæ‹·è´èŠ‚ç‚¹åŠèŠ‚ç‚¹çš„nextæŒ‡é’ˆï¼Œä¸è€ƒè™‘èŠ‚ç‚¹çš„randomæŒ‡é’ˆã€‚ç»“æŸåå¾—åˆ°ä¸€ä¸ªæ–°çš„å•é“¾è¡¨ã€‚</p>
<p>ç¬¬äºŒæ­¥éå†åŸå•é“¾è¡¨ï¼Œå¦‚æœå½“å‰è®¿é—®èŠ‚ç‚¹Aæœ‰randomæŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹Bï¼Œåˆ™åœ¨æ–°çš„å•é“¾è¡¨ä¸­æ‰¾åˆ°ç›¸åº”çš„èŠ‚ç‚¹AAä»¥åŠrandomæ‰€æŒ‡å‘èŠ‚ç‚¹BBï¼Œä»¤AA-&gt;random = BBã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(N2)</p>
<h4 id="2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´"><a href="#2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´" class="headerlink" title="2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´"></a>2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´</h4><p>è€ƒè™‘ç¬¬ä¸€ç§æ–¹æ³•å¯ä»¥å‘ç°æ—¶é—´ä¸»è¦è€—è´¹åœ¨å¤åˆ¶randomæŒ‡é’ˆçš„è¿‡ç¨‹ä¸­éœ€è¦æŸ¥æ‰¾ç›¸åº”çš„èŠ‚ç‚¹ï¼Œå› æ­¤å¯æƒ³åˆ°å¦‚æœèƒ½å¤Ÿå»ºç«‹åŸå•é“¾è¡¨ä¸æ–°å•é“¾è¡¨èŠ‚ç‚¹ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œé‚£ä¹ˆåªéœ€éå†ä¸€æ¬¡å³å¯å®ŒæˆrandomæŒ‡é’ˆçš„æ‹·è´ã€‚è¯¦ç»†æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ç¬¬ä¸€æ­¥éå†å•é“¾è¡¨ï¼Œæ‹·è´èŠ‚ç‚¹åŠèŠ‚ç‚¹çš„nextæŒ‡é’ˆï¼Œä¸è€ƒè™‘èŠ‚ç‚¹çš„randomæŒ‡é’ˆã€‚ç»“æŸåå¾—åˆ°ä¸€ä¸ªæ–°çš„å•é“¾è¡¨ã€‚</p>
<p>ç¬¬äºŒæ­¥éå†åŸå•é“¾è¡¨ï¼Œå¦‚æœå½“å‰è®¿é—®èŠ‚ç‚¹Aæœ‰randomæŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹Bï¼Œåˆ™ä»¤map[A]-&gt;random = map[B]å³å¯ã€‚</p>
<p>æ•…åªéœ€è¦ä¸¤æ¬¡éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(2N)</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> key;</div><div class="line">    Node *next, *random;</div><div class="line">    Node(<span class="keyword">int</span> k, Node *nt, Node *rand): key(k), next(nt), random(rand) &#123;&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInOrder</span><span class="params">(Node *node)</span> </span>&#123;</div><div class="line"></div><div class="line">    Node* curNode = node;</div><div class="line">    <span class="keyword">while</span>(curNode != <span class="literal">NULL</span>) &#123;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"[ "</span> &lt;&lt; curNode-&gt;key &lt;&lt; <span class="string">", "</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(curNode-&gt;random == <span class="literal">NULL</span>) &#123;</div><div class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"NULL ] -&gt; "</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">cout</span> &lt;&lt; curNode-&gt;random-&gt;key &lt;&lt; <span class="string">" ] -&gt; "</span>;</div><div class="line">        &#125;</div><div class="line">        curNode = curNode-&gt;next;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">Node* <span class="title">copyLinkedList</span><span class="params">(Node* treeNode, <span class="built_in">map</span>&lt;Node*, Node*&gt; *mymap)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">    Node* headNode = <span class="keyword">new</span> Node(treeNode-&gt;key, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* curNode = headNode;</div><div class="line">    (*mymap)[treeNode] = headNode;</div><div class="line"></div><div class="line">    treeNode = treeNode-&gt;next;</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(treeNode != <span class="literal">NULL</span>) &#123;</div><div class="line"></div><div class="line">        Node* cloneNode = <span class="keyword">new</span> Node(treeNode-&gt;key, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">        (*mymap)[treeNode] = cloneNode;</div><div class="line"></div><div class="line">        curNode-&gt;next = cloneNode;</div><div class="line">        curNode = curNode-&gt;next;</div><div class="line">        treeNode = treeNode-&gt;next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> headNode;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">copyRandom</span><span class="params">(Node* treeNode, Node* cloneNode, <span class="built_in">map</span>&lt;Node*, Node*&gt; *mymap)</span> </span>&#123;</div><div class="line"></div><div class="line">    Node* headNode = cloneNode;</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(treeNode != <span class="literal">NULL</span>) &#123;</div><div class="line">        cloneNode-&gt;random = (*mymap)[treeNode-&gt;random];</div><div class="line"></div><div class="line">        treeNode = treeNode-&gt;next;</div><div class="line">        cloneNode = cloneNode-&gt;next;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    cloneNode = headNode;</div><div class="line">    <span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">Node* <span class="title">cloneList</span><span class="params">(Node* tree)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(tree == <span class="literal">NULL</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">    <span class="built_in">map</span>&lt;Node*, Node*&gt; *mymap = <span class="keyword">new</span> <span class="built_in">map</span>&lt;Node*, Node*&gt;;</div><div class="line"></div><div class="line">    Node* newList = copyLinkedList(tree, mymap);</div><div class="line"></div><div class="line">    copyRandom(tree, newList, mymap);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> newList;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line"></div><div class="line">    Node* node1 = <span class="keyword">new</span> Node(<span class="number">1</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node2 = <span class="keyword">new</span> Node(<span class="number">2</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node3 = <span class="keyword">new</span> Node(<span class="number">3</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node4 = <span class="keyword">new</span> Node(<span class="number">4</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line"></div><div class="line">    node1-&gt;next = node2;</div><div class="line">    node2-&gt;next = node3;</div><div class="line">    node3-&gt;next = node4;</div><div class="line"></div><div class="line">    node1-&gt;random = node3;</div><div class="line">    node2-&gt;random = node4;</div><div class="line"></div><div class="line">    printInOrder(node1);</div><div class="line"></div><div class="line">    Node* clone = cloneList(node1);</div><div class="line"></div><div class="line">    printInOrder(clone);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3ã€åœ¨åŸå•é“¾è¡¨ä¸Šæ’å…¥èŠ‚ç‚¹å¹¶åˆ é™¤å®ç°æ·±åº¦æ‹·è´"><a href="#3ã€åœ¨åŸå•é“¾è¡¨ä¸Šæ’å…¥èŠ‚ç‚¹å¹¶åˆ é™¤å®ç°æ·±åº¦æ‹·è´" class="headerlink" title="3ã€åœ¨åŸå•é“¾è¡¨ä¸Šæ’å…¥èŠ‚ç‚¹å¹¶åˆ é™¤å®ç°æ·±åº¦æ‹·è´"></a>3ã€åœ¨åŸå•é“¾è¡¨ä¸Šæ’å…¥èŠ‚ç‚¹å¹¶åˆ é™¤å®ç°æ·±åº¦æ‹·è´</h3><p>åŸºæœ¬æ€æƒ³åŒ2ç›¸ä¼¼ï¼Œé€šè¿‡å‡å°‘æŸ¥æ‰¾èŠ‚ç‚¹çš„æ—¶é—´æ¥æé«˜æ•ˆç‡ã€‚åœ¨åŸå•é“¾è¡¨ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¹‹åæ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post57-3.jpg" alt="å›¾2"></p>
<p>å½“æ‹·è´randomæŒ‡é’ˆæ—¶å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å®ç°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">A-&gt;next-&gt;random = A-&gt;random-&gt;next</div><div class="line"></div><div class="line"># æ¢å¤åŸå•é“¾è¡¨</div><div class="line">A-&gt;next = A-&gt;next-&gt;next</div></pre></td></tr></table></figure>
<p><strong> å…¶å®è¿™ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„èŠ‚ç‚¹æ˜ å°„å…³ç³» </strong>ã€‚æ•…æ—¶é—´å¤æ‚åº¦åŒ2ä¸ºO(2N)</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> key;</div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">next</span>, *<span class="title">random</span>;</span></div><div class="line">    Node(<span class="keyword">int</span> k, Node* nt, Node* rand): key(k), next(nt), random(rand) &#123;&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// æ‰“å°é“¾è¡¨ï¼Œ[a, b] è¡¨ç¤º key ä¸º a çš„èŠ‚ç‚¹ random æŒ‡é’ˆæŒ‡å‘ key ä¸º b çš„èŠ‚ç‚¹</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInorder</span><span class="params">(Node* node)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(node == <span class="literal">NULL</span>)</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line"></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"[ "</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(node-&gt;random == <span class="literal">NULL</span>)</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"NULL ], "</span>;</div><div class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; node-&gt;random-&gt;key &lt;&lt; <span class="string">" ], "</span>;</div><div class="line"></div><div class="line">    printInorder(node-&gt;next);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹ï¼ˆä¸åŒ…å«éšæœºæŒ‡é’ˆï¼‰ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå¤åˆ¶çš„èŠ‚ç‚¹ </span></div><div class="line"><span class="function">Node* <span class="title">copyLinkedListNode</span><span class="params">(Node* treeNode)</span> </span>&#123;</div><div class="line">    Node* curNode = treeNode;</div><div class="line">    <span class="keyword">while</span>(curNode != <span class="literal">NULL</span>) &#123;</div><div class="line">        Node* next = curNode-&gt;next;</div><div class="line">        curNode-&gt;next = <span class="keyword">new</span> Node(curNode-&gt;key, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">        curNode-&gt;next-&gt;next = next;</div><div class="line">        curNode = next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> treeNode-&gt;next;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶éšæœºæŒ‡é’ˆ</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">copyRandomNode</span><span class="params">(Node* treeNode, Node* cloneNode)</span> </span>&#123;</div><div class="line">    Node *headNode = cloneNode;</div><div class="line">    <span class="keyword">while</span>(treeNode != <span class="literal">NULL</span>) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(treeNode-&gt;random != <span class="literal">NULL</span>)</div><div class="line">            cloneNode-&gt;random = treeNode-&gt;random-&gt;next;</div><div class="line">        <span class="keyword">else</span> cloneNode-&gt;random = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(treeNode-&gt;next == <span class="literal">NULL</span> || cloneNode-&gt;next == <span class="literal">NULL</span>)</div><div class="line">            <span class="keyword">return</span> ;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            treeNode = treeNode-&gt;next-&gt;next;</div><div class="line">            cloneNode = cloneNode-&gt;next-&gt;next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    cloneNode = headNode;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ¢å¤åŸæ¥çš„å•é“¾è¡¨ï¼Œå³åˆ†ç¦»ä¸¤ä¸ªå•é“¾è¡¨</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">restoreLinkedList</span><span class="params">(Node* treeNode, Node* cloneNode)</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span>(treeNode != <span class="literal">NULL</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(cloneNode-&gt;next != <span class="literal">NULL</span>) &#123;</div><div class="line">            Node* cloneNext = cloneNode-&gt;next-&gt;next;</div><div class="line">            treeNode-&gt;next = treeNode-&gt;next-&gt;next;</div><div class="line">            cloneNode-&gt;next = cloneNext;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            treeNode-&gt;next = <span class="literal">NULL</span>;</div><div class="line">        &#125;</div><div class="line">        treeNode = treeNode-&gt;next;</div><div class="line">        cloneNode = cloneNode-&gt;next;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶æ•´ä¸ªå•é“¾è¡¨</span></div><div class="line"><span class="function">Node* <span class="title">cloneLinkedList</span><span class="params">(Node* treeNode)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">    Node* cloneNode = copyLinkedListNode(treeNode);</div><div class="line">    copyRandomNode(treeNode, cloneNode);</div><div class="line">    restoreLinkedList(treeNode, cloneNode);</div><div class="line">    <span class="keyword">return</span> cloneNode;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    Node* node1 = <span class="keyword">new</span> Node(<span class="number">1</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node2 = <span class="keyword">new</span> Node(<span class="number">2</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node3 = <span class="keyword">new</span> Node(<span class="number">3</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node* node4 = <span class="keyword">new</span> Node(<span class="number">4</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line"></div><div class="line">    node1-&gt;next = node2;</div><div class="line">    node2-&gt;next = node3;</div><div class="line">    node3-&gt;next = node4;</div><div class="line">    node1-&gt;random = node3;</div><div class="line">    node2-&gt;random = node4;</div><div class="line"></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"traversal of original binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    printInorder(node1);</div><div class="line"></div><div class="line">    Node *clone = cloneLinkedList(node1);</div><div class="line"></div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n\ntraversal of cloned binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    printInorder(clone);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="äºŒã€åŒ…å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘æ·±åº¦æ‹·è´"><a href="#äºŒã€åŒ…å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘æ·±åº¦æ‹·è´" class="headerlink" title="äºŒã€åŒ…å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘æ·±åº¦æ‹·è´"></a>äºŒã€åŒ…å«éšæœºæŒ‡é’ˆçš„äºŒå‰æ ‘æ·±åº¦æ‹·è´</h3><p>åŒä¸Šï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸‰ç§å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<h3 id="1ã€æš´åŠ›å¤åˆ¶ï¼ˆOTZï¼‰"><a href="#1ã€æš´åŠ›å¤åˆ¶ï¼ˆOTZï¼‰" class="headerlink" title="1ã€æš´åŠ›å¤åˆ¶ï¼ˆOTZï¼‰"></a>1ã€æš´åŠ›å¤åˆ¶ï¼ˆOTZï¼‰</h3><p>å°±æ˜¯æš´åŠ›ã€‚ã€‚ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N2)</p>
<h3 id="2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´-1"><a href="#2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´-1" class="headerlink" title="2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´"></a>2ã€é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»å®ç°æ·±åº¦æ‹·è´</h3><p>åŒå•é“¾è¡¨ä¸­èŠ‚ç‚¹å»ºç«‹æ˜ å°„å…³ç³»ä¸€æ ·ï¼Œè¿™é‡Œçš„æ—¶é—´å¤æ‚åº¦åŒæ ·ä¸ºO(2N)ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> key;</div><div class="line">	Node *left, *right, *random;</div><div class="line">	Node(<span class="keyword">int</span> k, Node* l, Node* r, Node* rand) : key(k), left(l), right(r), random(rand) &#123;&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// æŒ‰ä¸­åºéå†é€’å½’æ‰“å°æ ‘</span></div><div class="line"><span class="comment">// å…¶ä¸­[a, b]è¡¨ç¤ºèŠ‚ç‚¹açš„keyå€¼ä¸randomæŒ‡é’ˆæ‰€æŒ‡èŠ‚ç‚¹çš„keyå€¼</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInorder</span><span class="params">(Node* node)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(node == <span class="literal">NULL</span>) </div><div class="line">		<span class="keyword">return</span> ;</div><div class="line"></div><div class="line">	printInorder(node-&gt;left);</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"[ "</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(node-&gt;random == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"NULL ], "</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; node-&gt;random-&gt;key &lt;&lt; <span class="string">" ], "</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	printInorder(node-&gt;right);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ‹·è´ä»¥treeNodeä¸ºæ ¹èŠ‚ç‚¹çš„æ•´æ£µæ ‘å¹¶è¿”å›æ‹·è´å®Œæˆåæ–°çš„æ ¹èŠ‚ç‚¹</span></div><div class="line"><span class="comment">// æ‹·è´è¿‡ç¨‹ä¸­åŒ…å«æ‰€æœ‰èŠ‚ç‚¹çš„å·¦å³å­©å­ï¼Œä½†ä¸åŒ…å«èŠ‚ç‚¹çš„randomæŒ‡é’ˆ</span></div><div class="line"><span class="function">Node* <span class="title">copyLeftRightNode</span><span class="params">(Node* treeNode, <span class="built_in">map</span>&lt;Node *, Node *&gt; *mymap)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	Node* cloneNode = <span class="keyword">new</span> Node(treeNode-&gt;key, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	<span class="comment">// å»ºç«‹å½“å‰èŠ‚ç‚¹åˆ°å…‹éš†èŠ‚ç‚¹çš„æ˜ å°„</span></div><div class="line">	(*mymap)[treeNode] = cloneNode;</div><div class="line">	cloneNode-&gt;left = copyLeftRightNode(treeNode-&gt;left, mymap);</div><div class="line">	cloneNode-&gt;right = copyLeftRightNode(treeNode-&gt;right, mymap);</div><div class="line">	<span class="keyword">return</span> cloneNode;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// éå†å¹¶æ‹·è´randomæŒ‡é’ˆ</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">copyRandom</span><span class="params">(Node* treeNode, Node* cloneNode, <span class="built_in">map</span>&lt;Node*, Node*&gt; *mymap)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(cloneNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	cloneNode-&gt;random = (*mymap)[treeNode-&gt;random];</div><div class="line">	copyRandom(treeNode-&gt;left, cloneNode-&gt;left, mymap);</div><div class="line">	copyRandom(treeNode-&gt;right, cloneNode-&gt;right, mymap);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å…‹éš†æ•´æ£µæ ‘çš„å‡½æ•°ä¸»ä½“</span></div><div class="line"><span class="function">Node* <span class="title">cloneTree</span><span class="params">(Node* tree)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(tree == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="comment">// åˆ›å»ºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹çš„æ˜ å°„</span></div><div class="line">	<span class="built_in">map</span>&lt;Node*, Node*&gt; *mymap = <span class="keyword">new</span> <span class="built_in">map</span>&lt;Node*, Node*&gt;;</div><div class="line"></div><div class="line">	<span class="comment">// ç¬¬ä¸€æ¬¡éå†åªæ‹·è´æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­©å­</span></div><div class="line">	<span class="comment">// ä¹Ÿå°±æ˜¯è¯´æš‚æ—¶ä¸æ‹·è´randomæŒ‡é’ˆ</span></div><div class="line">	Node* newTree = copyLeftRightNode(tree, mymap);</div><div class="line"></div><div class="line">	<span class="comment">// ç¬¬äºŒæ¬¡éå†æ‹·è´randomæŒ‡é’ˆ</span></div><div class="line">	copyRandom(tree, newTree, mymap);</div><div class="line">	<span class="keyword">return</span> newTree;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line"></div><div class="line">	Node *tree = <span class="keyword">new</span> Node(<span class="number">1</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	tree-&gt;left = <span class="keyword">new</span> Node(<span class="number">2</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	tree-&gt;right = <span class="keyword">new</span> Node(<span class="number">3</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	tree-&gt;left-&gt;left = <span class="keyword">new</span> Node(<span class="number">4</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	tree-&gt;left-&gt;right = <span class="keyword">new</span> Node(<span class="number">5</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	tree-&gt;random = tree-&gt;left-&gt;right;</div><div class="line">	tree-&gt;left-&gt;right-&gt;random = tree-&gt;right;</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Inorder traversal of original binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>; </div><div class="line">	printInorder(tree);</div><div class="line"></div><div class="line">	Node *clone = cloneTree(tree);</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n\nInorder traversal of cloned binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	printInorder(clone);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3ã€åœ¨åŸäºŒå‰æ ‘ä¸Šæ’å…¥æ–°èŠ‚ç‚¹åå†åˆ é™¤"><a href="#3ã€åœ¨åŸäºŒå‰æ ‘ä¸Šæ’å…¥æ–°èŠ‚ç‚¹åå†åˆ é™¤" class="headerlink" title="3ã€åœ¨åŸäºŒå‰æ ‘ä¸Šæ’å…¥æ–°èŠ‚ç‚¹åå†åˆ é™¤"></a>3ã€åœ¨åŸäºŒå‰æ ‘ä¸Šæ’å…¥æ–°èŠ‚ç‚¹åå†åˆ é™¤</h3><p>æ€æƒ³åŒå•é“¾è¡¨æ“ä½œä¸€æ ·ï¼Œä½†è¿™é‡Œè¦æ³¨æ„èŠ‚ç‚¹é—´çš„ç›¸å¯¹å…³ç³»ï¼Œåœ¨åˆ›å»ºæ–°èŠ‚ç‚¹æ—¶è¦æ­£ç¡®å»ºç«‹è¯¥èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹åŸå·¦å³å­©å­çš„å…³ç³»ã€‚å…·ä½“å¦‚å›¾ç¤ºï¼š</p>
<p><img src="http://7xlnl2.com1.z0.glb.clouddn.com/post57-1.jpg" alt="å›¾3"></p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> key;</div><div class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">left</span>, *<span class="title">right</span>, *<span class="title">random</span>;</span></div><div class="line">	Node(<span class="keyword">int</span> k, Node* l, Node* r, Node* rand): key(k), left(l), right(r), random(rand) &#123;&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// å±‚æ¬¡éå†</span></div><div class="line"><span class="comment">// [a, b] è¡¨ç¤º key ä¸º a çš„èŠ‚ç‚¹ random æŒ‡é’ˆæŒ‡å‘ key ä¸º b çš„èŠ‚ç‚¹</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printInorder</span><span class="params">(Node* node)</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(node == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"[ "</span> &lt;&lt; node-&gt;key &lt;&lt; <span class="string">" "</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(node-&gt;random == <span class="literal">NULL</span>)</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"NULL ], "</span>;</div><div class="line">	<span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; node-&gt;random-&gt;key &lt;&lt; <span class="string">" ], "</span>;</div><div class="line"></div><div class="line">	printInorder(node-&gt;left);</div><div class="line">	printInorder(node-&gt;right);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹åŠå·¦å³å­©å­ï¼ˆä¸åŒ…å«éšæœºæŒ‡é’ˆï¼‰ï¼Œå¹¶è¿”å›å¤åˆ¶åçš„èŠ‚ç‚¹ </span></div><div class="line"><span class="function">Node* <span class="title">copyLeftRightNode</span><span class="params">(Node* treeNode)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="comment">// åœ¨æ ¹èŠ‚ç‚¹ä¸å·¦å­©å­ä¹‹é—´æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹</span></div><div class="line">	Node* left = treeNode-&gt;left;</div><div class="line">	treeNode-&gt;left = <span class="keyword">new</span> Node(treeNode-&gt;key, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">	treeNode-&gt;left-&gt;left = left;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(left != <span class="literal">NULL</span>) &#123;</div><div class="line">		left-&gt;left = copyLeftRightNode(left);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// å¤åˆ¶åçš„å·¦èŠ‚ç‚¹å³å­©å­æŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹å³å­©å­å¤åˆ¶åå¾—åˆ°çš„èŠ‚ç‚¹</span></div><div class="line">	treeNode-&gt;left-&gt;right = copyLeftRightNode(treeNode-&gt;right);</div><div class="line">	<span class="keyword">return</span> treeNode-&gt;left;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶éšæœºæŒ‡é’ˆ</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">copyRandomNode</span><span class="params">(Node* treeNode, Node* cloneNode)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(treeNode-&gt;random != <span class="literal">NULL</span>)</div><div class="line">		cloneNode-&gt;random = treeNode-&gt;random-&gt;left;</div><div class="line">	<span class="keyword">else</span></div><div class="line">		cloneNode-&gt;random = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(treeNode-&gt;left != <span class="literal">NULL</span> &amp;&amp; cloneNode-&gt;left != <span class="literal">NULL</span>)</div><div class="line">		copyRandomNode(treeNode-&gt;left-&gt;left, cloneNode-&gt;left-&gt;left);</div><div class="line">	copyRandomNode(treeNode-&gt;right, cloneNode-&gt;right);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ¢å¤åŸæ¥çš„äºŒå‰æ ‘ï¼Œä¹Ÿå³åˆ†ç¦»å‡ºæ–°å¤åˆ¶çš„äºŒå‰æ ‘</span></div><div class="line"><span class="comment">// å› ä¸ºå³å­©å­å…³ç³»ä¿æŒæ­£ç¡®ï¼Œå› æ­¤åªéœ€æ›´æ–°å·¦å­©å­å…³ç³»</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">restoreTreeLeftNode</span><span class="params">(Node* treeNode, Node* cloneNode)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	<span class="keyword">if</span>(cloneNode-&gt;left != <span class="literal">NULL</span>) &#123;</div><div class="line">		Node* cloneLeft = cloneNode-&gt;left-&gt;left;</div><div class="line">		treeNode-&gt;left = treeNode-&gt;left-&gt;left;</div><div class="line">		cloneNode-&gt;left = cloneLeft;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">		treeNode-&gt;left = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	restoreTreeLeftNode(treeNode-&gt;left, cloneNode-&gt;left);</div><div class="line">	restoreTreeLeftNode(treeNode-&gt;right, cloneNode-&gt;right);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// å¤åˆ¶æ•´æ£µäºŒå‰æ ‘</span></div><div class="line"><span class="function">Node* <span class="title">cloneTree</span><span class="params">(Node* treeNode)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(treeNode == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	Node* cloneNode = copyLeftRightNode(treeNode);</div><div class="line">	copyRandomNode(treeNode, cloneNode);</div><div class="line">	restoreTreeLeftNode(treeNode, cloneNode);</div><div class="line">	<span class="keyword">return</span> cloneNode;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">/*</span></div><div class="line">	Node* tree = new Node(1);</div><div class="line">	tree-&gt;left = new Node(2);</div><div class="line">	tree-&gt;right = new Node(3);</div><div class="line">	tree-&gt;left-&gt;left = new Node(4);</div><div class="line">	tree-&gt;left-&gt;right = new Node(5);</div><div class="line">	tree-&gt;random = tree-&gt;left-&gt;right;</div><div class="line">	tree-&gt;left-&gt;left-&gt;random = tree;</div><div class="line">	tree-&gt;left-&gt;right-&gt;random = tree-&gt;right;</div><div class="line">*/</div><div class="line">	Node *tree = <span class="keyword">new</span> Node(<span class="number">10</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n2 = <span class="keyword">new</span> Node(<span class="number">6</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n3 = <span class="keyword">new</span> Node(<span class="number">12</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n4 = <span class="keyword">new</span> Node(<span class="number">5</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n5 = <span class="keyword">new</span> Node(<span class="number">8</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n6 = <span class="keyword">new</span> Node(<span class="number">11</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n7 = <span class="keyword">new</span> Node(<span class="number">13</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n8 = <span class="keyword">new</span> Node(<span class="number">7</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    Node *n9 = <span class="keyword">new</span> Node(<span class="number">9</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">    tree-&gt;left = n2;</div><div class="line">    tree-&gt;right = n3;</div><div class="line">    tree-&gt;random = n2;</div><div class="line">    n2-&gt;left = n4;</div><div class="line">    n2-&gt;right = n5;</div><div class="line">    n2-&gt;random = n8;</div><div class="line">    n3-&gt;left = n6;</div><div class="line">    n3-&gt;right = n7;</div><div class="line">    n3-&gt;random = n5;</div><div class="line">    n4-&gt;random = n9;</div><div class="line">    n5-&gt;left = n8;</div><div class="line">    n5-&gt;right = n9;</div><div class="line">    n5-&gt;random = tree;</div><div class="line">    n6-&gt;random = n9;</div><div class="line">    n9-&gt;random = n8;</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"traversal of original binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	printInorder(tree);</div><div class="line"></div><div class="line">	Node *clone = cloneTree(tree);</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"\n\ntraversal of cloned binary tree is: "</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	printInorder(clone);</div><div class="line"></div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´&quot;&gt;&lt;a href=&quot;#ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´&quot;&gt;&lt;/a&gt;ä¸€ã€åŒ…å«éšæœºæŒ‡é’ˆçš„å•é“¾è¡¨çš„æ·±åº¦æ‹·è´&lt;/h3&gt;&lt;p&gt;æœ€è¿‘é‡åˆ°ä¸€é“å¾ˆæœ‰è¶£çš„
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="algorithm" scheme="http://blog.yinwoods.work/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>é¦–å°¾æŒ‡é’ˆæ³•</title>
    <link href="http://blog.yinwoods.work/2016/10/16/%E9%A6%96%E5%B0%BE%E6%8C%87%E9%92%88%E6%B3%95/"/>
    <id>http://blog.yinwoods.work/2016/10/16/é¦–å°¾æŒ‡é’ˆæ³•/</id>
    <published>2016-10-15T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å°¾æŒ‡é’ˆæ³•å¤šåº”ç”¨äºåœ¨å·²æ’åºçš„æ•°ç»„ä¸­å®ç°O(N)çš„æŸ¥æ‰¾ã€‚</p>
<p>ä¾‹å¦‚ï¼šç»™å®šä¸€ä¸ªæ•´æ•°kï¼Œå¯¹äºä¸¤ä¸ªé€’å¢æ•°ç»„ï¼Œæ‰¾åˆ°(i, j)ä½¿å¾— a ä¸­çš„ i ä½ç½®ä¸ b ä¸­çš„ j ä½ç½®æ»¡è¶³ a[i] + b[j] = kã€‚<br>å¯¹äºè¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥å– a ä¸­çš„ç¬¬iä½åŠ b ä¸­ç¬¬jä½ï¼Œä¾æ¬¡ç›¸åŠ å¹¶æ ¹æ®ç›¸åŠ ç»“æœä¸æ•°å€¼ k çš„å¤§å°æ¥å†³å®ši, jçš„ç§»åŠ¨æ–¹å‘ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>#!CPP
while (i &lt; a.size()) {
    while(a[i] + b[j] &gt; X &amp;&amp; j &gt; 0) j--;
    if (a[i] + b[j] == X) writeAnswer(i, j);
    i++;
}
</code></pre><p>é—®é¢˜å˜å½¢ï¼š</p>
<p>1ã€å¯¹äºæ— é‡å¤å…ƒç´ çš„æ•°ç»„ aï¼Œé—®å­˜åœ¨å¤šå°‘ç§ä¸‰ä¸ªæ•°ç›¸åŠ ï¼Œå’Œä¸ºå®šå€¼kçš„æƒ…å†µã€‚</p>
<blockquote>
<p>è§£ç­”ï¼šå…ˆå¯¹æ•°ç»„æ’åºï¼Œå¤–éƒ¨å¾ªç¯éå†aï¼Œå¹¶åœ¨å¾ªç¯å†…éƒ¨æ‰¾a[p] + a[q] = k - a[i]çš„æƒ…å†µã€‚å…¶ä¸­ p,q çš„å¯»æ‰¾å³åˆ©ç”¨é¦–å°¾æŒ‡é’ˆæ³•ã€‚</p>
</blockquote>
<p>2ã€å¯¹äºæ— é‡å¤å…ƒç´ çš„æ•°ç»„ aï¼Œé—®å­˜åœ¨å¤šå°‘ç§ä¸¤ä¸ªæ•°ç›¸å‡ï¼Œå’Œä¸ºå®šå€¼kçš„æƒ…å†µã€‚</p>
<blockquote>
<p>è§£ç­”ï¼šå…ˆå¯¹æ•°ç»„æ’åºï¼Œå¤–éƒ¨å¾ªç¯éå†aï¼Œåˆ¤æ–­a[i] + kæ˜¯å¦åœ¨æ•°ç»„aä¸­å³å¯ï¼Œåˆ¤æ–­å¯ä»¥åˆ©ç”¨setæ¥å®ç°log(N)çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ã€‚</p>
<p>è§£ç­”ï¼š æ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯å–i = 0, j = 1, å½“ a[j] - a[i] &gt; k æ—¶ï¼Œ++iï¼›å½“a[j] - a[i] &lt; kæ—¶ï¼Œ++j;</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¦–å°¾æŒ‡é’ˆæ³•å¤šåº”ç”¨äºåœ¨å·²æ’åºçš„æ•°ç»„ä¸­å®ç°O(N)çš„æŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šç»™å®šä¸€ä¸ªæ•´æ•°kï¼Œå¯¹äºä¸¤ä¸ªé€’å¢æ•°ç»„ï¼Œæ‰¾åˆ°(i, j)ä½¿å¾— a ä¸­çš„ i ä½ç½®ä¸ b ä¸­çš„ j ä½ç½®æ»¡è¶³ a[i] + b[j] = kã€‚&lt;br&gt;å¯¹äºè¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥å– a ä¸­çš„ç¬¬iä½åŠ b ä¸­ç¬¬
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="algorithm" scheme="http://blog.yinwoods.work/tags/algorithm/"/>
    
  </entry>
  
  <entry>
    <title>åç¼€æ•°ç»„(suffix Array)å­¦ä¹ </title>
    <link href="http://blog.yinwoods.work/2016/10/16/%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0/"/>
    <id>http://blog.yinwoods.work/2016/10/16/åç¼€æ•°ç»„å­¦ä¹ /</id>
    <published>2016-10-15T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-åç¼€ï¼ˆSuffixï¼‰"><a href="#ä»€ä¹ˆæ˜¯-åç¼€ï¼ˆSuffixï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯ åç¼€ï¼ˆSuffixï¼‰"></a>ä»€ä¹ˆæ˜¯ åç¼€ï¼ˆSuffixï¼‰</h3><p>Sæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º N çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®šä¹‰Sçš„ç¬¬ i ä¸ªåç¼€å°±æ˜¯Sçš„å­ä¸² <code>S[i...n-1]</code></p>
<h3 id="ä»€ä¹ˆæ˜¯-åç¼€æ•°ç»„ï¼ˆSuffix-Arrayï¼‰"><a href="#ä»€ä¹ˆæ˜¯-åç¼€æ•°ç»„ï¼ˆSuffix-Arrayï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯ åç¼€æ•°ç»„ï¼ˆSuffix Arrayï¼‰"></a>ä»€ä¹ˆæ˜¯ åç¼€æ•°ç»„ï¼ˆSuffix Arrayï¼‰</h3><p>åç¼€æ•°ç»„ä½œä¸ºä¸€ç§æ•°æ®ç»“æ„ï¼Œè¢«å¹¿æ³›åº”ç”¨äºæ•°æ®å‹ç¼©ã€ç”Ÿç‰©ä¿¡æ¯å­¦ç­‰é¢†åŸŸã€‚é€šä¿—åœ°è¯´åç¼€æ•°ç»„è¢«åº”ç”¨äº<code>ä»»ä½•å¤„ç†å­—ç¬¦ä¸²ä¸å­—ç¬¦ä¸²åŒ¹é…çš„åœºåˆ</code>ã€‚</p>
<p>åç¼€æ•°ç»„æ˜¯å„ä¸ªæ’åºåçš„åç¼€çš„èµ·å§‹ä½ç½®ç»„æˆçš„æ•°ç»„ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>å½“ S = abaab æ—¶ã€‚</p>
<p>æ‰€æœ‰çš„åç¼€å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">0.</span> abaab</div><div class="line"><span class="number">1.</span> baab</div><div class="line"><span class="number">2.</span> aab</div><div class="line"><span class="number">3.</span> ab</div><div class="line"><span class="number">4.</span> b</div></pre></td></tr></table></figure>
<p>ä¾æ®å­—ç¬¦ä¸²çš„æ¯”è¾ƒå¯¹åç¼€è¿›è¡Œæ’åºåå¾—åˆ°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">2.</span> aab</div><div class="line"><span class="number">3.</span> ab</div><div class="line"><span class="number">0.</span> abaab</div><div class="line"><span class="number">4.</span> b</div><div class="line"><span class="number">1.</span> baab</div></pre></td></tr></table></figure>
<p>å› æ­¤å­—ç¬¦ä¸²Sçš„åç¼€æ•°ç»„ä¸ºï¼š <code>(2, 3, 0, 4, 1)</code></p>
<h3 id="åç¼€æ•°ç»„çš„æ„é€ "><a href="#åç¼€æ•°ç»„çš„æ„é€ " class="headerlink" title="åç¼€æ•°ç»„çš„æ„é€ "></a>åç¼€æ•°ç»„çš„æ„é€ </h3><h4 id="O-N2logN-æ„é€ æ³•"><a href="#O-N2logN-æ„é€ æ³•" class="headerlink" title="O(N2logN)  æ„é€ æ³•"></a>O(N2logN)  æ„é€ æ³•</h4><p>è¿™æ˜¯æœ€æœ´ç´ çš„æ„é€ æ–¹æ³•æ•ˆç‡ï¼Œå³è·å–æ‰€æœ‰åç¼€å¹¶ä½¿ç”¨O(NlogN)çš„æ’åºç®—æ³•å¦‚å¿«æ’æˆ–è€…åˆå¹¶æ’åºå¯¹è¿™äº›åç¼€è¿›è¡Œæ’åºã€‚è€Œæ„é€ æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N2logN)è€Œä¸æ˜¯O(NlogN)çš„åŸå› æ˜¯æ’åºè¿‡ç¨‹ä¸­ä¸¤ä¸ªåç¼€çš„æ¯”è¾ƒå¤æ‚åº¦ä¸ºO(N)ã€‚ä¸‹é¢æˆ‘ä»¬å°†æŠŠæ¯”è¾ƒçš„å¤æ‚åº¦ä»O(N)é™ä¸ºO(logN)ã€‚</p>
<h4 id="O-N-log2-N-æ„é€ æ³•"><a href="#O-N-log2-N-æ„é€ æ³•" class="headerlink" title="O(N log2 N) æ„é€ æ³•"></a>O(N log2 N) æ„é€ æ³•</h4><p>æ¯”è¾ƒçš„å¤æ‚åº¦èƒ½å¤Ÿä»O(N)é™ä¸ºO(logN)ä¾èµ–äºåç¼€çš„ç‰¹æ€§ï¼šè¿™äº›åç¼€å¹¶ä¸æ˜¯éšæœºçš„ï¼Œè€Œæ˜¯åŒå±äºä¸€ä¸ªå­—ç¬¦ä¸²çš„åç¼€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›åç¼€æœ‰ç›¸åŒçš„å…¬å…±éƒ¨åˆ†å¯ä»¥ä¾›æˆ‘ä»¬åˆ©ç”¨ã€‚</p>
<p>ä¸‹é¢ç”¨ç¤ºä¾‹è¯´æ˜ã€‚æˆ‘ä»¬ä»¥æ‰€æœ‰åç¼€çš„é¦–å­—æ¯ä¸ºåŸºå‡†æ’åºï¼Œå¹¶å¯¹è¿™äº›é¦–å­—æ¯èµ‹äºˆä¸€ä¸ª rank å€¼ä»£è¡¨ä»–ä»¬ä¹‹é—´çš„å¤§å°å…³ç³»ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">0.</span> a|baab</div><div class="line"><span class="number">0.</span> a|ab</div><div class="line"><span class="number">0.</span> a|b</div><div class="line"><span class="number">1.</span> b|aab</div><div class="line"><span class="number">1.</span> b|</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šï¼Œä»¥ | å·¦ä¾§å­—ç¬¦ä¸²ä¸ºæ¯”è¾ƒåŸºå‡†ï¼Œå­—ç¬¦ä¸²å‰çš„æ•°å­—è¡¨ç¤º | å·¦ä¾§å­—ç¬¦ä¸²å¯¹åº”çš„ rankã€‚ç”±æ­¤ï¼Œrank(a) = 0ï¼Œ rank(b) = 1ã€‚</p>
<p>æˆ‘ä»¬å–ä¸¤ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæ¯”è¾ƒåˆ†ä¸¤æ­¥ã€‚é¦–å…ˆæ¯”è¾ƒç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœç›¸ç­‰åˆ™ç»§ç»­æ¯”è¾ƒç¬¬äºŒä¸ªå­—ç¬¦ã€‚</p>
<p>1ã€å¯¹äº abaab å’Œ baabï¼Œå› ä¸ºäºŒè€…é¦–å­—æ¯ rank å€¼å·²çŸ¥ä¸”ä¸åŒï¼Œå› æ­¤ abaab æ’åºåœ¨ baab ä¹‹å‰ã€‚</p>
<p>2ã€å¯¹äº abaab å’Œ aabï¼Œå› ä¸ºè€Œè¿™é¦–å­—æ¯ rank å€¼å·²çŸ¥ä¸”ç›¸åŒï¼Œå› æ­¤ç»§ç»­çœ‹ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä¸¤è€…çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸åŒä¸” rank å€¼å·²çŸ¥ï¼Œæ‰€ä»¥ aab æ’åœ¨ abaab ä¹‹å‰ã€‚</p>
<p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªæ­¥éª¤çš„è§£æå¯ä»¥å‘ç°ï¼Œåœ¨æ¯”è¾ƒæ‰€æœ‰åç¼€çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¹‹åï¼Œæˆ‘ä»¬å°±å·²ç»è·å¾—äº†æ•´ä¸ªå­—ç¬¦ä¸² S çš„æ‰€æœ‰å­—ç¬¦çš„ rank å€¼ã€‚ï¼ˆå› ä¸ºæ‰€æœ‰åç¼€çš„é¦–å­—ç¬¦ç»„åœ¨ä¸€èµ·æ°å¥½ä¸ºå­—ç¬¦ä¸²Sï¼Œè”æƒ³åç¼€çš„å®šä¹‰å³Sä»i(0 &lt;= i &lt; len(s))åˆ°Sçš„æœ€åä¸€ä¸ªå­—ç¬¦æ‰€ç»„æˆçš„å­—ç¬¦ä¸²é›†åˆï¼‰</p>
<p>å¯¹äºæ²¡æœ‰ç¬¬äºŒä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æˆ‘ä»¬è®¤ä¸ºå®ƒçš„ç¬¬äºŒéƒ¨åˆ† rank å€¼ä¸ºæœ€å°å€¼ï¼Œè¿™é‡Œè®¾å…¶ä¸º-1ã€‚ä¾‹å¦‚ b åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤å®ƒçš„å‰ä¸¤ä¸ªå­—ç¬¦ rank å¯¹å°±ä¸ºï¼ˆ1ï¼Œ -1ï¼‰</p>
<p>ç°åœ¨æˆ‘ä»¬å°è¯•ä»¥ä¸¤ä¸ªå­—ç¬¦ä½œä¸ºæ¯”è¾ƒåŸºå‡†ï¼Œæœ‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">0.</span> aa|b</div><div class="line"><span class="number">1.</span> ab|aab</div><div class="line"><span class="number">1.</span> ab|</div><div class="line"><span class="number">2.</span> b|</div><div class="line"><span class="number">2.</span> ba|ab</div></pre></td></tr></table></figure>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯¹äºå­—ç¬¦ä¸²ä¸‹æ¬¡æ¯”è¾ƒï¼Œæˆ‘ä»¬é€‰å–4ä¸ªå­—ç¬¦ï¼Œè€Œ4ä¸ªå­—ç¬¦çš„æ¯”è¾ƒåˆå¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå‰ä¸¤ä¸ªå­—ç¬¦å’Œåä¸¤ä¸ªå­—ç¬¦ã€‚è¿™åˆå›åˆ°äº†ä¸Šä¸€æ­¥çš„è¿‡ç¨‹ã€‚å› æ­¤æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬åªéœ€æ¯”è¾ƒå‰1ã€2ã€4ã€8ã€â€¦ã€log(len(s))ä¸ªå­—ç¬¦ã€‚</p>
<p>ä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"bits/stdc++.h"</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"> </div><div class="line"><span class="comment">// suffixRank ä¿å­˜æ¯æ¬¡éå†è¿‡ç¨‹ä¸­æ¯ä¸ªå­—ç¬¦ä¸²çš„Rankå€¼ </span></div><div class="line"><span class="comment">// suffixRank[i][j] ä»£è¡¨ç¬¬ i æ¬¡éå†ï¼Œç¬¬ j ä¸ªåç¼€çš„ rank </span></div><div class="line"></div><div class="line"><span class="keyword">int</span> suffixRank[<span class="number">20</span>][<span class="keyword">int</span>(<span class="number">1E6</span>)];</div><div class="line"></div><div class="line"><span class="comment">// ç¤ºä¾‹ï¼š "abaab" </span></div><div class="line"><span class="comment">// å¯¹åº”çš„åç¼€æ•°ç»„ï¼š (2, 3, 0, 4, 1) </span></div><div class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªä¿å­˜æ¯ä¸ªåç¼€ rank å€¼åºåˆ—çš„ç»“æ„ä½“ã€‚ </span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">myTuple</span> &#123;</span>  </div><div class="line">    <span class="keyword">int</span> originalIndex;   <span class="comment">// ä¿å­˜åŸå§‹åç¼€é¦–å­—æ¯çš„åºåˆ—å·</span></div><div class="line">    <span class="keyword">int</span> firstHalf;       <span class="comment">// ä¿å­˜åç¼€å‰åŠéƒ¨åˆ†çš„ rank å€¼</span></div><div class="line">    <span class="keyword">int</span> secondHalf;      <span class="comment">// ä¿å­˜åç¼€ååŠéƒ¨åˆ†çš„ rank å€¼</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// åç¼€æ¯”è¾ƒå‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦O(1)</span></div><div class="line"><span class="comment">// é¦–å…ˆ a çš„ firstHalf æ˜¯å¦ä¸ b çš„ firstHalf ç›¸ç­‰</span></div><div class="line"><span class="comment">// å¦‚æœç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒ secondHalf</span></div><div class="line"><span class="comment">// å¦åˆ™æ¯”è¾ƒç»“æœå–å†³äº firstHalf çš„ rank å€¼å¤§å°</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(myTuple a, myTuple b)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span>(a.firstHalf == b.firstHalf) <span class="keyword">return</span> a.secondHalf &lt; b.secondHalf;  </div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> a.firstHalf &lt; b.firstHalf;  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="comment">// è¾“å…¥å­—ç¬¦ä¸² S </span></div><div class="line">	<span class="comment">// ä¿å­˜ S çš„é•¿åº¦åˆ° N ä¸­</span></div><div class="line"></div><div class="line">    <span class="built_in">string</span> s; <span class="built_in">cin</span> &gt;&gt; s;</div><div class="line">    <span class="keyword">int</span> N = s.size();</div><div class="line">	</div><div class="line">	<span class="comment">// åˆå§‹åŒ– æ¯ä¸ªåç¼€çš„é¦–å­—æ¯ rank å€¼ä½œä¸ºå¯¹åº”åç¼€çš„ rank å€¼ </span></div><div class="line">	<span class="comment">// å¯¹äºå•å­—æ¯ rank å€¼ï¼Œä»¥è¯¥å­æ¯ä¸ a å·®è·ä½œä¸º rankï¼Œå› æ­¤ 'a' = 0, 'b' = 1, 'c' = 2, ... ,'z' = 25</span></div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</div><div class="line">        suffixRank[<span class="number">0</span>][i] = s[i] - <span class="string">'a'</span>;</div><div class="line"></div><div class="line">	<span class="comment">// åˆ›å»ºæ¯ä¸ªåç¼€çš„ å…ƒç»„ æ•°ç»„</span></div><div class="line"></div><div class="line">    myTuple L[N];</div><div class="line">	</div><div class="line">	<span class="comment">// éå† log(n) æ¬¡ï¼Œç›´åˆ°æ‰€æœ‰çš„åç¼€æ’åºå®Œæ¯•</span></div><div class="line">	<span class="comment">// 'stp' ä¿å­˜å½“å‰éå†æ¬¡æ•°</span></div><div class="line">	<span class="comment">// 'cnt' ä¿å­˜å°†è¢«æ¯”è¾ƒçš„åç¼€é•¿åº¦ </span></div><div class="line"></div><div class="line">	<span class="comment">// æ¯æ¬¡éå†ï¼Œ æˆ‘ä»¬ç”¨ä¸Šä¸€æ¬¡éå†è·å¾—çš„å€¼åˆå§‹åŒ–æ¯ä¸ªåç¼€æ•°ç»„çš„å…ƒç»„</span></div><div class="line">	</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cnt = <span class="number">1</span>, stp = <span class="number">1</span>; cnt &lt; N; cnt *= <span class="number">2</span>, ++stp) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</div><div class="line">            L[i].firstHalf = suffixRank[stp - <span class="number">1</span>][i];</div><div class="line">            L[i].secondHalf = i + cnt &lt; N ? suffixRank[stp - <span class="number">1</span>][i + cnt] : <span class="number">-1</span>;</div><div class="line">            L[i].originalIndex = i;</div><div class="line">        &#125;</div><div class="line">		</div><div class="line">		<span class="comment">// ä»¥ å…ƒç»„ ä¸ºåŸºå‡†å¯¹ å…ƒç»„æ•°ç»„ æ’åº</span></div><div class="line"></div><div class="line">        sort(L, L + N, cmp);</div><div class="line">		</div><div class="line">		<span class="comment">// æ’åºåï¼Œå¦æ’åºæœ€é å‰çš„ rank å€¼åˆå§‹åŒ–ä¸º0 </span></div><div class="line">        <span class="comment">// Initialize rank for rank 0 suffix after sorting to its original index</span></div><div class="line">        <span class="comment">// in suffixRank array</span></div><div class="line"></div><div class="line">        suffixRank[stp][L[<span class="number">0</span>].originalIndex] = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>, currRank = <span class="number">0</span>; i &lt; N; ++i) &#123;</div><div class="line">			</div><div class="line">			<span class="comment">// æ¯”è¾ƒç¬¬ i ä¸ªåç¼€å’Œç¬¬ i-1 ä¸ªåç¼€</span></div><div class="line">			<span class="comment">// å¦‚æœäºŒè€…ç›¸ç­‰ï¼Œåˆ™å°†ç¬¬ i-1 ä¸ªåç¼€çš„ rank å€¼èµ‹ç»™ç¬¬ i ä¸ªåç¼€</span></div><div class="line">			<span class="comment">// å¦åˆ™ç¬¬ i ä¸ªåç¼€çš„ rank ä¸ºç¬¬ i-1 ä¸ªåç¼€çš„ rank å€¼åŠ 1 </span></div><div class="line"></div><div class="line">            <span class="keyword">if</span>(L[i - <span class="number">1</span>].firstHalf != L[i].firstHalf || L[i - <span class="number">1</span>].secondHalf != L[i].secondHalf)</div><div class="line">                ++currRank;</div><div class="line"></div><div class="line">            suffixRank[stp][L[i].originalIndex] = currRank;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// è¾“å‡ºåç¼€æ•°ç»„ </span></div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i) <span class="built_in">cout</span> &lt;&lt; L[i].originalIndex &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åç¼€æ•°ç»„çš„åº”ç”¨"><a href="#åç¼€æ•°ç»„çš„åº”ç”¨" class="headerlink" title="åç¼€æ•°ç»„çš„åº”ç”¨"></a>åç¼€æ•°ç»„çš„åº”ç”¨</h3><p>1ã€ç»“åˆLCPï¼ˆLongest Common Prefixï¼‰</p>
<p>2ã€æ¨¡å¼åŒ¹é…</p>
<p>3ã€ æŸ¥æ‰¾æœ€é•¿é‡å¤å­ä¸²</p>
<p>4ã€ æŸ¥æ‰¾æœ€é•¿å…¬å…±å­ä¸²</p>
<p>5ã€ æŸ¥æ‰¾æœ€é•¿å›æ–‡å­ä¸²</p>
<h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p>1ã€<a href="https://www.hackerrank.com/challenges/string-function-calculation/topics/two-pointer-technique" target="_blank" rel="external">String Function Calculation Topics</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-åç¼€ï¼ˆSuffixï¼‰&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-åç¼€ï¼ˆSuffixï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ åç¼€ï¼ˆSuffixï¼‰&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ åç¼€ï¼ˆSuffixï¼‰&lt;/h3&gt;&lt;p&gt;Sæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º N çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®šä¹‰Sçš„ç¬¬
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="algorithm, data structure" scheme="http://blog.yinwoods.work/tags/algorithm-data-structure/"/>
    
  </entry>
  
  <entry>
    <title>å®ä¹ æ€»ç»“</title>
    <link href="http://blog.yinwoods.work/2016/09/26/%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    <id>http://blog.yinwoods.work/2016/09/26/å®ä¹ æ€»ç»“/</id>
    <published>2016-09-25T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»2015å¹´1æœˆåº•åˆ°2016å¹´8æœˆåº•åœ¨æŸäºŒæ‰‹è½¦æœåŠ¡å¹³å°å…¬å¸åŒ—äº¬ç ”å‘éƒ¨å®ä¹ äº†ä¹Ÿç®—æœ‰åŠå¹´çš„æ—¶é—´ï¼ˆå»é™¤ä¸­é—´å›æ ¡ç­”è¾©çš„ä¸€ä¸ªæœˆï¼‰ï¼Œä»åˆšè¿›å…¥å›¢é˜Ÿæ—¶çš„å››äº”ä¸ªäººåˆ°ç¦»å¼€æ—¶çš„20+äººé˜Ÿä¼ï¼Œä¹Ÿç®—æ˜¯ä»ä¸€ä¸ªå®ä¹ ç”Ÿè§’åº¦è§è¯äº†ä¸€ä¸ªå…¬å¸çš„æˆé•¿è¿‡ç¨‹ã€‚</p>
<h3 id="å®ä¹ ä¹‹åˆï¼š"><a href="#å®ä¹ ä¹‹åˆï¼š" class="headerlink" title="å®ä¹ ä¹‹åˆï¼š"></a>å®ä¹ ä¹‹åˆï¼š</h3><p>æ¥æ‰‹çš„å·¥ä½œæ˜¯å°½å¯èƒ½å¤šåœ°åŒ¹é…ä¸¤ä¸ªè½¦å‹åº“ä¸­çš„è½¦å‹ï¼Œæé«˜è½¦å‹åŒ¹é…ç‡ã€‚è¯´å®è¯è¿™ä¸ªå·¥ä½œæˆ‘åšåœ°å¾ˆç—›è‹¦ï¼Œå› ä¸ºç”¨C++å†™çš„ï¼Œæœ¬èº«å¼€å‘é€Ÿåº¦å°±æ¯”è¾ƒæ…¢ï¼Œè€Œä¸”åˆšè¿›å…¥å›¢é˜Ÿä¸€æ–¹é¢æ˜¯æƒ³å±•ç°å‡ºè‡ªå·±çš„å®åŠ›ï¼›å¦ä¸€æ–¹é¢å›¢é˜Ÿé¢†å¯¼ä¹Ÿå¯¹æˆ‘ä¸å¤Ÿä¿¡ä»»ï¼Œç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯ä»–ä»¬è®¤ä¸ºæˆ‘åœ¨å·æ‡’ï¼Œè€Œäº‹å®æ˜¯æˆ‘æŠ•å…¥äº†å¤§é‡çš„æ—¶é—´åœ¨å…¶ä¸­ã€‚å†™å®Œäº†ä¸€ç‰ˆä¹‹åå°±ä¼šå‘ç°æœ‰å„ç§caseè¦å•ç‹¬å¤„ç†ï¼Œå½“ç„¶å‡ºç°è¿™ç§é—®é¢˜å¾ˆå¤§çš„åŸå› æ˜¯æˆ‘åœ¨åŠ¨æ‰‹å†™é¡¹ç›®ä¹‹å‰æ²¡æœ‰è®¤çœŸè€ƒè™‘è¿‡æ•´ä¸ªé¡¹ç›®çš„ç»“æ„ä»¥åŠå„ç§å¯èƒ½ä¼šé¢å¯¹çš„caseï¼Œè¿™åº”è¯¥å½’å› äºæˆ‘çš„ç»éªŒé—®é¢˜ï¼Œè€Œä¸æ˜¯èƒ½åŠ›é—®é¢˜ã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™æ‘†åœ¨é¢å‰çš„é€‰æ‹©æœ‰ï¼š</p>
<p>1ã€åœ¨ç¨‹åºä¸­åŠ å„ç§åˆ¤æ–­è¯­å¥é’ˆå¯¹å¤„ç†ï¼›</p>
<p>2ã€ä»£ç é‡æ„ï¼›</p>
<p>å°±æˆ‘ä¸ªäººè€Œè¨€æˆ‘æ›´å€¾å‘äºä»£ç é‡æ„ï¼Œå› ä¸ºèƒ½å¤Ÿé‡æ–°ç†æ¸…æ€è·¯ï¼Œé¿å…åç»­å‡ºç°çš„å¾ˆå¤šå‘ã€‚ä½†æ˜¯ç”±äºä¸šåŠ¡éœ€è¦ï¼Œbossä»¬æ›´å€¾å‘äºæˆ‘å¿«äº›äº¤ä»˜ï¼Œå› æ­¤å°±åªèƒ½åƒæ‰“è¡¥ä¸ä¸€æ ·å¾€åŸä»£ç é‡Œé¢åŠ å„ç§å¤„ç†ï¼Œå¯¼è‡´æœ€åæ•´ä¸ªä»£ç æ”¹èµ·æ¥ç‰¹åˆ«åƒåŠ›ï¼Œæ¯å¤©èŠ±è´¹å¤§æŠŠçš„æ—¶é—´æŠ•å…¥å…¶ä¸­è€Œå–å¾—çš„æ•ˆæœå´å¾®ä¹å…¶å¾®ã€‚è€Œä¸”bossçš„æƒ³æ³•æ€»æ˜¯æƒ³ä¸€å‡ºæ˜¯ä¸€å‡ºï¼Œéœ€æ±‚æ¥å›å˜æ¢è€Œæˆ‘åˆä¸èƒ½é‡æ„ä»£ç ã€‚é‚£æ®µæ—¶é—´è‡ªå·±ä¹Ÿå¾ˆç—›è‹¦ï¼Œåæ¥å‘bossæ˜ç¡®è¡¨ç¤ºè‡ªå·±ä¸æƒ³å†åšè¿™æ–¹é¢çš„å·¥ä½œäº†ã€‚å¹¸å¥½bossä¹Ÿè¡¨ç¤ºç†è§£ï¼Œå¹¶ä¸”è¿™é¡¹å·¥ä½œä¹Ÿè¯æ˜äº†å¾ˆéš¾èµ°å¾—é€šï¼ˆ <strong> åŸå› ï¼šä¸¤ä¸ªè½¦å‹åº“çš„è½¦å‹å‘½åå·®å¼‚å¤ªå¤§ï¼Œå¾ˆéš¾æå–å…±é€šä¹‹å¤„ã€‚ </strong> ï¼‰</p>
<h3 id="å®ä¹ ä¹‹ä¸­ï¼š"><a href="#å®ä¹ ä¹‹ä¸­ï¼š" class="headerlink" title="å®ä¹ ä¹‹ä¸­ï¼š"></a>å®ä¹ ä¹‹ä¸­ï¼š</h3><p>å› ä¸ºè½¦å‹åŒ¹é…è¿™æ¡è·¯èµ°ä¸é€šåŠ ä¸Šæˆ‘æ˜ç¡®è¡¨ç¤ºè¿™é¡¹å·¥ä½œè®©æˆ‘è§‰å¾—å¾ˆç—›è‹¦ï¼Œå› æ­¤bossç»™æˆ‘åˆ†é…çš„æ–°ä»»åŠ¡æ˜¯çˆ¬è™«ï¼Œçˆ¬å–å„å¤§è½¦ä¸Šç½‘ç«™çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯æ¯æ¬¾è½¦çš„é…ç½®ä»·æ ¼ç­‰æ•°æ®ï¼‰ã€‚åœ¨è¿™ä¹‹å‰æˆ‘å­¦ä¹ è¿‡ä¸€æ®µæ—¶é—´çš„pythonï¼Œç®—æ˜¯å…¥é—¨ï¼Œå…¶ä¸­ä¹Ÿæ¶‰åŠåˆ°äº†åŸºç¡€çš„çˆ¬è™«æŠ“å–ï¼Œæ‡‚å¾—urllibä»¥åŠbeautifulsoupçš„ä½¿ç”¨ã€‚åˆšåˆšæ¥æ‰‹è¿™ä¸ªå·¥ä½œè¿˜æ˜¯å¾ˆæƒ¶æçš„ï¼Œå¥½åœ¨bossè¡¨ç¤ºäº¤ç»™æˆ‘çš„ä»»åŠ¡æ˜¯å°è¯•æ€§çš„ï¼Œèƒ½å¤Ÿçˆ¬å–æ›´å¥½ï¼Œä¸èƒ½çˆ¬å–çš„è¯å†æƒ³åˆ«çš„æ–¹æ³•ã€‚ä¹Ÿæ­£æ˜¯ä»è¿™é‡Œå¼€å§‹äº†æˆ‘è¾¹å­¦ä¹ è¾¹å†™çˆ¬è™«çš„å®ä¹ ä¹‹è·¯ã€‚</p>
<p>èµ·åˆåˆšæ¥æ‰‹çš„æ˜¯<a href="http://www.carking001.com/" target="_blank" rel="external">è½¦ç‹ç½‘</a>,è®°å¾—å¥½åƒæ²¡æœ‰ä»€ä¹ˆé˜²çˆ¬æªæ–½ï¼Œå› æ­¤å¤§æ¦‚èŠ±äº†ä¸€å‘¨çš„æ—¶é—´é¡ºåˆ©åœ°å®Œæˆäº†çˆ¬å–å·¥ä½œï¼Œbossä¹Ÿå¯¹æˆ‘å®Œæˆçš„å·¥ä½œæ¯”è¾ƒæ»¡æ„ï¼Œåé¢å°±ç»™æˆ‘å¸ƒç½®äº†çˆ¬å–<a href="http://www.che300.com/" target="_blank" rel="external">è½¦300</a>çš„å·¥ä½œã€‚è¯´åˆ°è¿™é‡Œå°±è¦æåˆ°ä¸€ä»¶æ¯”è¾ƒæœ‰è¶£çš„äº‹äº†ï¼Œå› ä¸ºè¦æ±‚æˆ‘å†™çš„çˆ¬è™«åªéœ€è¦æŠŠç›¸åº”ç½‘ç«™çš„è½¦å‹åº“æ•´ä½“çˆ¬ä¸‹æ¥ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯åŠ¨æ€æ›´æ–°ï¼Œå› æ­¤å†™å¾—æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸æ¶‰åŠå¹¶è¡Œæ“ä½œï¼Œè€Œæ¯ä¸ªè½¦å‹éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„idï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥å¯åŠ¨å¤šä¸ªpythonçˆ¬è™«è„šæœ¬ï¼Œæ¯ä¸ªè„šæœ¬çˆ¬å–ä¸€ä¸ªidèŒƒå›´å†…çš„è½¦å‹ä¿¡æ¯ï¼Œè¿™æ ·ä¹Ÿç®—æ˜¯ä»æŸç§è§’åº¦ä¸Šå®ç°äº†å¹¶è¡Œçˆ¬å–ã€‚åˆšå¥½bosså½“æ—¶å¯¹è½¦300æ•°æ®è¦çš„æ¯”è¾ƒæ€¥ï¼Œå°±è®©æˆ‘åŒæ—¶å¯åŠ¨10ä¸ªè„šæœ¬ä¸€èµ·çˆ¬ï¼Œè¿™æ ·ä¸€æ¥é€Ÿåº¦ä¸Šç¡®å®å¿«äº†å¾ˆå¤šã€‚ä½†æ˜¯å› ä¸ºå•ä½æ—¶é—´å†…å¤§é‡è®¿é—®ï¼Œipè¢«å°äº†ã€‚ã€‚ã€‚ä¹Ÿå°±æ˜¯ä»è¿™é‡Œå¼€å§‹å­¦ä¹ äº†å„ç§å-åçˆ¬è™«çš„æŠ€æœ¯ã€‚åé¢åˆçˆ¬äº†<a href="http://www.dpac.gov.cn/" target="_blank" rel="external">å›½å®¶è´¨æ£€æ€»å±€äº§å“ç¼ºé™·ç®¡ç†ä¸­å¿ƒ</a>ï¼Œæ–°æ—§é¡µé¢ç»“æ„å˜åŒ–å¾ˆå¤§ï¼Œä¸”è€æ•°æ®å±•ç¤ºåŠå…¶ä¸è§„èŒƒï¼ä¸è¿‡èŠ±äº†å†™æ—¶é—´æ€»ç®—æ˜¯æ¯”è¾ƒåƒæ ·åœ°å®ç°äº†ã€‚</p>
<p>è¿™æ®µæ—¶é—´å…¬å¸å„é¡¹ä¸šåŠ¡ä¹Ÿå¼€å§‹èµ·æ­¥ï¼Œæ‹›è˜äº†å¾ˆå¤šæ–°äººï¼Œå¹¶è´­ç½®äº†å¾ˆå¤šæœåŠ¡å™¨ã€‚ä½œä¸ºä¸€ä¸ªå®ä¹ ç”Ÿï¼Œè¿è¥ç»´æŠ¤ä¹Ÿå°±æˆäº†æˆ‘å·¥ä½œä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå®ç°ä¸€äº›å®šæ—¶è„šæœ¬ç­‰ç­‰ã€‚è¿™é‡Œä¸å¾—ä¸åæ§½ä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆå¥½å¤šè®¡ç®—æœºä»ä¸šäººå‘˜è¿è£…ç³»ç»Ÿéƒ½ä¸ä¼šå•Šã€‚ã€‚ã€‚</p>
<p>æœŸé—´ä¹Ÿåœ¨å®ä¹ ä¸­å®Œæˆäº†è‡ªå·±çš„æ¯•ä¸šè®¾è®¡ï¼Œå›æ ¡ç­”è¾©ã€‚ï¼ˆçˆ¬è™«è·‘èµ·æ¥æŠ“å–æ•°æ®çš„æ—¶å€™æˆ‘å°±æœ‰æ—¶é—´åŠ¨æ‰‹å†™è‡ªå·±çš„æ¯•è®¾äº†ï¼Œè¿™ä¹Ÿç®—æ˜¯å†™çˆ¬è™«çš„ä¸€ä¸ªç¦åˆ©å§ï¼ï¼‰</p>
<h3 id="å®ä¹ ä¹‹å°¾"><a href="#å®ä¹ ä¹‹å°¾" class="headerlink" title="å®ä¹ ä¹‹å°¾"></a>å®ä¹ ä¹‹å°¾</h3><p>æœ¬æ¥é¢„è®¡å›æ ¡ä¸€å‘¨å®Œæˆç­”è¾©å·¥ä½œçš„ï¼Œæ²¡æƒ³åˆ°æˆ‘ä»¬é™¢ç¡¬ç”Ÿç”Ÿåœ°æ‹–äº†å¤§åŠä¸ªæœˆæ‰å¼€å§‹ç­”è¾©å·¥ä½œ #_#!ã€‚å¯èƒ½æ˜¯ç»è¿‡å‰é¢è¿™æ®µæ—¶é—´çš„é«˜å¼ºåº¦å®ä¹ ï¼Œå¾ˆå¤šçŸ¥è¯†éƒ½æ²¡æœ‰æ—¶é—´æ¶ˆåŒ–ï¼Œå›æ ¡è¿™æ®µä¼‘é—²çš„æ—¶é—´åè€Œæ„Ÿè§‰é¢†ä¼šäº†å¾ˆå¤šä¸œè¥¿ã€‚æœŸé—´ä¹Ÿå¸®åŒå­¦çš„ä¸€ä¸ªå§å§ç¼–å†™äº†ä¸€ä¸ªæ ¡å†…æŠ¢å…ˆé¢„å®šå®éªŒè®¾å¤‡çš„è„šæœ¬ï¼ŒåŠŸèƒ½å€’æ˜¯å®ç°äº†ï¼Œå¯ä»¥å› ä¸ºç”¨çš„æ˜¯ <a href="http://www.seleniumhq.org/" target="_blank" rel="external">selenium</a> + <a href="http://phantomjs.org/" target="_blank" rel="external">phantomjs</a>å¯¼è‡´æœ€åé€Ÿåº¦ä¸Šè¿˜æ²¡æœ‰äººå·¥æ“ä½œå¿«ã€‚ã€‚ã€‚ä¹Ÿç®—æ˜¯èƒæ­»è…¹ä¸­äº†å§ã€‚</p>
<p>ç­”è¾©å®Œæˆåå’Œæœ‹å‹ä»¬ä¸€èµ·å»äº‘å—ç©äº†ä¸€å‘¨ï¼Œåˆå›åˆ°å…¬å¸å®ä¹ ï¼Œç»§ç»­åšçˆ¬è™«ç›¸å…³å·¥ä½œã€‚å®ç°äº†ä¸€ä¸ªå®šæ—¶æŠ“å–<a href="">æ±½è½¦ä¹‹å®¶</a>çš„åŠ¨æ€å¢é‡çˆ¬è™«ï¼Œå¹¶éƒ¨ç½²åˆ°äº†å…¬å¸çš„æœåŠ¡å™¨ä¸Šï¼Œæ¯ä¸ªæœˆåˆå®šæ—¶çˆ¬å–ã€‚</p>
<h3 id="å®ä¹ æ€»ç»“"><a href="#å®ä¹ æ€»ç»“" class="headerlink" title="å®ä¹ æ€»ç»“"></a>å®ä¹ æ€»ç»“</h3><p>å®ä¹ è¿‡ç¨‹ä¸­è‡ªå·±ç¡®å®å­¦åˆ°äº†å¾ˆå¤šï¼Œçœ‹åˆ°äº†ä¸€äº›ä¼˜ç§€ç¨‹åºå‘˜çš„è¿½æ±‚å·²ç»ä¸å†æ˜¯å¤šå°‘å¤šå°‘é’±ï¼Œè€Œæ˜¯åœ¨æ„‰å¿«åœ°å·¥ä½œä¸­å®ç°è‡ªå·±çš„ä»·å€¼ã€‚è®©æˆ‘äº†è§£åˆ°äº†ä¼˜ç§€çš„ç¨‹åºå‘˜æ˜¯æ€ä¹ˆçœ‹å¾…é—®é¢˜ä»¥åŠå¤„ç†é—®é¢˜çš„ã€‚åœ¨è·å–é…¬åŠ³çš„åŒæ—¶ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ä»¥åŠæŠ€æœ¯ï¼Œä»¥åŠä¸€äº›ä¸hrã€bossäº¤æµçš„æ³¨æ„äº‹é¡¹ã€‚ç›¸ä¿¡å¯¹ä»¥åä»äº‹å·¥ä½œåº”è¯¥ä¹Ÿæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>è‡ªå·±ä¹Ÿè®¤çœŸåœ°æ€è€ƒäº†ä¸€ä¸‹å»åˆåˆ›å…¬å¸çš„ä¸€äº›é•¿å¤„å’Œç¼ºç‚¹ï¼Œä»…ä¾›å¤§å®¶å‚è€ƒï¼š</p>
<p>é•¿å¤„ï¼š</p>
<p>1ã€èƒ½å¤Ÿå’Œå¤§ç‰›ä»¬ä¸€èµ·å¹¶è‚©æˆ˜æ–—ï¼Œå¼€æ‹“çœ¼ç•Œï¼›</p>
<p>2ã€å›¢é˜Ÿå·¥ä½œå¼ºåº¦å¤§ï¼Œé”»ç‚¼å¤šï¼Œæˆé•¿é€Ÿåº¦å¿«ï¼›</p>
<p>3ã€ä¸€äººå¤šç”¨ï¼Œè¦åšå„æ–¹é¢çš„å·¥ä½œï¼›ï¼ˆæˆ–è®¸ç®—æ˜¯ç¼ºç‚¹-&gt;_-&gt;ï¼‰</p>
<p>4ã€å’Œé¢†å¯¼æ¥è§¦æœºä¼šå¤šï¼Œèƒ½å¤Ÿçœ‹åˆ°é¢†å¯¼æ˜¯æ€ä¹ˆçœ‹å¾…é—®é¢˜ï¼Œæ€ä¹ˆå¤„ç†çº çº·çš„ï¼›</p>
<p>5ã€äººé™…å…³ç³»ç®€å•ï¼ŒåŒäº‹ç›¸å¤„èµ·æ¥æ²¡æœ‰å¤ªå¤šçº¦æŸï¼›</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>1ã€ç¼ºä¹æœ‰æ•ˆçš„å›¢é˜Ÿç®¡ç†ï¼Œå¼€å‘è¿›åº¦å¾ˆå¤§ç¨‹åº¦ä¸Šé è‡ªæˆ‘çº¦æŸä»¥åŠä¸Šçº§ç£ä¿ƒï¼›</p>
<p>2ã€éœ€æ±‚æ¥å›å˜æ¢ï¼Œå¾€å¾€æƒ³ä¸€å‡ºæ˜¯ä¸€å‡ºï¼Œæ²¡æœ‰ç³»ç»Ÿåœ°æ„æ¶ï¼›</p>
<p>3ã€å¼€å‘å·¥å…·ã€è¯­è¨€æ²¡æœ‰ç»Ÿä¸€è¦æ±‚ï¼Œæ•´ä½“æ¯”è¾ƒæ··ä¹±ï¼›</p>
<p>å›æƒ³èµ·å®ä¹ çš„é‚£æ®µæ—¶é—´ï¼Œè™½ç„¶æ¯”è¾ƒè¾›è‹¦ï¼Œä½†æ•´ä½“è¿˜æ˜¯æ„Ÿè§‰å¾ˆå¿«ä¹ï¼Œè‡ªå·±ä¹Ÿç¡®å®æˆé•¿äº†è®¸å¤šã€‚æ„Ÿè°¢å®ä¹ å…¬å¸ç»™äºˆæˆ‘çš„å®ä¹ æœºä¼šä»¥åŠåŒäº‹ä»¬ç»™äºˆæˆ‘çš„æŒ‡å¯¼å’Œå¸®åŠ©ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»2015å¹´1æœˆåº•åˆ°2016å¹´8æœˆåº•åœ¨æŸäºŒæ‰‹è½¦æœåŠ¡å¹³å°å…¬å¸åŒ—äº¬ç ”å‘éƒ¨å®ä¹ äº†ä¹Ÿç®—æœ‰åŠå¹´çš„æ—¶é—´ï¼ˆå»é™¤ä¸­é—´å›æ ¡ç­”è¾©çš„ä¸€ä¸ªæœˆï¼‰ï¼Œä»åˆšè¿›å…¥å›¢é˜Ÿæ—¶çš„å››äº”ä¸ªäººåˆ°ç¦»å¼€æ—¶çš„20+äººé˜Ÿä¼ï¼Œä¹Ÿç®—æ˜¯ä»ä¸€ä¸ªå®ä¹ ç”Ÿè§’åº¦è§è¯äº†ä¸€ä¸ªå…¬å¸çš„æˆé•¿è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®ä¹ ä¹‹åˆï¼š&quot;&gt;&lt;a href=&quot;
    
    </summary>
    
      <category term="diary" scheme="http://blog.yinwoods.work/categories/diary/"/>
    
    
      <category term="thoughts" scheme="http://blog.yinwoods.work/tags/thoughts/"/>
    
  </entry>
  
  <entry>
    <title>pythonä¸­çš„context manager</title>
    <link href="http://blog.yinwoods.work/2016/08/08/python%E4%B8%AD%E7%9A%84context-manager/"/>
    <id>http://blog.yinwoods.work/2016/08/08/pythonä¸­çš„context-manager/</id>
    <published>2016-08-07T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨è¯»pythonè¿›é˜¶ç±»ä¹¦ç±ã€ŠIntermediate Pythonã€‹ï¼Œçœ‹åˆ°åé¢æœ‰ä¸€ç« è®²åˆ°<code>context manager</code>ï¼Œè®²çš„å¾ˆæµ…ï¼Œæˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ã€‚äºæ˜¯è‡ªå·±æŠ½æ—¶é—´æœé›†äº†ç½‘ä¸Šçš„ä¸€äº›èµ„æ–™ï¼Œæ•´ç†å¦‚ä¸‹ï¼š</p>
<p>pythonä¸­çš„<code>context manager</code>ä¹Ÿå«åšä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ç¡®ä¿ä»£ç å—å§‹ç»ˆèƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„â€˜å–„åâ€™å¤„ç†ã€‚æœ‰ç‚¹åƒjavaä¸­çš„<code>try     ... catch     ... finally     ...</code></p>
<p>å¯¹äºæ‰“å¼€æ–‡ä»¶è¯»å†™ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸‹é¢çš„å®ç°æ–¹å¼æ›´å¥½ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> open(<span class="string">'file'</span>) <span class="keyword">as</span> f:</div><div class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">    	print(line)</div></pre></td></tr></table></figure>
<p>ä½†è¿™ç§æ–¹å¼ä¸ºä»€ä¹ˆæ›´å¥½å‘¢ï¼ŸåŸå› åœ¨äºä½¿ç”¨<code>with</code>å¯ä»¥æ‰§è¡Œ<code>context manager</code>çš„ç›¸åº”å‡½æ•°ï¼Œç¡®ä¿è¢«æ‰“å¼€çš„æ–‡ä»¶å§‹ç»ˆèƒ½å¤Ÿè¢«å…³é—­ã€‚å¦‚æœæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨<code>open()</code>ã€<code>close()</code>åˆ™å¯èƒ½ä¼šå› ä¸ºä¸­é—´ä»£ç äº§ç”Ÿçš„å¼‚å¸¸å¯¼è‡´<code>close()</code>æ— æ³•æ‰§è¡Œã€‚å› æ­¤ä½¿ç”¨<code>with</code>å¯ä»¥è®©ä»£ç æ—¢ç®€æ´åˆæœ‰æ•ˆã€‚</p>
<p>ä¸‹é¢æ¥ç€è¯´ä¸€è¯´<code>context manager</code>çš„åŠŸèƒ½ä¸ç”¨æ³•ã€‚</p>
<h3 id="ç®¡ç†èµ„æº"><a href="#ç®¡ç†èµ„æº" class="headerlink" title="ç®¡ç†èµ„æº"></a>ç®¡ç†èµ„æº</h3><p><code>context manager</code>æœ€å¸¸è¢«ç”¨äºç®¡ç†èµ„æºï¼Œäº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨å®ƒçš„åŸå› ã€‚</p>
<p>å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œç¨‹åºä¼šå æœ‰å¯¹åº”çš„èµ„æºï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œè€Œèµ„æºçš„ç®¡ç†åˆ™ç”±æ“ä½œç³»ç»Ÿæ¥å®Œæˆï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€æ—¶é—´èƒ½å¤Ÿæ‰“å¼€çš„æ–‡ä»¶æˆ–è¿›ç¨‹æ˜¯æœ‰é™çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¿è¡Œä¸‹é¢è¿™ä»½ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">files = []</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100000</span>):</div><div class="line">    files.append(open(<span class="string">'foo.txt'</span>, <span class="string">'w'</span>))</div></pre></td></tr></table></figure>
<p>åœ¨mac osæˆ–linuxä¸Šè¿è¡Œè¿™ä»½ä»£ç å¾ˆæœ‰å¯èƒ½ä¼šäº§ç”ŸOSErrorè€Œå¯¼è‡´ä¸­æ–­ï¼Œè€Œåœ¨windowsä¸Šè¿è¡Œç¨‹åºåˆ™å¯èƒ½å¯¼è‡´ç³»ç»Ÿç›´æ¥å¡æ­»ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜çš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­”ï¼šæ˜¯<em>å†…å­˜æ³„éœ²ï¼</em> è¿™é‡Œçš„æ³„éœ²åŸå› æ˜¯æŒ‡æ‰“å¼€æ–‡ä»¶åä½†æœªå…³é—­ã€‚</p>
<p>ä¸ºäº†é¿å…å¯¹æ–‡ä»¶æ“ä½œæ—¶äº§ç”Ÿä¸Šè¿°çš„é”™è¯¯ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p>
<blockquote>
<p>1ã€é¿å…åŒæ—¶æ‰“å¼€è¶…è¿‡æ“ä½œç³»ç»Ÿä¸Šé™ä¸ªæ•°ä¸ªæ–‡ä»¶ï¼›</p>
<p>2ã€æ¯æ¬¡æ‰“å¼€æ–‡ä»¶åå…³é—­æ–‡ä»¶ï¼›</p>
</blockquote>
<p>æ¯«æ— ç–‘é—®ï¼Œè¿™é‡Œ2çš„æ“ä½œæ›´å¥½ï¼Œå› ä¸ºèƒ½å¤Ÿæ›´å¥½åœ°å®ç°é«˜å±‚æŠ½è±¡å¹¶è§£å†³å†…å­˜æ³„éœ²é—®é¢˜ã€‚</p>
<p>å…ˆè¯´1ï¼šåœ¨unixä¸Š<code>ulimit -n</code>å¯ä»¥æŸ¥çœ‹åŒæ—¶æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ä¸Šé™ï¼Œåœ¨å†™ä»£ç æ—¶ç¡®ä¿åŒæ—¶æ‰“å¼€çš„æ–‡ä»¶æ•°ä¸è¶…è¿‡ä¸Šé™å€¼å³å¯ã€‚ä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰è§£å†³æ ¹æœ¬é—®é¢˜ï¼šå†…å­˜æ³„éœ²ï¼</p>
<p>å†è¯´2ï¼šæˆ‘ä»¬å½“ç„¶å¯ä»¥ä¸ºä¸Šé¢çš„ä»£ç æ·»åŠ close()å‡½æ•°ï¼Œå¯æ˜¯å¦‚æœæ‰“å¼€æ–‡ä»¶æˆ–è€…å¯¹æ–‡ä»¶å†…å®¹å¤„ç†æ—¶äº§ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆåé¢çš„<code>close()</code>å°±æ— æ³•è¢«æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p>
<p><code>context manager</code>æ­£æ˜¯ç”¨äºå¤„ç†è¿™ç§æƒ…å†µçš„ä¸€ä¸ªæ¥å£ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> something_that_returns_a_context_manager() <span class="keyword">as</span> my_resource:</div><div class="line">    do_something(my_resource)</div><div class="line">    ...</div><div class="line">    print(<span class="string">'done using my_resource'</span>)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>with</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ“ä½œä»»ä½•ä¸€ä¸ªè¿”å›ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„å‡½æ•°ï¼ˆä¾‹å¦‚å†…ç½®å‡½æ•°<code>open()</code>ï¼‰ï¼›<code>with</code>èƒ½å¤Ÿä¿è¯å½“ç›¸åº”ä»£ç å—å†…çš„ä»£ç æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå§‹ç»ˆè°ƒç”¨ä¸€ä¸ªåŒ…å«æ¸…ç†èµ„æºçš„â€˜å–„åâ€™å‡½æ•°ã€‚è¿™ä¸ªâ€˜å–„åâ€™å‡½æ•°å°±å®šä¹‰åœ¨<code>context manager</code>ä¸­ã€‚</p>
<p>å®ç°ä¸€ä¸ªæœ€ç®€å•çš„context manageråªè¦æ±‚åŒ…å«<code>__enter__()</code>å‡½æ•°ä»¥åŠ<code>__exit__()</code>ã€‚</p>
<blockquote>
<p><code>__enter__()</code>æ‰§è¡Œæ“ä½œå¹¶è¿”å›è¢«ç®¡ç†çš„èµ„æºï¼›</p>
<p><code>__exit__()</code>åˆ™æ¸…ç†èµ„æºï¼Œæ— è¿”å›ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„<code>context manager</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">File</span><span class="params">()</span>:</span></div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, filename, mode)</span>:</span></div><div class="line">        self.filename = filename</div><div class="line">        self.mode = mode</div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        self.open_file = open(self.filename, self.mode)</div><div class="line">        <span class="keyword">return</span> self.open_file</div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self)</span>:</span></div><div class="line">        self.open_file.close()</div><div class="line">        </div><div class="line">files = []</div><div class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100000</span>):</div><div class="line">    <span class="keyword">with</span> File(<span class="string">'foo.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</div><div class="line">        files.append(f.write(<span class="string">'foo'</span>))</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>__enter__()</code>æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶è¿”å›ï¼›<code>__exit__()</code>åˆ™å…³é—­æ–‡ä»¶ã€‚</p>
<h3 id="å…¶ä»–æœ‰ç”¨çš„èµ„æºç®¡ç†å™¨"><a href="#å…¶ä»–æœ‰ç”¨çš„èµ„æºç®¡ç†å™¨" class="headerlink" title="å…¶ä»–æœ‰ç”¨çš„èµ„æºç®¡ç†å™¨"></a>å…¶ä»–æœ‰ç”¨çš„èµ„æºç®¡ç†å™¨</h3><p>å¾ˆå¤šåº“ä¸­ä¹ŸåŒ…å«èµ„æºç®¡ç†å™¨ï¼Œä¾‹å¦‚<code>zipfile.ZipFile</code>ã€<code>subprocess.Popen</code>ã€<code>tarfile.TarFile</code>ã€<code>telnet.Telnet</code>ã€<code>pathlib.Path</code>ç­‰ã€‚å…¶å®ï¼Œåœ¨ä½¿ç”¨å®Œèµ„æºä¹‹åè°ƒç”¨<code>close()</code>æ–¹æ³•çš„éƒ½æ˜¯<code>context manager</code>ã€‚</p>
<h3 id="å…³äºcontextlib"><a href="#å…³äºcontextlib" class="headerlink" title="å…³äºcontextlib"></a>å…³äº<code>contextlib</code></h3><p><code>contextlib</code>æ¨¡å—åŒ…å«äº†è®¸å¤šåˆ›å»ºã€ä½¿ç”¨<code>context manager</code>çš„å·¥å…·ã€‚</p>
<p>ä¾‹å¦‚ä½¿ç”¨<code>@contextmanager</code>è£…é¥°å™¨æ¥åˆ›å»ºä¸€ä¸ª<code>context manager</code>ã€‚å…·ä½“çš„åˆ›å»ºæ–¹æ³•æ˜¯ä½¿ç”¨<code>@contextmanager</code>æ¥è£…é¥°åªåŒ…å«ä¸€ä¸ª<code>yield</code>è¯­å¥çš„<code>generator</code>å‡½æ•°ã€‚åœ¨<code>yield</code>ä¹‹å‰çš„éƒ¨åˆ†éƒ½è¢«è§†ä¸º<code>__enter__()</code>å‡½æ•°å†…å®¹ï¼Œè€Œä¹‹åçš„éƒ¨åˆ†åˆ™æ˜¯<code>__exit__()</code>å‡½æ•°å†…å®¹ã€‚ä¸‹é¢è®©æˆ‘ä»¬ç”¨è¿™ç§æ–¹æ³•æ¥é‡å†™<code>File()</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</div><div class="line"></div><div class="line"><span class="meta">@contextmanager</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">open_file</span><span class="params">(path, mode)</span>:</span></div><div class="line">    the_file = open(path, mode)</div><div class="line">    <span class="keyword">yield</span> the_file</div><div class="line">    the_file.close()</div><div class="line">    </div><div class="line">files = []</div><div class="line"></div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100000</span>):</div><div class="line">    <span class="keyword">with</span> open_file(<span class="string">'foo.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</div><div class="line">        files.append(f)</div></pre></td></tr></table></figure>
<p>å¯¹æ¯”åå¯ä»¥å‘ç°ä½¿ç”¨è¿™ç§æ–¹æ³•çš„ä»£ç æ›´åŠ ç®€æ´ã€‚</p>
<p>å¦å¤–æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­å¯ä»¥å¸®åŠ©ä½ ç†è§£<code>@contextmanager</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</div><div class="line"></div><div class="line"><span class="meta">@contextmanager</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">tag</span><span class="params">(name)</span>:</span></div><div class="line">    print(<span class="string">"&lt;%s&gt;"</span> % name)</div><div class="line">    <span class="keyword">yield</span></div><div class="line">    print(<span class="string">"&lt;/%s&gt;"</span> % name)</div><div class="line">    </div><div class="line"><span class="keyword">with</span> tag(<span class="string">"h1"</span>):</div><div class="line">    print(<span class="string">"hello, world!"</span>)</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š<code>&lt;h1&gt;hello, world!&lt;/h1&gt;</code></p>
<p>å¦å¤–ä¹Ÿå¯ä»¥é€šè¿‡<code>contextlib.ContextDecorator</code>æ¥å®ç°è‡ªå·±çš„<code>context manager</code>è£…é¥°å™¨ã€‚ä¾‹å¦‚æ¥ç€ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­æ¥è¯´æ˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> ContextDecorator</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">makeparagraph</span><span class="params">(ContextDecorator)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'&lt;p&gt;'</span>)</div><div class="line">        <span class="keyword">return</span> self</div><div class="line">        </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, *exc)</span>:</span></div><div class="line">        print(<span class="string">'&lt;/p&gt;'</span>)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">        </div><div class="line"><span class="meta">@makeparagraph</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">emit_html</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'Here is some non-HTML'</span>)</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œ<code>emit_html()</code><br>ä¼šè¾“å‡º<code>&lt;p&gt;Here is some non-HTML&lt;/p&gt;</code></p>
<h3 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h3><blockquote>
<ul>
<li><p><a href="https://www.python.org/dev/peps/pep-0343/" target="_blank" rel="external">PEP 34</a></p>
</li>
<li><p><a href="https://jeffknupp.com/blog/2016/03/07/python-with-context-managers/" target="_blank" rel="external">Python with Context Managers</a></p>
</li>
</ul>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨è¯»pythonè¿›é˜¶ç±»ä¹¦ç±ã€ŠIntermediate Pythonã€‹ï¼Œçœ‹åˆ°åé¢æœ‰ä¸€ç« è®²åˆ°&lt;code&gt;context manager&lt;/code&gt;ï¼Œè®²çš„å¾ˆæµ…ï¼Œæˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ã€‚äºæ˜¯è‡ªå·±æŠ½æ—¶é—´æœé›†äº†ç½‘ä¸Šçš„ä¸€äº›èµ„æ–™ï¼Œæ•´ç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;pythonä¸­çš„&lt;code&gt;contex
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python" scheme="http://blog.yinwoods.work/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pythonçˆ¬è™«requestsç™»å½•è§£å†³422é”™è¯¯</title>
    <link href="http://blog.yinwoods.work/2016/07/27/python%E7%88%AC%E8%99%ABrequests%E7%99%BB%E5%BD%95%E8%A7%A3%E5%86%B3422%E9%94%99%E8%AF%AF/"/>
    <id>http://blog.yinwoods.work/2016/07/27/pythonçˆ¬è™«requestsç™»å½•è§£å†³422é”™è¯¯/</id>
    <published>2016-07-26T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>å°ä¼™ä¼´<a href="http://blog.csdn.net/cumtcyf" target="_blank" rel="external">å´”å´”</a>ä»Šå¤©è¦çˆ¬å–<a href="http://ucar.act.buaa.edu.cn/users/sign_in" target="_blank" rel="external">åŒ—èˆªACTå®éªŒå®¤çš„è½¦è”ç½‘</a>çš„ä¿¡æ¯ï¼Œå·²æœ‰è´¦å·å¯†ç ã€‚æ¨¡æ‹Ÿç™»å½•ä½¿ç”¨çš„æ˜¯pythonçš„requests.session().post(),é€šè¿‡chromeçš„networkè§‚å¯Ÿpostçš„è¡¨å•æ•°æ®ï¼Œå‘ç°æœ‰ä¸€ä¸ª<code>authenticity_token</code>ï¼Œè¿™ä¸ªæ•°æ®æ˜¯æ¯æ¬¡åˆ·ç½‘é¡µåŠ¨æ€ç”Ÿæˆçš„ï¼Œå­˜æ”¾åœ¨é¡µé¢headerçš„metaæ ‡ç­¾ä¸­ï¼Œé—®é¢˜ä¸å¤§ï¼Œç›´æ¥ç”¨beautifulsoupè·å–å°±å¯ä»¥äº†ã€‚</p>
<p>é—®é¢˜å‡ºç°åœ¨postä¹‹åï¼Œæ€»æ˜¯å¾—åˆ°HTTP 422é”™è¯¯ã€‚é€šè¿‡æŸ¥è¯¢äº†è§£åˆ°è¿™é‡Œçš„422é”™è¯¯æ˜¯æŒ‡éªŒè¯é”™è¯¯ï¼Œå¯æ˜¯tokenæ˜¯å³æ—¶è·å–çš„ï¼Œå…¶ä»–ä¿¡æ¯ä¹Ÿæ˜¯å®Œå…¨æŒ‰ç…§è¡¨å•è¦æ±‚å¡«å†™ï¼Œå¹¶ä¸”å¯¹æäº¤æ•°æ®è¿›è¡Œäº†urlencodeå¹¶ä½¿ç”¨<code>gbk</code>encodeï¼Œå®åœ¨æ˜¯æƒ³ä¸é€šåŸå› ã€‚ç„¶åé€šè¿‡ç¥å¥‡çš„è°·æ­Œå±…ç„¶æœåˆ°äº†ç›¸åŒé—®é¢˜çš„åšå®¢ã€‚ã€‚ã€‚è¿ä»£ç éƒ½å†™å¾—å’Œæˆ‘çš„æƒŠäººçš„ç›¸ä¼¼ã€‚ã€‚ã€‚æˆ‘éƒ½å¼€å§‹æ€€ç–‘æ˜¯ä¸æ˜¯å’Œæˆ‘çˆ¬çš„åŒä¸€ä¸ªç½‘ç«™äº†ã€‚ã€‚ã€‚</p>
<p>æ­£ç¡®çš„çˆ¬å–å§¿åŠ¿æ˜¯å¸¦ç€cookieéªŒè¯ï¼Œæˆ‘çŒœè¿™é‡Œçš„<code>authenticity_token</code>ä¸cookieæ˜¯ç›¸å…³è”çš„ï¼Œå› ä¸ºçˆ¬å–æ—¶æ²¡å¸¦ä¸Šcookieï¼Œæ‰€ä»¥æ— æ³•éªŒè¯æˆåŠŸã€‚å¦‚æœæƒ³è¦å¸¦ä¸Šcookieåªéœ€ä½¿ç”¨<code>requests.Session()</code>æ¥postå³å¯ã€‚</p>
<p><a href="http://docs.python-requests.org/zh_CN/latest/user/advanced.html#advanced" target="_blank" rel="external">requests.Session()ç®€ä»‹</a></p>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š</p>
<p>Sessionä½œä¸ºä¸€ä¸ªä¼šè¯å¯¹è±¡ï¼Œä¼šåœ¨åŒä¸€ä¸ªSessionå®ä¾‹å‘å‡ºæ‰€æœ‰è¯·æ±‚ä¹‹é—´ä¿å­˜cookieã€‚å…¶å®è¿™é‡Œå¯ä»¥ç±»æ¯”ä¸€ä¸‹ï¼šå½“ä½ ç™»å½•æ·˜å®åï¼ŒçŸ­æ—¶é—´å†…è®¿é—®æ·˜å®çš„å…¶ä»–é¡µé¢ï¼Œä¸éœ€è¦é‡æ–°ç™»å½•ã€‚</p>
<p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#author : yinwoods</span></div><div class="line"><span class="keyword">import</span> urllib</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line"></div><div class="line">    url = <span class="string">'http://ucar.act.buaa.edu.cn/users/sign_in'</span></div><div class="line"></div><div class="line"></div><div class="line">    headers = &#123;</div><div class="line">        <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8'</span>,</div><div class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip,deflate'</span>,</div><div class="line">        <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,zh;q=0.8'</span>,</div><div class="line">        <span class="string">'Connection'</span>: <span class="string">'keep-alive'</span>,</div><div class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</div><div class="line">        <span class="string">'Host'</span>: <span class="string">'ucar.act.buaa.edu.cn'</span>,</div><div class="line">        <span class="string">'Origin'</span>: <span class="string">'http://ucar.act.buaa.edu.cn'</span>,</div><div class="line">        <span class="string">'Referer'</span>: <span class="string">'http://ucar.act.buaa.edu.cn/stat'</span>,</div><div class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0(X11;Linux x86_64) AppleWebKit/537.36(KHTML, like Gecko) Ubuntu Chromium/51.0.2704.79 Chrome/51.0.2704.79 Safari / 537.36'</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">#å…ˆè·å–é¡µé¢æºç ï¼Œæå–token</span></div><div class="line">    session = requests.Session()</div><div class="line">    html = session.get(url, headers=headers).text</div><div class="line"></div><div class="line">    htmlDoc = BeautifulSoup(html, <span class="string">'html.parser'</span>)</div><div class="line">    token = htmlDoc.find_all(<span class="string">'meta'</span>)[<span class="number">-1</span>][<span class="string">'content'</span>]</div><div class="line"></div><div class="line">    print(token)</div><div class="line"></div><div class="line">    datas = urllib.parse.urlencode(&#123;</div><div class="line">        <span class="string">'utf8'</span>: <span class="string">'âœ“'</span>,</div><div class="line">        <span class="string">'authenticity_token'</span>: token,</div><div class="line">        <span class="string">'user[username]'</span>: username,</div><div class="line">        <span class="string">'user[password]'</span>: password,</div><div class="line">        <span class="string">'user[remember_me]'</span>: <span class="string">'1'</span>,</div><div class="line">        <span class="string">'commit'</span>: <span class="string">'ç™»å½•'</span></div><div class="line">    &#125;).encode(<span class="string">'gbk'</span>)</div><div class="line"></div><div class="line">    requests.session().post()</div><div class="line"></div><div class="line">    print(datas)</div><div class="line"></div><div class="line">    print(session.post(url=url, params=datas, headers=headers))</div><div class="line"></div><div class="line">    res = session.get(<span class="string">'http://ucar.act.buaa.edu.cn/users/sign_in'</span>).text</div><div class="line">    print(res)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure>
<p>æ‰“å°é¡µé¢åå¯ä»¥å‘ç°ç™»å½•æˆåŠŸï¼ŒçŠ¶æ€ç è¿”å›200ã€‚äº‹ååæ€ï¼Œæ„è¯†åˆ°<code>token+cookie</code>å¯èƒ½è¿™æ˜¯ä¸€ç§æ¯”è¾ƒé€šç”¨çš„éªŒè¯æœºåˆ¶ï¼Œè‡ªå·±ä¸äº†è§£ä¸€æ–¹é¢æ˜¯å› ä¸ºç»éªŒä¸è¶³ï¼Œå¦ä¸€æ–¹é¢å¯èƒ½å°±æ˜¯ä¹‹å‰çˆ¬çš„ç½‘ç«™å¤§éƒ½æ¯”è¾ƒç®€å•ï¼ˆæ˜¯å±äºå¼€æ”¾ç±»é—¨æˆ·ç½‘ç«™ï¼‰ï¼Œèƒ½å¤Ÿçˆ¬å–æˆåŠŸå¹¶ä¸ä»£è¡¨è‡ªå·±çš„èƒ½åŠ›å¾ˆé«˜ã€‚</p>
<p>ä¸è¿‡è¯åˆè¯´å›æ¥è‡ªå·±æƒ³å­¦çš„ä¸œè¥¿å¤ªå¤šäº†ã€‚ã€‚ã€‚ç›®å‰åœ¨çœ‹CSAPPï¼Œåé¢æœ‰æ—¶é—´å†å­¦ä¹ ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å°ä¼™ä¼´&lt;a href=&quot;http://blog.csdn.net/cumtcyf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å´”å´”&lt;/a&gt;ä»Šå¤©è¦çˆ¬å–&lt;a href=&quot;http://ucar.act.buaa.edu.cn/users/sign_in&quot; t
    
    </summary>
    
      <category term="myshare" scheme="http://blog.yinwoods.work/categories/myshare/"/>
    
    
      <category term="python, çˆ¬è™«" scheme="http://blog.yinwoods.work/tags/python-%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ç‚¹æ„Ÿæƒ³</title>
    <link href="http://blog.yinwoods.work/2016/07/21/%E4%B8%80%E7%82%B9%E6%84%9F%E6%83%B3/"/>
    <id>http://blog.yinwoods.work/2016/07/21/ä¸€ç‚¹æ„Ÿæƒ³/</id>
    <published>2016-07-20T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§å­¦ç»“æŸéƒ½å¿«ä¸€ä¸ªæœˆäº†ï¼ŒæœŸé—´ä¹Ÿä¸æ˜¯æ²¡æƒ³è¿‡å†™ç‚¹ä»€ä¹ˆï¼Œå¯åˆæ€»è§‰å¾—æç¬”å¿˜å­—ã€‚å…¶å®å¤§å­¦å››å¹´å¯¹æˆ‘æ¥è¯´ä¸ä»…ä»…æ˜¯å››å¹´çš„å…‰é˜´ï¼Œæ›´å¤šçš„æ˜¯æœŸé—´çš„ç»å†ç»™æˆ‘å¸¦æ¥çš„èœ•å˜ï¼Œå¦‚æœè¯´å¤§å­¦å‰æˆ‘æ˜¯ä¸ªå­©å­ï¼Œé‚£å¤§å­¦åçš„æˆ‘å·²ç»å˜æˆä¸€åé’å¹´äº†ã€‚æœ‰æ—¶å€™ä¹Ÿä¼šé—®è‡ªå·±ï¼Œè¿™æ ·çš„è¯å°‘å¹´çš„æˆ‘åˆå»äº†å“ªé‡Œäº†å‘¢ï¼Ÿ</p>
<p>å›æƒ³èµ·å››å¹´çš„ç”Ÿæ´»ï¼Œè„‘æµ·ä¸­çš„ç”»é¢æ€»æ˜¯å®šæ ¼åœ¨é‚£ä¸ªå¤œæ™šä¸Šè‡ªä¹ åˆšç»“æŸï¼Œç‹¬è‡ªä¸€äººèµ°åœ¨å›å¯å®¤è·¯ä¸Šçš„æ—¶åˆ»ï¼Œé‚£ä¸ªæ—¶å€™çš„è‡ªå·±æ˜¯å¤šä¹ˆå……å®å¿«ä¹å•Šã€‚å¦‚æœè¯´å››å¹´æ¥å­¦ä¼šäº†ä»€ä¹ˆä»¥åèƒ½å¤Ÿåœ¨ç¤¾ä¼šä¸Šå®‰èº«ç«‹å‘½çš„æŠ€èƒ½çš„è¯ï¼Œæˆ‘çš„ç­”æ¡ˆä¸ä¼šæ˜¯ç¼–ç¨‹ï¼Œè€Œæ˜¯ç‹¬å¤„ã€‚ç¼–ç¨‹å½’æ ¹åˆ°åº•æ¥è¯´åªæ˜¯ä¸€é¡¹æ™®é€šçš„æŠ€èƒ½ï¼Œæ˜¯å¤§å¤šæ•°äººé€šè¿‡åˆç†è®­ç»ƒèƒ½å¤Ÿä¹ å¾—çš„æŠ€èƒ½ï¼Œè€Œç‹¬å¤„åˆ™ä¸ç„¶ï¼Œå®ƒå¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºå¤–ç•Œç¯å¢ƒçš„â€œå‹è¿«â€ã€‚å¯èƒ½å› ä¸ºè‡ªå·±æ€§å­é‡Œçš„å› ç´ å§ï¼Œå¯¹å¾…ç”Ÿæ´»èµäºˆçš„â€œå‹è¿«â€ï¼Œæˆ‘æ¥å—åœ°å¾ˆå¥½ï¼Œä»¥è‡³äºç°åœ¨å¾ˆå¤šæ—¶å€™èƒ½å¤Ÿäº«å—ç‹¬å¤„ï¼Œè€Œä¹Ÿæ­£æ˜¯ç”±äºç‹¬å¤„æ—¶çš„æ€è€ƒï¼Œå¸®åŠ©æˆ‘ç†æ¸…äº†è‡ªå·±æœªæ¥å¯¹å¾…ç”Ÿæ´»çš„æƒ³æ³•ã€‚å¯ä»¥è¯´æˆ‘å¯¹è‡ªå·±æƒ³è¦çš„ç”Ÿæ´»ä»¥åŠæƒ³è¦å˜æˆçš„æ¨¡æ ·ï¼Œåœ¨è¿™ä¸ªç‹¬å¤„çš„è¿‡ç¨‹ä¸­å˜å¾—æ„ˆå‘æ¸…æ™°ã€‚</p>
<p>æœ€è¿‘åœ¨è¯»ä½™ç§‹é›¨çš„ã€Šè¡Œè€…æ— ç–†ã€‹ï¼Œä¹¦ä¸­è®²è¿°äº†ä½œè€…åœ¨æ¬§æ´²æ—…æ¸¸çš„ä¸€äº›è§‚å¯Ÿå’Œæ„Ÿæ‚Ÿï¼Œè™½ç„¶æ‰è¯»äº†å››åˆ†ä¹‹ä¸€ï¼Œå¯å·²ç„¶æ„Ÿæ¦‚è‰¯å¤šã€‚ä¹Ÿæ­£æ˜¯åœ¨è¯»è¿™æœ¬ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘åˆå¤šæ¬¡æ€è€ƒäº†è‡ªå·±æ†§æ†¬å‘å¾€çš„æœªæ¥ç”Ÿæ´»ã€‚è®°å¾—åˆä¸­å­¦è¿‡è®ºè¯­çš„â€œä¸€ç®ªé£Ÿï¼Œä¸€ç“¢é¥®ï¼Œåœ¨é™‹å··ã€‚äººä¸å ªå…¶å¿§ï¼Œå›ä¹Ÿä¸æ”¹å…¶ä¹â€ï¼Œå½“åˆçš„è‡ªå·±æ€ä¹ˆä¹Ÿä¸èƒ½ç†è§£åœ¨è¿™ç§ç‰©è´¨æåº¦åŒ®ä¹çš„æƒ…å†µä¸‹å¦‚ä½•èƒ½ä¹å‘¢ï¼Ÿç„¶è€Œç°åœ¨è‡ªå·±æ…¢æ…¢åœ°èƒ½å¤Ÿç†è§£äº†ï¼Œå¼€å¿ƒå¿«ä¹æœ¬å°±æºè‡ªå†…å¿ƒï¼Œä¸€ä¸ªäººå†…å¿ƒå¼ºå¤§åˆä½•éœ€ç”¨å¤–ç•Œç‰©è´¨æ¥æ¢å–å†…å¿ƒçš„æ„‰æ‚¦å‘¢ï¼Ÿä¹‹å‰æ€è€ƒæ€»æ˜¯èµ°ä¸Šä¸€æ¡å¼¯è·¯ï¼šå®‰è´«ä¹é“æ˜¯ä¸€ç§é«˜å°šçš„æƒ…æ€€ã€‚ç°åœ¨åˆ™ä¸è¿™ä¹ˆçœ‹äº†ï¼Œå®‰è´«ä¹é“å€¼å¾—é’¦ä½©ï¼Œæ›´å€¼å¾—èµæ‰¬çš„åº”è¯¥æ˜¯å³ä½¿å¤§å¯Œå¤§è´µä»èƒ½å¤Ÿä¸æ”¹å…¶ä¹ã€‚</p>
<p>ç”±æ­¤ä¹Ÿå¼•å‡ºäº†æˆ‘å¯¹æœªæ¥ç”Ÿæ´»çš„ä¸€ç‚¹å°æ€è€ƒï¼Œæˆ‘æ¸…æ¥šåœ°è®¤çŸ¥åˆ°æœªæ¥æˆ‘çš„å¹¸ç¦å¿«ä¹ä¸åœ¨äºæˆ‘æ‹¿èµ·äº†å¤šå°‘ä¸œè¥¿ï¼Œè´¢å¯Œï¼Ÿæƒåˆ©ï¼Ÿè£èª‰ï¼Ÿéƒ½ä¸æ˜¯ï¼åœ¨äºæˆ‘èƒ½å¤Ÿæ”¾ä¸‹å¤šå°‘ä¸œè¥¿ï¼Œç”Ÿå‘½çš„å‰åŠæ®µè¦æ‰›èµ·è·¯ä¸Šçš„åŒ…è£¹ï¼Œè€ŒååŠç¨‹ä¹Ÿéœ€è¦æ”¾ä¸‹ã€‚æˆ‘æ‰€è¿½æ±‚çš„ç”Ÿæ´»åº”å½“æ˜¯ç†µå‡çš„ï¼Œæ—¢ç„¶æ¸…æ¥šåœ°æ„è¯†åˆ°è‡ªå·±çš„ç›®æ ‡ï¼Œé‚£ä¹ˆé€šå¾€ç›®æ ‡çš„è·¯ä¸Šæˆ‘åªéœ€è¦é¿å¼€å¯¹æˆ‘æ¥è¯´è¿‡äºå¤æ‚çš„äººå’Œäº‹å°±å·²ç»æˆåŠŸä¸€å¤§åŠäº†ï¼ˆäº‹å®ä¸Šä¸€ç›´ä»¥æ¥æˆ‘ä¹Ÿç¡®å®æ˜¯è¿™ä¹ˆåšçš„ï¼‰ã€‚</p>
<p>å¯¹äºæœªæ¥ï¼Œæˆ‘æƒ³å’Œä¸€ç¾¤ç®€å•çš„æœ‹å‹ç”Ÿæ´»åœ¨ä¸€ä¸ªç®€å•çš„åœˆå­é‡Œã€‚è€Œè¿™é‡Œçš„ç®€å•å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºè‡ªå·±çš„é€‰æ‹©ã€‚ğŸ˜€</p>
<p>â€”â€”å†™äº2016å¹´7æœˆ20æ—¥å¤œ å¤§é›¨</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§å­¦ç»“æŸéƒ½å¿«ä¸€ä¸ªæœˆäº†ï¼ŒæœŸé—´ä¹Ÿä¸æ˜¯æ²¡æƒ³è¿‡å†™ç‚¹ä»€ä¹ˆï¼Œå¯åˆæ€»è§‰å¾—æç¬”å¿˜å­—ã€‚å…¶å®å¤§å­¦å››å¹´å¯¹æˆ‘æ¥è¯´ä¸ä»…ä»…æ˜¯å››å¹´çš„å…‰é˜´ï¼Œæ›´å¤šçš„æ˜¯æœŸé—´çš„ç»å†ç»™æˆ‘å¸¦æ¥çš„èœ•å˜ï¼Œå¦‚æœè¯´å¤§å­¦å‰æˆ‘æ˜¯ä¸ªå­©å­ï¼Œé‚£å¤§å­¦åçš„æˆ‘å·²ç»å˜æˆä¸€åé’å¹´äº†ã€‚æœ‰æ—¶å€™ä¹Ÿä¼šé—®è‡ªå·±ï¼Œè¿™æ ·çš„è¯å°‘å¹´çš„æˆ‘åˆå»äº†å“ªé‡Œäº†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å›æƒ³èµ·å››å¹´
    
    </summary>
    
      <category term="diary" scheme="http://blog.yinwoods.work/categories/diary/"/>
    
    
      <category term="thoughts" scheme="http://blog.yinwoods.work/tags/thoughts/"/>
    
  </entry>
  
  <entry>
    <title>pythonä¸­çš„åç¨‹</title>
    <link href="http://blog.yinwoods.work/2016/07/07/python%E4%B8%AD%E7%9A%84%E5%8D%8F%E7%A8%8B/"/>
    <id>http://blog.yinwoods.work/2016/07/07/pythonä¸­çš„åç¨‹/</id>
    <published>2016-07-06T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¦äº†è§£åç¨‹ï¼Œé¦–å…ˆè¦å¯¹å­ä¾‹ç¨‹æœ‰æ‰€è®¤çŸ¥ã€‚</p>
<p>å­ä¾‹ç¨‹å¯ä»¥ç±»æ¯”äºç¨‹åºä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè°ƒç”¨è¿‡ç¨‹æ˜¯åå…¥å…ˆå‡ºçš„æ ˆå¼è°ƒç”¨ï¼›</p>
<blockquote>
<p>åç¨‹å¯ä»¥é€šè¿‡yieldæ¥è°ƒç”¨å…¶å®ƒåç¨‹ã€‚é€šè¿‡yieldæ–¹å¼è½¬ç§»æ‰§è¡Œæƒçš„åç¨‹ä¹‹é—´ä¸æ˜¯è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…çš„å…³ç³»ï¼Œè€Œæ˜¯å½¼æ­¤å¯¹ç§°ã€å¹³ç­‰çš„ã€‚ <a href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E7%A8%8B" target="_blank" rel="external">åç¨‹-ç»´åŸºç™¾ç§‘</a></p>
</blockquote>
<p>é€šè¿‡ä¸‹é¢çš„ä¼ªä»£ç å¯ä»¥æ›´å¥½åœ°ç†è§£åç¨‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var q := new queue</div><div class="line"></div><div class="line">ç”Ÿäº§è€…åç¨‹</div><div class="line"></div><div class="line">   loop</div><div class="line">       <span class="keyword">while</span> q <span class="keyword">is</span> <span class="keyword">not</span> full</div><div class="line">           create some new items</div><div class="line">           add the items to q</div><div class="line">       <span class="keyword">yield</span> to consume</div><div class="line">æ¶ˆè´¹è€…åç¨‹</div><div class="line"></div><div class="line">   loop</div><div class="line">       <span class="keyword">while</span> q <span class="keyword">is</span> <span class="keyword">not</span> empty</div><div class="line">           remove some items <span class="keyword">from</span> q</div><div class="line">           use the items</div><div class="line">       <span class="keyword">yield</span> to produce</div></pre></td></tr></table></figure>
<p>åœ¨pythonä¸­ç”±äº <em>å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰</em> çš„åŸå› å¯¼è‡´å¤šçº¿ç¨‹éš¾ä»¥å‘æŒ¥å¤šæ ¸å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œå› ä¸ºGILçš„åŸå› ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œï¼Œæ›´å¤šæƒ…å†µä¸‹æˆ‘ä»¬é€‰ç”¨multiprocessingæ¥å®ç°å¤šè¿›ç¨‹ä»è€Œæé«˜æ‰§è¡Œæ•ˆç‡ã€‚è€Œå¯¹äºåç¨‹åˆ™æ›´æ“…é•¿å¤„ç†I/Oå¯†é›†çš„ç¨‹åºã€‚</p>
<p>å…·ä½“åˆ°pythonä¸­åç¨‹ï¼Œæ˜¯ä»¥yieldä¸ºåŸºç¡€å®ç°çš„ã€‚</p>
<h4 id="é¦–å…ˆäº†è§£ä¸€ä¸‹pythonä¸­çš„yield"><a href="#é¦–å…ˆäº†è§£ä¸€ä¸‹pythonä¸­çš„yield" class="headerlink" title="é¦–å…ˆäº†è§£ä¸€ä¸‹pythonä¸­çš„yield:"></a>é¦–å…ˆäº†è§£ä¸€ä¸‹pythonä¸­çš„yield:</h4><p>å¯ä»¥é€šè¿‡stackoverflowä¸Šçš„ä¸€ä¸ªå¸–å­æ¥äº†è§£pythonä¸­çš„<a href="http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python" target="_blank" rel="external">yieldç”¨æ³•</a>ï¼Œç®€å•åœ°æ¥è¯´å°±æ˜¯åŒ…å«yieldè¯­å¥çš„å‡½æ•°è¢«ç§°ä¸ºç”Ÿæˆå™¨å‡½æ•°ï¼Œå®ƒä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«å°±åœ¨äºæ™®é€šå‡½æ•°æ¯æ¬¡éƒ½è¦ä»å‡½æ•°å…¥å£å¤„é‡æ–°æ‰§è¡Œï¼Œè€Œç”Ÿæˆå™¨å‡½æ•°ä»…ç¬¬ä¸€æ¬¡ä»å…¥å£å¤„æ‰§è¡Œï¼Œä¹‹åéƒ½ä¼šä»yieldè¯­å¥ä¹‹åçš„åœ°æ–¹å¼€å§‹æ‰§è¡Œã€‚</p>
<p>è¿™ä¹ˆçœ‹å¥½åƒå¾ˆå¤æ‚ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è®¤è¯†yieldã€‚</p>
<p>æ¯”å¦‚ç°åœ¨ä½ æƒ³è¦å†™ä¸€ä¸ªç”Ÿæˆå‰nä¸ªæ–æ³¢é‚£å¥‘æ•°ï¼Œä½ å¯èƒ½å¾ˆå®¹æ˜“æƒ³åˆ°ç±»ä¼¼ä¸‹é¢çš„è¿™ç§å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    index = <span class="number">0</span></div><div class="line">    a = <span class="number">0</span></div><div class="line">    b = <span class="number">1</span></div><div class="line">    res = []</div><div class="line">    <span class="keyword">while</span> index &lt; n:</div><div class="line">        index += <span class="number">1</span></div><div class="line">        a, b = b, a+b</div><div class="line">        res.append(a)</div><div class="line">    <span class="keyword">return</span> res</div></pre></td></tr></table></figure>
<p>å¯æ˜¯å½“néå¸¸å¤§æ—¶ï¼Œä¸Šé¢è¿™ä¸ªç¨‹åºæŠŠæ‰€æœ‰ç»“æœéƒ½ä¿å­˜åœ¨resä¸­æ˜¯å¾ˆè€—å†…å­˜çš„ï¼Œè¿™æ—¶å€™å°±å¼•å‡ºäº†yieldã€‚å¦‚æœä½¿ç”¨yieldé‡å†™çš„è¯ï¼Œå‡½æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    index = <span class="number">0</span></div><div class="line">    a = <span class="number">0</span></div><div class="line">    b = <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> index &lt; n:</div><div class="line">        index += <span class="number">1</span></div><div class="line">        a, b = b, a+b</div><div class="line">        <span class="keyword">yield</span> a</div><div class="line">        </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fib(<span class="number">20</span>):</div><div class="line">    print(i)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„fibå› ä¸ºåŒ…å«äº†yieldè¯­å¥æ‰€ä»¥æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼Œå½“è¿è¡Œfibå‡½æ•°æ—¶ï¼Œæ¯æ¬¡åªå–å½“å‰è¿ç®—åˆ°çš„æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯æ¬¡è¿è¡Œåˆ°yieldè¯­å¥æ—¶ï¼Œfibå‡½æ•°æš‚åœï¼Œå½“ä¸‹ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œåˆä¼šä»æš‚åœçš„ä½ç½®ç»§ç»­è¿è¡Œã€‚</p>
<p>é‚£ä¹ˆè®²åˆ°è¿™é‡Œï¼Œè¿™å’Œåç¨‹æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<p><strong>å¾ˆå®¹æ˜“æƒ³åˆ°å¦‚æœèƒ½å¤Ÿä»yieldè¯­å¥è¿›å…¥å¦ä¸€ä¸ªå‡½æ•°å¹¶è·å–å…¶è¿”å›å€¼ï¼Œä¸å°±æ˜¯åç¨‹çš„å®ç°å—ï¼Ÿ</strong></p>
<p>è¿™é‡Œå¼•å…¥äº†sendçš„ç”¨æ³•ï¼Œsendçš„ä½œç”¨å³æ˜¯æŠŠå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¼ é€’ç»™å½“å‰å‡½æ•°ï¼ˆPSï¼šè¿™é‡Œè¯´å‡½æ•°è¿”å›å€¼æ˜¯ä¸ºäº†å¸®åŠ©ç†è§£ï¼Œå…¶å®å°±æ˜¯å†æ¬¡è¿›å…¥å‡½æ•°æ—¶èƒ½å¤Ÿè·å–å¤–ç•Œä¼ é€’è¿›æ¥çš„å‚æ•°ï¼‰ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">stupid_fib</span><span class="params">(n)</span>:</span></div><div class="line">    index = <span class="number">0</span></div><div class="line">    a = <span class="number">0</span></div><div class="line">    b = <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> index &lt; n:</div><div class="line">        </div><div class="line">        index += <span class="number">1</span></div><div class="line">        a, b = b, a+b</div><div class="line">        <span class="comment">#sleep_cnt è·å–å¤–ç•Œsendçš„å€¼</span></div><div class="line">        sleep_cnt = <span class="keyword">yield</span> a</div><div class="line">        </div><div class="line">        print(<span class="string">'let me think &#123;&#125; secs'</span>.format(sleep_cnt))</div><div class="line">        time.sleep(sleep_cnt)</div><div class="line"></div><div class="line">sfib = stupid_fib(<span class="number">20</span>)</div><div class="line">fib_res = next(sfib)</div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    print(fib_res)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        fib_res = sfib.send(random.uniform(<span class="number">0</span>, <span class="number">0.5</span>))</div><div class="line">    <span class="keyword">except</span> StopIteration:</div><div class="line">        <span class="keyword">break</span></div></pre></td></tr></table></figure>
<p>ç›®å‰ä¸ºæ­¢ï¼Œé€šè¿‡ yield ä¸ send å°±å®ç°äº†ç±»ä¼¼åç¨‹çš„æœºåˆ¶ã€‚</p>
<p>è¦è¿›ä¸€æ­¥äº†è§£åç¨‹å¯ä»¥æ·±å…¥åœ°å­¦ä¹ ä¸€ä¸‹asyncio.coroutineå’Œyield fromä»¥åŠpython3.5ä¸­å¼•å…¥çš„æ–°æœºåˆ¶asyncå’Œawaitã€‚</p>
<p>å¦å¤–æœ¬ç¯‡åšæ–‡ä¸»è¦å‚è€ƒï¼š<a href="http://blog.guoyb.com/2016/07/03/python-coroutine/" target="_blank" rel="external">Pythonåç¨‹ï¼šä»yield/sendåˆ°async/await</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¦äº†è§£åç¨‹ï¼Œé¦–å…ˆè¦å¯¹å­ä¾‹ç¨‹æœ‰æ‰€è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;å­ä¾‹ç¨‹å¯ä»¥ç±»æ¯”äºç¨‹åºä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè°ƒç”¨è¿‡ç¨‹æ˜¯åå…¥å…ˆå‡ºçš„æ ˆå¼è°ƒç”¨ï¼›&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åç¨‹å¯ä»¥é€šè¿‡yieldæ¥è°ƒç”¨å…¶å®ƒåç¨‹ã€‚é€šè¿‡yieldæ–¹å¼è½¬ç§»æ‰§è¡Œæƒçš„åç¨‹ä¹‹é—´ä¸æ˜¯è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…çš„å…³ç³»ï¼Œè€Œæ˜¯å½¼æ­¤å¯¹ç§°
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python, ç½‘ç»œ" scheme="http://blog.yinwoods.work/tags/python-%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>python challengeå‰åä¸‰å…³ç­”æ¡ˆ</title>
    <link href="http://blog.yinwoods.work/2016/05/31/python-challenge%E5%89%8D%E5%8D%81%E4%B8%89%E5%85%B3%E7%AD%94%E6%A1%88/"/>
    <id>http://blog.yinwoods.work/2016/05/31/python-challengeå‰åä¸‰å…³ç­”æ¡ˆ/</id>
    <published>2016-05-30T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¶ç„¶é—´å‘ç°äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„pythonç»ƒä¹ ç½‘ç«™<a href="http://www.pythonchallenge.com/" target="_blank" rel="external">Python Challenge</a>ï¼Œå…·ä½“æ¯ä¸€å…³çš„ç©æ³•æ˜¯æ ¹æ®æä¾›çš„çº¿ç´¢ç¼–ç¨‹å¾—åˆ°è¿›å…¥ä¸‹ä¸€å…³çš„URLã€‚æ¸¸æˆä¸€å…±æœ‰33å…³ï¼Œæˆ‘ç©äº†ä¸€ä¸‹åˆï¼Œåˆ°ç¬¬åä¸‰å…³å‘ç°é€»è¾‘æ€§ã€è¶£å‘³æ€§å·²ç»å¼±äº†å¾ˆå¤šï¼Œä¹Ÿå°±ä¸æ‰“ç®—ç»§ç»­ç©ä¸‹å»äº†ï¼Œæ‰€ä»¥è¿™é‡Œä¹‹ç»™å‡ºå‰åä¸‰å…³ç­”æ¡ˆã€‚ï¼ˆPSï¼šå°±ä¸ªäººæ¥è¯´ï¼Œå‰é¢çš„ä¸€äº›å…³å¡é€»è¾‘æ€§æ¯”è¾ƒå¼ºï¼Œè‡ªå·±å¤šæ¨ç†éƒ½å¯ä»¥è§£å†³ï¼Œä½†åé¢çœŸçš„æ˜¯é è„‘æ´äº†ï¼Œå¯èƒ½ç¡®å®éœ€è¦æŸ¥çœ‹ä¸€äº›ç½‘ä¸Šçš„æç¤ºæ‰èƒ½è¿‡å…³ã€‚ï¼‰</p>
<h3 id="ç¬¬0å…³"><a href="#ç¬¬0å…³" class="headerlink" title="ç¬¬0å…³"></a>ç¬¬0å…³</h3><p>çº¿ç´¢ï¼š<code>ç½‘é¡µä¸­é—´æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡ä¸Šæ˜¯ä¸€ä¸ªæ˜¾ç¤ºå™¨ï¼Œæ˜¾ç¤º2çš„38æ¬¡æ–¹ï¼›å›¾ç‰‡ä¸‹æ–¹æ˜¯æç¤ºï¼šå°è¯•ä¿®æ”¹URLåœ°å€ã€‚</code></p>
<p>å› æ­¤æƒ³åˆ°ï¼ŒæŠŠurlæœ€åçš„0æ¢ä¸º2çš„38æ¬¡æ–¹ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">id = <span class="number">2</span>**<span class="number">38</span></div><div class="line">url = <span class="string">'http://www.pythonchallenge.com/pc/def/'</span> + str(id) + <span class="string">'.html'</span></div><div class="line">print(url)</div><div class="line"></div><div class="line">req = requests.get(url)</div><div class="line">print(req.text)</div></pre></td></tr></table></figure>
<p>æˆåŠŸè¿›å…¥ä¸‹ä¸€å…³<a href="http://www.pythonchallenge.com/pc/def/274877906944.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/274877906944.html</a>ï¼</p>
<h3 id="ç¬¬1å…³"><a href="#ç¬¬1å…³" class="headerlink" title="ç¬¬1å…³"></a>ç¬¬1å…³</h3><p>çº¿ç´¢ï¼š<code>å›¾ç‰‡æ˜¯ä¸€ä¸ªç¬”è®°æœ¬ï¼Œç»™å‡ºK-&gt;M O-&gt;Q E-&gt;Gï¼›å‘ç°å¯¹åº”çš„å­—æ¯asciiç ç›¸å·®2ï¼Œå›¾ç‰‡ä¸‹æ–¹ç»™å‡ºä¸€æ®µç´«è‰²çš„å®Œå…¨ä¸çŸ¥é“å«ä¹‰çš„è‹±æ–‡ã€‚</code></p>
<p>å¯ä»¥æƒ³åˆ°ï¼Œå¯¹ä¸‹é¢çš„è¿™æ®µè‹±æ–‡è§£å¯†ï¼Œè§£å¯†çš„å…³é”®å°±æ˜¯æ¯ä¸ªå­—æ¯çš„asciiå¾ªç¯åŠ 2ã€‚</p>
<p>å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">str = <span class="string">"g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. "</span> \</div><div class="line">      <span class="string">"bmgle gr gl zw fylb gq glcddgagclr ylb rfyr'q ufw rfgq rcvr gq qm jmle. "</span> \</div><div class="line">      <span class="string">"sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj."</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> char <span class="keyword">in</span> str:</div><div class="line">    <span class="keyword">if</span> ord(char) &lt;= <span class="number">122</span> <span class="keyword">and</span> ord(char) &gt;= <span class="number">97</span>:</div><div class="line">        asc = ord(char) + <span class="number">2</span></div><div class="line">        <span class="keyword">if</span> asc &gt; <span class="number">122</span>:</div><div class="line">            asc -= <span class="number">26</span></div><div class="line">        print(chr(asc), end=<span class="string">''</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(char, end=<span class="string">''</span>)</div><div class="line">print()</div></pre></td></tr></table></figure>
<p>è¿è¡Œåå¾—åˆ°è¾“å‡ºï¼š<code>i hope you didnt translate it by hand. thats what computers are for. doing it in by hand is inefficient and that&#39;s why this text is so long. using string.maketrans() is recommended. now apply on the url.</code></p>
<p>æŸ¥äº†ä¸‹str.maketrans()å‘ç°ç”¨è¿™ä¸ªæ›¿æ¢æ›´æ–¹ä¾¿ï¼Œå› æ­¤ç›´æ¥ç”¨å¦‚ä¸‹æ–¹æ³•å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">str = <span class="string">"g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. "</span> \</div><div class="line">      <span class="string">"bmgle gr gl zw fylb gq glcddgagclr ylb rfyr'q ufw rfgq rcvr gq qm jmle. "</span> \</div><div class="line">      <span class="string">"sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj."</span></div><div class="line">print(str.translate(str.maketrans(<span class="string">'abcdefghijklmnopqrstuvwxyz'</span>, <span class="string">'cdefghijklmnopqrstuvwxyzab'</span>)))</div><div class="line"><span class="comment">#æ­¤æ—¶çš„urlè¢«é‡å®šå‘ä¸ºmap.html</span></div><div class="line">print(<span class="string">'map'</span>.translate(str.maketrans(<span class="string">'abcdefghijklmnopqrstuvwxyz'</span>, <span class="string">'cdefghijklmnopqrstuvwxyzab'</span>)))</div></pre></td></tr></table></figure>
<p>è¿è¡Œåå¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/ocr.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/ocr.html</a></p>
<h3 id="ç¬¬2å…³"><a href="#ç¬¬2å…³" class="headerlink" title="ç¬¬2å…³"></a>ç¬¬2å…³</h3><p>çº¿ç´¢ï¼š<code>æ–‡å­—æç¤ºè¯†åˆ«å­—ç¬¦ï¼Œå­—ç¬¦å¯èƒ½åœ¨ä¹¦ä¸­ä¹Ÿå¯èƒ½åœ¨å…¶ä»–åœ°æ–¹ã€‚</code></p>
<p>å› ä¸ºæˆ‘ç›´æ¥ç”¨å¾—requestè·å–ç½‘é¡µæºç ï¼Œæ‰€ä»¥çœ‹åˆ°äº†ä¸€å †æ³¨é‡Šçš„ä¹±ä¸ƒå…«ç³Ÿçš„ç¬¦å·ï¼Œè¦åšçš„å…¶å®å°±æ˜¯æå–å‡ºè¿™äº›ç¬¦å·ä¸­çš„å­—ç¬¦ã€‚</p>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> requests</div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/ocr.html'</span>)</div><div class="line">left = req.text.rfind(<span class="string">'&lt;!--'</span>)</div><div class="line">right = req.text.rfind(<span class="string">'--&gt;'</span>)</div><div class="line"></div><div class="line">str = req.text[left+<span class="number">4</span>:right]</div><div class="line"><span class="keyword">for</span> chs <span class="keyword">in</span> str:</div><div class="line">    <span class="keyword">if</span> chs.isalpha():</div><div class="line">        print(chs, end=<span class="string">''</span>)</div></pre></td></tr></table></figure>
<p>è¿è¡Œåè¾“å‡ºeequalityï¼Œ å› æ­¤å¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/equality.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/equality.html</a></p>
<h3 id="ç¬¬3å…³"><a href="#ç¬¬3å…³" class="headerlink" title="ç¬¬3å…³"></a>ç¬¬3å…³</h3><p>çº¿ç´¢ï¼š<code>æç¤ºï¼šæ¯è¾¹éƒ½æœ‰ä¸”ä»…æœ‰3ä¸ªå¤§ä¿é•–çš„å°å­—ç¬¦ã€‚ï¼ˆè«åèŒæ„Ÿï¼‰</code></p>
<p>ä¸å¾—ä¸è¯´è¿™é‡Œæ˜¯ä¸ªå‘ï¼ˆä¹Ÿæ€ªè‡ªå·±è‹±è¯­ç†è§£èƒ½åŠ›åŠŸåŠ›ä¸å¤Ÿï¼‰ï¼Œæˆ‘å¼€å§‹ä»¥ä¸ºæ˜¯æ‰¾åˆ°ä¹å®«æ ¼ä¸­ä»…æœ‰ä¸­é—´ä¸€æ ¼å†…æ˜¯å°å†™å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦ï¼Œç»“æœæ‰¾å‡ºäº†ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„å­—ç¬¦ã€‚å›§</p>
<p>çœ‹äº†ç­”æ¡ˆæ‰çŸ¥é“ï¼Œæç¤ºé‡Œçš„EXACTLYç€é‡åœ¨â€œ3ä¸ªâ€ï¼Œè€Œä¸æ˜¯â€œæ¯æ¡è¾¹â€ï¼Œæ‰€ä»¥çœŸæ­£çš„å«ä¹‰æ˜¯æ‰¾åˆ°æ‰€æœ‰çš„æ°å¥½å·¦ä¾§å’Œå³ä¾§éƒ½åªæœ‰3ä¸ªå¤§å†™å­—ç¬¦çš„å°å†™å­—ç¬¦ã€‚</p>
<p>ç›´åˆ°çœŸå®å«ä¹‰åè‡ªå·±åˆå®ç°äº†ä¸‹ï¼Œåæ¥å‘ç°ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸€è¡Œå°±å¤Ÿäº†ã€‚ã€‚ã€‚çœ‹æ¥è‡ªå·±çš„å§¿åŠ¿è¿˜æ˜¯ä¸å¤Ÿå¤šï¼Œä¸å¤Ÿpythonicã€‚</p>
<p>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">judgeItem</span><span class="params">(mat, i, j)</span>:</span></div><div class="line">    <span class="keyword">if</span> i &lt; <span class="number">0</span> <span class="keyword">or</span> j &lt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line">    <span class="keyword">if</span> i &gt;= len(mat) <span class="keyword">or</span> j &gt;= len(mat[i]):</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line">    char = mat[i][j]</div><div class="line">    <span class="keyword">if</span> char &gt;= <span class="string">'A'</span> <span class="keyword">and</span> char &lt;= <span class="string">'Z'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">if</span> char &gt;= <span class="string">'a'</span> <span class="keyword">and</span> char &lt;= <span class="string">'z'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line">    <span class="keyword">return</span> <span class="number">-1</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(mat, i, j)</span>:</span></div><div class="line">    <span class="keyword">if</span> mat[i][j] &gt;= <span class="string">'a'</span> <span class="keyword">and</span> mat[i][j] &lt;= <span class="string">'z'</span>:</div><div class="line">        bodyGds = judgeItem(mat, i, j<span class="number">-3</span>) + judgeItem(mat, i, j<span class="number">-2</span>) + judgeItem(mat, i, j<span class="number">-1</span>)</div><div class="line">        bodyGds += judgeItem(mat, i, j+<span class="number">1</span>) + judgeItem(mat, i, j+<span class="number">2</span>) + judgeItem(mat, i, j+<span class="number">3</span>)</div><div class="line">        <span class="keyword">if</span> bodyGds == <span class="number">6</span> <span class="keyword">and</span> judgeItem(mat, i, j<span class="number">-4</span>) == <span class="number">0</span> <span class="keyword">and</span> judgeItem(mat, i, j+<span class="number">4</span>) == <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> requests</div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/equality.html'</span>)</div><div class="line">left = req.text.rfind(<span class="string">'&lt;!--'</span>)</div><div class="line">right = req.text.rfind(<span class="string">'--&gt;'</span>)</div><div class="line"></div><div class="line">str = req.text[left+<span class="number">4</span>:right]</div><div class="line"></div><div class="line">mat = []</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> str.split(<span class="string">'\n'</span>):</div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> line == <span class="string">''</span>:</div><div class="line">        mat.append(line)</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(mat)):</div><div class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(len(mat[i])):</div><div class="line">        <span class="keyword">if</span> judge(mat, i, j):</div><div class="line">            print(mat[i][j], end=<span class="string">''</span>)</div><div class="line"></div><div class="line"><span class="comment">#ä»¥ä¸Šä¸ºæˆ‘çš„å®ç°æ–¹å¼ã€‚ã€‚ã€‚ã€‚</span></div><div class="line"><span class="comment">#ç®€æ´çš„æ–¹æ³•</span></div><div class="line">print(<span class="string">''</span>.join(re.findall(<span class="string">"[^A-Z]+[A-Z]&#123;3&#125;([a-z])[A-Z]&#123;3&#125;[^A-Z]"</span>, str)))</div></pre></td></tr></table></figure>
<p>anywayï¼Œå¾—åˆ°äº†ä¸‹ä¸€å…³çš„å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/linkedlist.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/linkedlist.html</a></p>
<h3 id="ç¬¬4å…³"><a href="#ç¬¬4å…³" class="headerlink" title="ç¬¬4å…³"></a>ç¬¬4å…³</h3><p>çº¿ç´¢ï¼š<code>æ‰“å¼€åæ˜¾ç¤ºlinkedlist.phpï¼Œå› æ­¤æ‰‹åŠ¨è½¬å…¥ï¼Œå‘ç°é¡µé¢æ ‡é¢˜æ˜¯follow the chainï¼Œ å¦å¤–å›¾ç‰‡æ˜¯ä¸€ä¸ªé“¾æ¥</code></p>
<p>æ„Ÿè§‰å¥½åƒæ²¡ä»€ä¹ˆçº¿ç´¢ï¼Œå› ä¸ºæˆ‘è¿˜æ˜¯ç”¨requestè·å–æºç ï¼Œæ‰€ä»¥çœ‹åˆ°äº†é¢å¤–çš„ä¿¡æ¯â€¦</p>
<p>â€˜â€™â€™<br><!-- urllib may help. DON'T TRY ALL NOTHINGS, since it will never 
end. 400 times is more than enough. --><br>â€˜â€™â€™</p>
<p>ç»“åˆç‚¹å‡»å›¾ç‰‡åè¿›å…¥çš„é¡µé¢å¯ä»¥çŒœæƒ³è¿™æ˜¯ä¸€ä¸ªè¶…è¿‡400ä¸ªèŠ‚ç‚¹çš„é“¾ï¼Œæˆ‘ä»¬è¦åšçš„å…¶å®å°±æ˜¯ç”¨çˆ¬è™«æ¥èµ°è¿™ä¸ªé“¾ï¼Œä¸€ç›´èµ°åˆ°ç»ˆç‚¹å¾—åˆ°ç­”æ¡ˆã€‚</p>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">baseUrl = <span class="string">'http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing='</span></div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/linkedlist.php'</span>)</div><div class="line">res = re.findall(<span class="string">'(\d+)'</span>, req.text)</div><div class="line"></div><div class="line">req = requests.get(baseUrl + res[<span class="number">1</span>])</div><div class="line">print(baseUrl+res[<span class="number">1</span>], req.text)</div><div class="line">res = re.findall(<span class="string">'(\d+)'</span>, req.text)</div><div class="line"></div><div class="line"><span class="comment">#while True:</span></div><div class="line"><span class="comment">#    req = requests.get(baseUrl + res[0])</span></div><div class="line"><span class="comment">#    print(baseUrl+res[0], req.text)</span></div><div class="line"><span class="comment">#    res = re.findall('(\d+)', req.text)</span></div><div class="line"><span class="comment">#    if res == '':</span></div><div class="line"><span class="comment">#        break</span></div><div class="line"><span class="comment">#    print(res)</span></div><div class="line"></div><div class="line"><span class="comment">#è¿è¡Œä¹‹åä¸­é—´ä¼šæ–­ä¸€æ¬¡ï¼Œéœ€è¦é™¤ä»¥2ä¹‹åå†è·‘</span></div><div class="line"><span class="comment">#http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=16044 Yes. Divide by two and keep going.</span></div><div class="line"></div><div class="line"><span class="comment">#åæœŸè¿˜ä¼šç»™å‡ºä¸¤ä¸ªnothingçš„ä¾‹å­ï¼Œè¿™ä¸ªåŠ ä¸€ä¸ªåˆ¤æ–­å°±å¥½ï¼Œå¦‚æœå‡ºç°ä¸¤ä¸ªå°±å–ç¬¬äºŒä¸ª</span></div><div class="line"></div><div class="line">res.clear()</div><div class="line">res.append(str(<span class="number">16044</span>/<span class="number">2</span>))</div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">if</span> len(res) == <span class="number">2</span>:</div><div class="line">        url = baseUrl + res[<span class="number">1</span>]</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        url = baseUrl + res[<span class="number">0</span>]</div><div class="line">    req = requests.get(url)</div><div class="line">    print(url, req.text)</div><div class="line">    res = re.findall(<span class="string">'(\d+)'</span>, req.text)</div><div class="line">    <span class="keyword">if</span> len(res) == <span class="number">0</span>:</div><div class="line">        <span class="keyword">break</span></div></pre></td></tr></table></figure>
<p>æœ€ç»ˆå¾—åˆ°peak.html</p>
<p>å› æ­¤å¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/peak.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/peak.html</a></p>
<h3 id="ç¬¬5å…³"><a href="#ç¬¬5å…³" class="headerlink" title="ç¬¬5å…³"></a>ç¬¬5å…³</h3><p>è¿™ä¸€å…³å°±æ˜¯é˜…è¯»ç†è§£äº†ã€‚ã€‚ã€‚</p>
<p>çº¿ç´¢ï¼š<code>è¿›å…¥åå‘ç°æœ‰å¼ å›¾ç‰‡ï¼Œå‘½åä¸ºpeakhell.jpgï¼Œä¸‹é¢æç¤ºpronounce itï¼Œå¦å¤–é¡µé¢æºç å¯ä»¥å‘ç°ä¸€ä¸ªpeakhellæ ‡ç­¾ï¼ŒæŒ‡å‘banner.pé“¾æ¥ï¼Œå¹¶æç¤ºpeak hellå¬èµ·æ¥ç†Ÿæ‚‰å—ï¼Ÿ</code></p>
<p>è¿™é“é¢˜æˆ‘æ˜¯æ²¡æƒ³å‡ºæ¥ï¼Œgoogleä¹‹åå‘ç°æ˜¯è¿›å…¥banner.pé“¾æ¥åï¼Œæ ¹æ®pythonçš„pickleæ¨¡å—æ¥å¤„ç†ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> pickle</div><div class="line"><span class="keyword">import</span>  requests</div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/peak.html'</span>)</div><div class="line">print(req.text) <span class="comment">#å¾—åˆ°banner.p</span></div><div class="line">req = urllib.request.urlopen(<span class="string">'http://www.pythonchallenge.com/pc/def/banner.p'</span>)</div><div class="line">req = pickle.loads(req.read())</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> req:</div><div class="line">    print(<span class="string">''</span>.join(elmt[<span class="number">0</span>] * elmt[<span class="number">1</span>] <span class="keyword">for</span> elmt <span class="keyword">in</span> line))</div></pre></td></tr></table></figure>
<p>å¾—åˆ°ä¸‹ä¸€å…³çš„å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/channel.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/channel.html</a></p>
<h3 id="ç¬¬6å…³"><a href="#ç¬¬6å…³" class="headerlink" title="ç¬¬6å…³"></a>ç¬¬6å…³</h3><p>çº¿ç´¢ï¼š<code>é¡µé¢å†…å¯ç”¨ä¿¡æ¯æå…¶å°‘ï¼Œä¸‹æ–¹çš„ææ¬¾ä¿¡æ¯æ¯«æ— ç–‘é—®ä¸èƒ½ç®—æ˜¯çº¿ç´¢ï¼Œåªæœ‰ä¸€ä¸ªæ³¨é‡Šzip</code></p>
<p>æ ¹æ®zipå¯çŸ¥è¿™å…³å¯èƒ½éœ€è¦è§£å‹æ¨¡å—zipï¼Œå¯æ˜¯è§£å‹ä»€ä¹ˆå‘¢ï¼Ÿå°è¯•è¿›å…¥zip.htmlä¼šå¾—åˆ°ä¸€æ¡ä¿¡æ¯ï¼šyes. find the zipã€‚é‚£ä¹ˆè¯´æ˜è¿™ä¸ªæ€è·¯æ˜¯å¯¹çš„ï¼Œä»è€Œæƒ³åˆ°æŠŠchannel.htmlæ¢æˆchannel.zipä¼šä¸‹è½½åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚è§£å‹åå‘ç°é‡Œé¢æœ‰ä¸ªREADMEæ–‡ä»¶ï¼Œåˆæ˜¯nothingâ€¦ä¸‹é¢å°±æ˜¯å’Œç¬¬4å…³ç±»ä¼¼çš„æ“ä½œäº†ï¼Œä¸åŒçš„æ˜¯ç¬¬4å…³æ˜¯ç½‘é¡µï¼Œè¿™æ¬¡æ˜¯æ–‡ä»¶ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> zipfile</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/channel.html'</span>)</div><div class="line">print(req.text)<span class="comment">#http://www.pythonchallenge.com/pc/def/channel.zip ä¸‹è½½</span></div><div class="line">zpfile = zipfile.ZipFile(<span class="string">"channel.zip"</span>)</div><div class="line"></div><div class="line">id = <span class="number">90052</span><span class="comment">#æºè‡ªREADME</span></div><div class="line">res = []</div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        id = re.search(<span class="string">'(\d+)'</span>, str(zpfile.read(str(id) + <span class="string">'.txt'</span>))).group(<span class="number">1</span>)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        print(zpfile.read(str(id) + <span class="string">'.txt'</span>))</div><div class="line">        <span class="keyword">break</span></div><div class="line">    print(id)</div><div class="line">    res.append(zpfile.getinfo(str(id) + <span class="string">'.txt'</span>).comment.decode(<span class="string">'utf-8'</span>))</div><div class="line"></div><div class="line">print(<span class="string">''</span>.join(res))<span class="comment">#HOCKEY</span></div><div class="line"></div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/hockey.html'</span>)</div><div class="line"></div><div class="line"><span class="comment">#æç¤ºç»“æœæ˜¯ç©ºæ°”çš„æˆåˆ†ï¼Œè§‚å¯ŸHOCKEYçš„ç»„æˆï¼Œå‘ç°æ˜¯oxygen</span></div><div class="line">print(req.text)<span class="comment">#OXYGEY</span></div></pre></td></tr></table></figure>
<p>å¾—åˆ°ä¸‹ä¸€å…³çš„å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/oxygen.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/oxygen.html</a></p>
<h3 id="ç¬¬7å…³"><a href="#ç¬¬7å…³" class="headerlink" title="ç¬¬7å…³"></a>ç¬¬7å…³</h3><p>çº¿ç´¢ï¼š<code>é¡µé¢ä»…æœ‰ä¸€å¼ æ‰“ç çš„å›¾ç‰‡</code></p>
<p>è‡ªå·±æƒ³ä¸å‡ºæ¥ï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°è¯´æ˜¯å¯¹å›¾ç‰‡çš„æ‰“ç éƒ¨åˆ†æŒ‰asciiè§£ç ã€‚ã€‚ã€‚ä¸æ˜è§‰å‰ã€‚ï¼ˆPSï¼šä»è¿™é‡Œå¼€å§‹ï¼Œæ„Ÿè§‰é€»è¾‘æ€§å°±å¼±äº†å¾ˆå¤šï¼‰</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PIL.Image</div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"><span class="comment">#req = requests.get('http://www.pythonchallenge.com/pc/def/oxygen.html')</span></div><div class="line"><span class="comment">#print(req.text)</span></div><div class="line">img = PIL.Image.open(urllib.request.urlopen(<span class="string">'http://www.pythonchallenge.com/pc/def/oxygen.png'</span>))</div><div class="line">row = [chr(img.getpixel((x, <span class="number">45</span>))[<span class="number">0</span>]) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">609</span>, <span class="number">7</span>)]</div><div class="line">print(<span class="string">''</span>.join(row))</div><div class="line">row = [chr(x) <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">105</span>, <span class="number">110</span>, <span class="number">116</span>, <span class="number">101</span>, <span class="number">103</span>, <span class="number">114</span>, <span class="number">105</span>, <span class="number">116</span>, <span class="number">121</span>]]</div><div class="line">print(<span class="string">''</span>.join(row))</div></pre></td></tr></table></figure>
<p>å¾—åˆ°å•è¯integrityï¼Œä»è€Œå¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/def/integrity.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/def/integrity.html</a></p>
<h3 id="ç¬¬8å…³"><a href="#ç¬¬8å…³" class="headerlink" title="ç¬¬8å…³"></a>ç¬¬8å…³</h3><p>çº¿ç´¢ï¼š<code>è¿›å…¥åå‘ç°å›¾ç‰‡ä¸­çš„èœœèœ‚æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œå¦å¤–é¡µé¢æºç ä¸­åŒ…å«unå’Œpwä¸¤ä¸ªå­—ç¬¦ä¸²</code></p>
<p>ç‚¹å‡»é“¾æ¥åæç¤ºè¾“å…¥ç”¨æˆ·åã€å¯†ç ï¼Œç»“åˆunã€pwå¯ä»¥çŒœæƒ³è¿™äºŒè€…å¯¹åº”username,passwordã€‚</p>
<p>çœ‹ç­”æ¡ˆçŸ¥é“æ˜¯ç”¨bz2è§£å¯†ã€‚ã€‚ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> bz2</div><div class="line"><span class="keyword">import</span> requests</div><div class="line">req = requests.get(<span class="string">'http://www.pythonchallenge.com/pc/def/integrity.html'</span>)</div><div class="line">print(req.text)</div><div class="line">print(bz2.decompress(<span class="string">b'BZh91AY&amp;SYA\xaf\x82\r\x00\x00\x01\x01\x80\x02\xc0\x02\x00 \x00!\x9ah3M\x07&lt;]\xc9\x14\xe1BA\x06\xbe\x084'</span>))</div><div class="line">print(bz2.decompress(<span class="string">b'BZh91AY&amp;SY\x94$|\x0e\x00\x00\x00\x81\x00\x03$ \x00!\x9ah3M\x13&lt;]\xc9\x14\xe1BBP\x91\xf08'</span>))</div></pre></td></tr></table></figure>
<p>å¾—åˆ°ç”¨æˆ·åï¼šhuge å¯†ç ï¼šfile</p>
<p>ç‚¹å‡»é“¾æ¥è¾“å…¥åå¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/return/good.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/return/good.html</a></p>
<h3 id="ç¬¬9å…³"><a href="#ç¬¬9å…³" class="headerlink" title="ç¬¬9å…³"></a>ç¬¬9å…³</h3><p>çº¿ç´¢ï¼š<code>æ ‡é¢˜ä¸ºconnect the dotsï¼Œ é¡µé¢å›¾ç‰‡ä¸­ä¹ŸåŒ…å«äº†å¾ˆå¤šé»‘ç‚¹ï¼›å¦å¤–æºç ä¸­ç»™å‡ºfirst secondï¼Œ å¹¶é—®first + second = ?</code></p>
<p>ç»“åˆfirst secondä¸­æ•°å€¼ç‰¹ç‚¹å¯ä»¥çŒœæƒ³æ˜¯åæ ‡é›†ï¼Œä¸‹é¢ç´¢è¦åšçš„å°±æ˜¯åˆ†åˆ«æŠŠfirstå’Œsecondä¸­çš„åæ ‡è¿æ¥èµ·æ¥ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageDraw</div><div class="line"></div><div class="line">img = Image.open(<span class="string">'good.jpg'</span>)</div><div class="line">draw = ImageDraw.Draw(img)</div><div class="line"></div><div class="line">first = [ <span class="number">146</span>,<span class="number">399</span>,<span class="number">163</span>,<span class="number">403</span>,<span class="number">170</span>,<span class="number">393</span>,<span class="number">169</span>,<span class="number">391</span>,<span class="number">166</span>,<span class="number">386</span>,<span class="number">170</span>,<span class="number">381</span>,<span class="number">170</span>,<span class="number">371</span>,<span class="number">170</span>,<span class="number">355</span>,<span class="number">169</span>,<span class="number">346</span>,<span class="number">167</span>,<span class="number">335</span>,<span class="number">170</span>,<span class="number">329</span>,<span class="number">170</span>,<span class="number">320</span>,<span class="number">170</span>,</div><div class="line"><span class="number">310</span>,<span class="number">171</span>,<span class="number">301</span>,<span class="number">173</span>,<span class="number">290</span>,<span class="number">178</span>,<span class="number">289</span>,<span class="number">182</span>,<span class="number">287</span>,<span class="number">188</span>,<span class="number">286</span>,<span class="number">190</span>,<span class="number">286</span>,<span class="number">192</span>,<span class="number">291</span>,<span class="number">194</span>,<span class="number">296</span>,<span class="number">195</span>,<span class="number">305</span>,<span class="number">194</span>,<span class="number">307</span>,<span class="number">191</span>,<span class="number">312</span>,<span class="number">190</span>,<span class="number">316</span>,</div><div class="line"><span class="number">190</span>,<span class="number">321</span>,<span class="number">192</span>,<span class="number">331</span>,<span class="number">193</span>,<span class="number">338</span>,<span class="number">196</span>,<span class="number">341</span>,<span class="number">197</span>,<span class="number">346</span>,<span class="number">199</span>,<span class="number">352</span>,<span class="number">198</span>,<span class="number">360</span>,<span class="number">197</span>,<span class="number">366</span>,<span class="number">197</span>,<span class="number">373</span>,<span class="number">196</span>,<span class="number">380</span>,<span class="number">197</span>,<span class="number">383</span>,<span class="number">196</span>,<span class="number">387</span>,<span class="number">192</span>,</div><div class="line"><span class="number">389</span>,<span class="number">191</span>,<span class="number">392</span>,<span class="number">190</span>,<span class="number">396</span>,<span class="number">189</span>,<span class="number">400</span>,<span class="number">194</span>,<span class="number">401</span>,<span class="number">201</span>,<span class="number">402</span>,<span class="number">208</span>,<span class="number">403</span>,<span class="number">213</span>,<span class="number">402</span>,<span class="number">216</span>,<span class="number">401</span>,<span class="number">219</span>,<span class="number">397</span>,<span class="number">219</span>,<span class="number">393</span>,<span class="number">216</span>,<span class="number">390</span>,<span class="number">215</span>,<span class="number">385</span>,</div><div class="line"><span class="number">215</span>,<span class="number">379</span>,<span class="number">213</span>,<span class="number">373</span>,<span class="number">213</span>,<span class="number">365</span>,<span class="number">212</span>,<span class="number">360</span>,<span class="number">210</span>,<span class="number">353</span>,<span class="number">210</span>,<span class="number">347</span>,<span class="number">212</span>,<span class="number">338</span>,<span class="number">213</span>,<span class="number">329</span>,<span class="number">214</span>,<span class="number">319</span>,<span class="number">215</span>,<span class="number">311</span>,<span class="number">215</span>,<span class="number">306</span>,<span class="number">216</span>,<span class="number">296</span>,<span class="number">218</span>,</div><div class="line"><span class="number">290</span>,<span class="number">221</span>,<span class="number">283</span>,<span class="number">225</span>,<span class="number">282</span>,<span class="number">233</span>,<span class="number">284</span>,<span class="number">238</span>,<span class="number">287</span>,<span class="number">243</span>,<span class="number">290</span>,<span class="number">250</span>,<span class="number">291</span>,<span class="number">255</span>,<span class="number">294</span>,<span class="number">261</span>,<span class="number">293</span>,<span class="number">265</span>,<span class="number">291</span>,<span class="number">271</span>,<span class="number">291</span>,<span class="number">273</span>,<span class="number">289</span>,<span class="number">278</span>,<span class="number">287</span>,</div><div class="line"><span class="number">279</span>,<span class="number">285</span>,<span class="number">281</span>,<span class="number">280</span>,<span class="number">284</span>,<span class="number">278</span>,<span class="number">284</span>,<span class="number">276</span>,<span class="number">287</span>,<span class="number">277</span>,<span class="number">289</span>,<span class="number">283</span>,<span class="number">291</span>,<span class="number">286</span>,<span class="number">294</span>,<span class="number">291</span>,<span class="number">296</span>,<span class="number">295</span>,<span class="number">299</span>,<span class="number">300</span>,<span class="number">301</span>,<span class="number">304</span>,<span class="number">304</span>,<span class="number">320</span>,<span class="number">305</span>,</div><div class="line"><span class="number">327</span>,<span class="number">306</span>,<span class="number">332</span>,<span class="number">307</span>,<span class="number">341</span>,<span class="number">306</span>,<span class="number">349</span>,<span class="number">303</span>,<span class="number">354</span>,<span class="number">301</span>,<span class="number">364</span>,<span class="number">301</span>,<span class="number">371</span>,<span class="number">297</span>,<span class="number">375</span>,<span class="number">292</span>,<span class="number">384</span>,<span class="number">291</span>,<span class="number">386</span>,<span class="number">302</span>,<span class="number">393</span>,<span class="number">324</span>,<span class="number">391</span>,<span class="number">333</span>,<span class="number">387</span>,</div><div class="line"><span class="number">328</span>,<span class="number">375</span>,<span class="number">329</span>,<span class="number">367</span>,<span class="number">329</span>,<span class="number">353</span>,<span class="number">330</span>,<span class="number">341</span>,<span class="number">331</span>,<span class="number">328</span>,<span class="number">336</span>,<span class="number">319</span>,<span class="number">338</span>,<span class="number">310</span>,<span class="number">341</span>,<span class="number">304</span>,<span class="number">341</span>,<span class="number">285</span>,<span class="number">341</span>,<span class="number">278</span>,<span class="number">343</span>,<span class="number">269</span>,<span class="number">344</span>,<span class="number">262</span>,<span class="number">346</span>,</div><div class="line"><span class="number">259</span>,<span class="number">346</span>,<span class="number">251</span>,<span class="number">349</span>,<span class="number">259</span>,<span class="number">349</span>,<span class="number">264</span>,<span class="number">349</span>,<span class="number">273</span>,<span class="number">349</span>,<span class="number">280</span>,<span class="number">349</span>,<span class="number">288</span>,<span class="number">349</span>,<span class="number">295</span>,<span class="number">349</span>,<span class="number">298</span>,<span class="number">354</span>,<span class="number">293</span>,<span class="number">356</span>,<span class="number">286</span>,<span class="number">354</span>,<span class="number">279</span>,<span class="number">352</span>,<span class="number">268</span>,</div><div class="line"><span class="number">352</span>,<span class="number">257</span>,<span class="number">351</span>,<span class="number">249</span>,<span class="number">350</span>,<span class="number">234</span>,<span class="number">351</span>,<span class="number">211</span>,<span class="number">352</span>,<span class="number">197</span>,<span class="number">354</span>,<span class="number">185</span>,<span class="number">353</span>,<span class="number">171</span>,<span class="number">351</span>,<span class="number">154</span>,<span class="number">348</span>,<span class="number">147</span>,<span class="number">342</span>,<span class="number">137</span>,<span class="number">339</span>,<span class="number">132</span>,<span class="number">330</span>,<span class="number">122</span>,<span class="number">327</span>,</div><div class="line"><span class="number">120</span>,<span class="number">314</span>,<span class="number">116</span>,<span class="number">304</span>,<span class="number">117</span>,<span class="number">293</span>,<span class="number">118</span>,<span class="number">284</span>,<span class="number">118</span>,<span class="number">281</span>,<span class="number">122</span>,<span class="number">275</span>,<span class="number">128</span>,<span class="number">265</span>,<span class="number">129</span>,<span class="number">257</span>,<span class="number">131</span>,<span class="number">244</span>,<span class="number">133</span>,<span class="number">239</span>,<span class="number">134</span>,<span class="number">228</span>,<span class="number">136</span>,<span class="number">221</span>,<span class="number">137</span>,</div><div class="line"><span class="number">214</span>,<span class="number">138</span>,<span class="number">209</span>,<span class="number">135</span>,<span class="number">201</span>,<span class="number">132</span>,<span class="number">192</span>,<span class="number">130</span>,<span class="number">184</span>,<span class="number">131</span>,<span class="number">175</span>,<span class="number">129</span>,<span class="number">170</span>,<span class="number">131</span>,<span class="number">159</span>,<span class="number">134</span>,<span class="number">157</span>,<span class="number">134</span>,<span class="number">160</span>,<span class="number">130</span>,<span class="number">170</span>,<span class="number">125</span>,<span class="number">176</span>,<span class="number">114</span>,<span class="number">176</span>,</div><div class="line"><span class="number">102</span>,<span class="number">173</span>,<span class="number">103</span>,<span class="number">172</span>,<span class="number">108</span>,<span class="number">171</span>,<span class="number">111</span>,<span class="number">163</span>,<span class="number">115</span>,<span class="number">156</span>,<span class="number">116</span>,<span class="number">149</span>,<span class="number">117</span>,<span class="number">142</span>,<span class="number">116</span>,<span class="number">136</span>,<span class="number">115</span>,<span class="number">129</span>,<span class="number">115</span>,<span class="number">124</span>,<span class="number">115</span>,<span class="number">120</span>,<span class="number">115</span>,<span class="number">115</span>,<span class="number">117</span>,</div><div class="line"><span class="number">113</span>,<span class="number">120</span>,<span class="number">109</span>,<span class="number">122</span>,<span class="number">102</span>,<span class="number">122</span>,<span class="number">100</span>,<span class="number">121</span>,<span class="number">95</span>,<span class="number">121</span>,<span class="number">89</span>,<span class="number">115</span>,<span class="number">87</span>,<span class="number">110</span>,<span class="number">82</span>,<span class="number">109</span>,<span class="number">84</span>,<span class="number">118</span>,<span class="number">89</span>,<span class="number">123</span>,<span class="number">93</span>,<span class="number">129</span>,<span class="number">100</span>,<span class="number">130</span>,<span class="number">108</span>,<span class="number">132</span>,<span class="number">110</span>,</div><div class="line"><span class="number">133</span>,<span class="number">110</span>,<span class="number">136</span>,<span class="number">107</span>,<span class="number">138</span>,<span class="number">105</span>,<span class="number">140</span>,<span class="number">95</span>,<span class="number">138</span>,<span class="number">86</span>,<span class="number">141</span>,<span class="number">79</span>,<span class="number">149</span>,<span class="number">77</span>,<span class="number">155</span>,<span class="number">81</span>,<span class="number">162</span>,<span class="number">90</span>,<span class="number">165</span>,<span class="number">97</span>,<span class="number">167</span>,<span class="number">99</span>,<span class="number">171</span>,<span class="number">109</span>,<span class="number">171</span>,<span class="number">107</span>,<span class="number">161</span>,</div><div class="line"><span class="number">111</span>,<span class="number">156</span>,<span class="number">113</span>,<span class="number">170</span>,<span class="number">115</span>,<span class="number">185</span>,<span class="number">118</span>,<span class="number">208</span>,<span class="number">117</span>,<span class="number">223</span>,<span class="number">121</span>,<span class="number">239</span>,<span class="number">128</span>,<span class="number">251</span>,<span class="number">133</span>,<span class="number">259</span>,<span class="number">136</span>,<span class="number">266</span>,<span class="number">139</span>,<span class="number">276</span>,<span class="number">143</span>,<span class="number">290</span>,<span class="number">148</span>,<span class="number">310</span>,<span class="number">151</span>,</div><div class="line"><span class="number">332</span>,<span class="number">155</span>,<span class="number">348</span>,<span class="number">156</span>,<span class="number">353</span>,<span class="number">153</span>,<span class="number">366</span>,<span class="number">149</span>,<span class="number">379</span>,<span class="number">147</span>,<span class="number">394</span>,<span class="number">146</span>,<span class="number">399</span>]</div><div class="line">second = [<span class="number">156</span>,<span class="number">141</span>,<span class="number">165</span>,<span class="number">135</span>,<span class="number">169</span>,<span class="number">131</span>,<span class="number">176</span>,<span class="number">130</span>,<span class="number">187</span>,<span class="number">134</span>,<span class="number">191</span>,<span class="number">140</span>,<span class="number">191</span>,<span class="number">146</span>,<span class="number">186</span>,<span class="number">150</span>,<span class="number">179</span>,<span class="number">155</span>,<span class="number">175</span>,<span class="number">157</span>,<span class="number">168</span>,<span class="number">157</span>,<span class="number">163</span>,<span class="number">157</span>,<span class="number">159</span>,</div><div class="line"><span class="number">157</span>,<span class="number">158</span>,<span class="number">164</span>,<span class="number">159</span>,<span class="number">175</span>,<span class="number">159</span>,<span class="number">181</span>,<span class="number">157</span>,<span class="number">191</span>,<span class="number">154</span>,<span class="number">197</span>,<span class="number">153</span>,<span class="number">205</span>,<span class="number">153</span>,<span class="number">210</span>,<span class="number">152</span>,<span class="number">212</span>,<span class="number">147</span>,<span class="number">215</span>,<span class="number">146</span>,<span class="number">218</span>,<span class="number">143</span>,<span class="number">220</span>,<span class="number">132</span>,<span class="number">220</span>,</div><div class="line"><span class="number">125</span>,<span class="number">217</span>,<span class="number">119</span>,<span class="number">209</span>,<span class="number">116</span>,<span class="number">196</span>,<span class="number">115</span>,<span class="number">185</span>,<span class="number">114</span>,<span class="number">172</span>,<span class="number">114</span>,<span class="number">167</span>,<span class="number">112</span>,<span class="number">161</span>,<span class="number">109</span>,<span class="number">165</span>,<span class="number">107</span>,<span class="number">170</span>,<span class="number">99</span>,<span class="number">171</span>,<span class="number">97</span>,<span class="number">167</span>,<span class="number">89</span>,<span class="number">164</span>,<span class="number">81</span>,<span class="number">162</span>,</div><div class="line"><span class="number">77</span>,<span class="number">155</span>,<span class="number">81</span>,<span class="number">148</span>,<span class="number">87</span>,<span class="number">140</span>,<span class="number">96</span>,<span class="number">138</span>,<span class="number">105</span>,<span class="number">141</span>,<span class="number">110</span>,<span class="number">136</span>,<span class="number">111</span>,<span class="number">126</span>,<span class="number">113</span>,<span class="number">129</span>,<span class="number">118</span>,<span class="number">117</span>,<span class="number">128</span>,<span class="number">114</span>,<span class="number">137</span>,<span class="number">115</span>,<span class="number">146</span>,<span class="number">114</span>,<span class="number">155</span>,<span class="number">115</span>,</div><div class="line"><span class="number">158</span>,<span class="number">121</span>,<span class="number">157</span>,<span class="number">128</span>,<span class="number">156</span>,<span class="number">134</span>,<span class="number">157</span>,<span class="number">136</span>,<span class="number">156</span>,<span class="number">136</span>]</div><div class="line"></div><div class="line">draw.line(first, fill=<span class="string">'#0000FF'</span>)</div><div class="line">draw.line(second, fill=<span class="string">'#FF0000'</span>)</div><div class="line">img.show()</div></pre></td></tr></table></figure>
<p>è¿çº¿çš„ç»“æœæ˜¯ä¸€å¤´ç‰›ï¼Œæˆ‘æƒ³åˆ°çš„å…³é”®è¯æ˜¯cowï¼Œè¾“å…¥å404ï¼Œçœ‹ç­”æ¡ˆè¯´æ˜¯bull(å…¬ç‰›)ã€‚ã€‚ã€‚</p>
<p>anywayï¼Œä¸‹ä¸€å…³çš„å…¥å£æ˜¯ï¼š<a href="http://www.pythonchallenge.com/pc/return/bull.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/return/bull.html</a></p>
<h3 id="ç¬¬10å…³"><a href="#ç¬¬10å…³" class="headerlink" title="ç¬¬10å…³"></a>ç¬¬10å…³</h3><p>çº¿ç´¢ï¼š<code>å›¾ç‰‡ä¸­ç‰›æ˜¯ä¸€æ¡é“¾æ¥ï¼Œç‚¹å‡»åæ˜¾ç¤ºa = [1, 11, 21, 1211, 111221, å¦å¤–ç½‘é¡µä¸­å›¾ç‰‡ä¸‹æ–¹æé—®len(a[30])=?</code></p>
<p>å¯ä»¥æƒ³åˆ°æ˜¯æ ¹æ®çº¿ç´¢æ¨ç®—å‡ºa[30]ï¼Œå¹¶è®¡ç®—a[30]çš„é•¿åº¦ï¼›å¯èƒ½æ˜¯ä»¥å‰æ¥è§¦è¿‡ï¼Œæ‰€ä»¥æˆ‘ä¸€ä¸‹å°±çœ‹å‡ºaçš„è§„å¾‹äº†ï¼Œ1-&gt;11æ˜¯ä¸€ä¸ª1çš„æ„æ€ï¼Œâ€¦ï¼Œ1211-&gt;111221æ˜¯ä¸€ä¸ª1ï¼Œä¸€ä¸ª2ï¼Œä¸¤ä¸ª1çš„æ„æ€ã€‚</p>
<p>å› æ­¤å†™å‡ºä»¥ä¸‹ä»£ç æ¨ç®—a[30]ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute</span><span class="params">(num)</span>:</span></div><div class="line">    res = []</div><div class="line">    pre = str(num)[<span class="number">0</span>]</div><div class="line">    cnt = <span class="number">1</span></div><div class="line">    <span class="keyword">for</span> val <span class="keyword">in</span> str(num)[<span class="number">1</span>:]:</div><div class="line">        <span class="keyword">if</span> val == pre:</div><div class="line">            cnt += <span class="number">1</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            res.append(str(cnt))</div><div class="line">            res.append(str(pre))</div><div class="line">            cnt = <span class="number">1</span></div><div class="line">        pre = val</div><div class="line">    res.append(str(cnt))</div><div class="line">    res.append(str(pre))</div><div class="line">    <span class="comment">#print(''.join(res))</span></div><div class="line">    <span class="keyword">return</span> <span class="string">''</span>.join(res)</div><div class="line"></div><div class="line">a = []</div><div class="line">a.append(<span class="number">1</span>)</div><div class="line"><span class="keyword">while</span> len(a) &lt; <span class="number">32</span>:</div><div class="line">    a.append(compute(a[<span class="number">-1</span>]))</div><div class="line">print(len(a[<span class="number">30</span>]))</div></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœ5808ï¼Œä»è€Œå¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/return/5808.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/return/5808.html</a></p>
<h3 id="ç¬¬11å…³"><a href="#ç¬¬11å…³" class="headerlink" title="ç¬¬11å…³"></a>ç¬¬11å…³</h3><p>çº¿ç´¢ï¼š<code>ä¸€å¼ æ¨¡ç³Šçš„å›¾ç‰‡ï¼Œæ ‡é¢˜æç¤ºodd or even</code></p>
<p>å®Œå…¨æ²¡æœ‰æ€è·¯ï¼Œçœ‹äº†åˆ«äººç­”æ¡ˆè¯´æ˜¯æ ¹æ®å¥‡å¶åæ ‡ç”Ÿæˆä¸€ä¸ªæ–°å›¾â€¦orz</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div><div class="line">img = Image.open(<span class="string">'cave.jpg'</span>)</div><div class="line">img_value = img.load()</div><div class="line">width, height = img.size</div><div class="line">new_img = Image.new(<span class="string">'RGB'</span>, (int(width/<span class="number">2</span>), int(height/<span class="number">2</span>)))</div><div class="line"></div><div class="line">new_img_value = new_img.load()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(int(width/<span class="number">2</span>)):</div><div class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(int(height/<span class="number">2</span>)):</div><div class="line">    	<span class="comment">#ä¸‹é¢ä¸¤æ¡è¯­å¥æ‰§è¡Œæ•ˆæœæ˜¯ä¸€æ ·çš„</span></div><div class="line">        new_img_value[i, j] = img_value[<span class="number">2</span>*i, <span class="number">2</span>*j]</div><div class="line">        <span class="comment">#new_img_value[i, j] = img_value[2*i+1, 2*j+1]</span></div><div class="line"></div><div class="line">new_img.show()</div></pre></td></tr></table></figure>
<p>éšçº¦å¯ä»¥çœ‹åˆ°å›¾ç‰‡ä¸Šæ˜¾ç¤ºevil,æ‰€ä»¥å¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/return/evil.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/return/evil.html</a></p>
<h3 id="ç¬¬12å…³"><a href="#ç¬¬12å…³" class="headerlink" title="ç¬¬12å…³"></a>ç¬¬12å…³</h3><p>çº¿ç´¢ï¼š<code>åªæœ‰ä¸€å¼ å›¾ç‰‡</code></p>
<p>æ²¡æœ‰ä»»ä½•çº¿ç´¢ï¼Œç©åˆ°è¿™é‡Œæ„Ÿè§‰é€»è¾‘æ€§å·²ç»å¾ˆå¼±äº†ï¼Œç­”æ¡ˆè§£é‡Šçš„ç†ç”±ä¹Ÿå¾ˆç‰µå¼ºï¼Œç›´æ¥ç»™å‡ºå‚è€ƒçš„ç­”æ¡ˆé“¾æ¥æŠŠ<a href="http://www.cnblogs.com/dukeleo/p/3467947.html" target="_blank" rel="external">Python Challenge ç¬¬åäºŒå…³ From åšå®¢å›­</a></p>
<p>ç…§ä¾‹è´´ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">img = open(<span class="string">'evil2.gfx'</span>, <span class="string">'rb'</span>)</div><div class="line">content = img.read()</div><div class="line">img.close()</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</div><div class="line">    img = open(<span class="string">'%d.jpg'</span> % i, <span class="string">'wb'</span>)</div><div class="line">    img.write(content[i::<span class="number">5</span>])</div><div class="line">    img.close()</div></pre></td></tr></table></figure>
<p>æ ¹æ®5å¼ å›¾ç‰‡ä¸Šçš„å­—ç¬¦ç»„åˆæˆä¸€ä¸ªå•è¯disproportionalï¼Œå¾—åˆ°ä¸‹ä¸€å…³å…¥å£ï¼š<a href="http://www.pythonchallenge.com/pc/return/disproportional.html" target="_blank" rel="external">http://www.pythonchallenge.com/pc/return/disproportional.html</a></p>
<h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>æˆ‘å°±ç©åˆ°è¿™é‡Œäº†ï¼Œå› ä¸ºåˆ°è¿™é‡Œå·²ç»æ²¡æœ‰ä»€ä¹ˆè¶£å‘³æ€§å¯è¨€äº†ï¼Œæ›´å¤šçš„æ˜¯ä¸€ç§ä»»åŠ¡æ€§åœ¨é©±åŠ¨ï¼Œæ„Ÿè§‰æ— è¶£ï¼Œå°±æ²¡æœ‰å†ç©ä¸‹å»äº†ï¼Œå¦‚æœæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å°è¯•ç»§ç»­æŒ‘æˆ˜ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¶ç„¶é—´å‘ç°äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„pythonç»ƒä¹ ç½‘ç«™&lt;a href=&quot;http://www.pythonchallenge.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python Challenge&lt;/a&gt;ï¼Œå…·ä½“æ¯ä¸€å…³çš„ç©æ³•æ˜¯æ ¹æ®æä¾›çš„çº¿ç´¢ç¼–ç¨‹å¾—åˆ°è¿›
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python" scheme="http://blog.yinwoods.work/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>pythonçˆ¬è™«å°æŠ€å·§æ€»ç»“</title>
    <link href="http://blog.yinwoods.work/2016/04/05/python%E7%88%AC%E8%99%AB%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/"/>
    <id>http://blog.yinwoods.work/2016/04/05/pythonçˆ¬è™«å°æŠ€å·§æ€»ç»“/</id>
    <published>2016-04-04T16:00:00.000Z</published>
    <updated>2017-07-26T10:06:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨<a href="http://www.codeceo.com/article/python-spider-skills.html" target="_blank" rel="external">ç å†œç½‘</a>çœ‹è¿‡pythonçš„çˆ¬è™«å°æŠ€å·§ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ€»ç»“åœ°ä¸å¤Ÿå…¨é¢ï¼Œè€Œä¸”åœ¨è¿™æ®µç¼–å†™çˆ¬è™«çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå½¢æˆäº†è‡ªå·±çš„å¥—è·¯ï½</p>
<p>ç‰¹æ„åœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼Œå½“ç„¶ä¸€æ–¹é¢ä¹Ÿæ˜¯ä»¥åå¿˜è®°äº†ç•™ä½œå‚è€ƒã€‚</p>
<h3 id="1ã€åŸºæœ¬ç½‘é¡µæŠ“å–"><a href="#1ã€åŸºæœ¬ç½‘é¡µæŠ“å–" class="headerlink" title="1ã€åŸºæœ¬ç½‘é¡µæŠ“å–"></a>1ã€åŸºæœ¬ç½‘é¡µæŠ“å–</h3><blockquote>
<ul>
<li><p>åŒ…å«ä¼ªè£…æµè§ˆå™¨è®¿é—®ï¼ˆè§£å†³403é”™è¯¯ï¼‰</p>
</li>
<li><p>ä½¿ç”¨ä»£ç†ï¼Œé¿å…é•¿æ—¶é—´çˆ¬å–è¢«å°æœ¬æœºIP</p>
</li>
<li><p>å¤„ç†ç½‘é¡µgzipå‹ç¼©</p>
</li>
<li><p>HTTPErrorå¼‚å¸¸å¤„ç†</p>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#è·å–url å¯¹åº” HTML æºç </span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHtml</span><span class="params">(url)</span>:</span></div><div class="line">	<span class="comment">#ä¼ªè£…æµè§ˆå™¨</span></div><div class="line">    header = dict(&#123; <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/48.0.2564.116 Chrome/48.0.2564.116 Safari/537.36'</span>,</div><div class="line">                    <span class="string">'Accept-encoding'</span>: <span class="string">'gzip'</span>,</div><div class="line">                    &#125;)</div><div class="line">    request = urllib.request.Request(url, headers=header)</div><div class="line"></div><div class="line">    </div><div class="line">    <span class="keyword">try</span>: </div><div class="line">    	<span class="comment">#ä½¿ç”¨ä»£ç†ï¼š117.135.252.227:80</span></div><div class="line">        proxy_support = urllib.request.ProxyHandler(&#123;<span class="string">'http'</span>: <span class="string">'117.135.252.227:80'</span>&#125;)</div><div class="line">        opener = urllib.request.build_opener(proxy_support)</div><div class="line">        urllib.request.install_opener(opener)</div><div class="line"></div><div class="line">        page = urllib.request.urlopen(request)</div><div class="line"></div><div class="line">        <span class="comment">#print(page.headers.get('Content-Encoding')) 'gzip'</span></div><div class="line">        <span class="comment">#print(page.headers.get_content_charset()) 'utf8'</span></div><div class="line"></div><div class="line">        <span class="comment">#å¦‚æœä½¿ç”¨äº†gzipå‹ç¼©</span></div><div class="line">        <span class="keyword">if</span> page.headers.get(<span class="string">'Content-Encoding'</span>) == <span class="string">'gzip'</span>:</div><div class="line">            <span class="keyword">return</span> zlib.decompress(page.read(), <span class="number">16</span>+zlib.MAX_WBITS).decode(<span class="string">'utf8'</span>)</div><div class="line">        <span class="keyword">else</span>: </div><div class="line">            <span class="keyword">return</span> page.read().decode(page.headers.get_content_charset())</div><div class="line"></div><div class="line">    <span class="keyword">except</span> urllib.request.HTTPError <span class="keyword">as</span> e:</div><div class="line">        print(<span class="string">'HTTPERROR: '</span>, str(e))</div><div class="line">    <span class="keyword">return</span> urllib.request.HTTPError</div></pre></td></tr></table></figure>
<h3 id="2ã€Mysqlæ•°æ®åº“æ“ä½œ"><a href="#2ã€Mysqlæ•°æ®åº“æ“ä½œ" class="headerlink" title="2ã€Mysqlæ•°æ®åº“æ“ä½œ"></a>2ã€Mysqlæ•°æ®åº“æ“ä½œ</h3><p>ä¸€èˆ¬åœ¨ç±»çš„æ„é€ å‡½æ•°<strong>init</strong>ä¸­å®Œæˆæ•°æ®åº“çš„è¿æ¥ï¼Œåœ¨ææ„å‡½æ•°ä¸­æ–­å¼€è¿æ¥ã€‚</p>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> mysql.connector</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span><span class="params">()</span>:</span></div><div class="line">	<span class="comment">#æ„é€ å‡½æ•°</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">		self.conn = mysql.connector.connect(user=<span class="string">'root'</span>, password=<span class="string">'root'</span>, host=<span class="string">'localhost'</span>, database=<span class="string">'test'</span>)</div><div class="line">		self.cursor = self.conn.cursor(buffered=<span class="keyword">True</span>)</div><div class="line"></div><div class="line">	<span class="comment">#ææ„å‡½æ•°</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">		self.cursor.close()</div><div class="line">		self.conn.close()</div><div class="line"></div><div class="line">	<span class="comment">#æ•°æ®åº“æ“ä½œ</span></div><div class="line">	<span class="comment">#æŸ¥è¯¢tableè¡¨ä¸­id=1çš„æ•°æ®ä¸ªæ•°</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doSomething</span><span class="params">(self)</span>:</span></div><div class="line">		query = <span class="string">'SELECT COUNT(*) FROM table WHERE id = %s'</span></div><div class="line">		data = (<span class="number">1</span>, )</div><div class="line"></div><div class="line">		<span class="comment">#æ‰§è¡ŒæŸ¥è¯¢</span></div><div class="line">		self.cursor.excute(query, data)</div><div class="line">		<span class="comment">#ç¡®ä¿æŸ¥è¯¢æäº¤</span></div><div class="line">		self.conn.commit()</div></pre></td></tr></table></figure>
<h3 id="3ã€æŠŠjsonæ ¼å¼æ•°æ®æ’å…¥è¡¨ä¸­"><a href="#3ã€æŠŠjsonæ ¼å¼æ•°æ®æ’å…¥è¡¨ä¸­" class="headerlink" title="3ã€æŠŠjsonæ ¼å¼æ•°æ®æ’å…¥è¡¨ä¸­"></a>3ã€æŠŠjsonæ ¼å¼æ•°æ®æ’å…¥è¡¨ä¸­</h3><p>é¦–å…ˆä½¿ç”¨toJson()å‡½æ•°æŠŠæˆ‘ä»¬è¦æ’å…¥çš„æ•°æ®é¡¹è½¬ä¸ºjsonæ ¼å¼ï¼Œå†ä½¿ç”¨jsonINTOMysql()å‡½æ•°å°†jsonæ ¼å¼æ•°æ®æ’å…¥mysqlä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">toJson</span><span class="params">(**kwargs)</span>:</span></div><div class="line">	<span class="keyword">return</span> kwargs</div><div class="line"></div><div class="line"><span class="comment">#æŠŠjsonæ ¼å¼çš„rowdictæ’å…¥tableä¸­</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">jsonINToMysql</span><span class="params">(table, rowdict)</span>:</span></div><div class="line">    self.cursor.execute(<span class="string">'DESCRIBE %s'</span> % table)</div><div class="line">    allowedKeys = set(row[<span class="number">0</span>] <span class="keyword">for</span> row <span class="keyword">in</span> self.cursor.fetchall())</div><div class="line"></div><div class="line">    keys = allowedKeys.intersection(rowdict)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> len(rowdict) &gt; len(keys):</div><div class="line">        unknownKeys = set(rowdict)-allowedKeys</div><div class="line">        print(sys.stderr, <span class="string">"skipping keys"</span>, <span class="string">","</span>.join(unknownKeys))</div><div class="line"></div><div class="line">    columns = <span class="string">","</span>.join(keys)</div><div class="line">    values_template = <span class="string">", "</span>.join([<span class="string">"%s"</span>]*len(keys))</div><div class="line"></div><div class="line">    sql = <span class="string">"INSERT INTO %s(%s) VALUES (%s)"</span> % (table, columns, values_template)</div><div class="line"></div><div class="line">    values = tuple(rowdict[key] <span class="keyword">for</span> key <span class="keyword">in</span> keys)</div><div class="line">    self.cursor.execute(sql, values)</div><div class="line">    self.conn.commit()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">example</span><span class="params">()</span>:</span></div><div class="line">	<span class="comment">#å‡è®¾æ•°æ®è¡¨tableä¸­æœ‰idã€nameã€sexä¸‰é¡¹</span></div><div class="line">	json = toJson(id=id, name=name, sex=sex)</div><div class="line">	jsonINTOMysql(<span class="string">'table'</span>, json)</div></pre></td></tr></table></figure>
<h3 id="4ã€å¯¹çˆ¬å–æ•°æ®çš„ä¹±ç è¿›è¡Œè§£æ"><a href="#4ã€å¯¹çˆ¬å–æ•°æ®çš„ä¹±ç è¿›è¡Œè§£æ" class="headerlink" title="4ã€å¯¹çˆ¬å–æ•°æ®çš„ä¹±ç è¿›è¡Œè§£æ"></a>4ã€å¯¹çˆ¬å–æ•°æ®çš„ä¹±ç è¿›è¡Œè§£æ</h3><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦çˆ¬å–çš„æ˜¯å•ç‹¬çš„jsonæ ¼å¼æ•°æ®(è¯·å‚è€ƒ<a href="http://blog.yinwoods.com/coding/%E5%88%A9%E7%94%A8%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96js%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE.html" target="_blank" rel="external">åˆ©ç”¨çˆ¬è™«çˆ¬å–jsç”Ÿæˆæ•°æ®</a>)ï¼Œå¯èƒ½ä¼šå‘ç°jsonä¸­çš„æ•°æ®æ˜¯ç»è¿‡ç¼–ç çš„ï¼Œä¾‹å¦‚æˆ‘çˆ¬å–æ±½è½¦ä¹‹å®¶è½¦è¾†çš„è¯¦ç»†å‚æ•°é…ç½®æ—¶ï¼Œä¼šå‘ç°jsonä¸­çš„æ•°æ®ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&quot;SIP_C_119&quot;:&quot;2645&quot;,&quot;SIP_C_250&quot;:&quot;%2d&quot;,&quot;SIP_C_306&quot;:&quot;%2d&quot;,&quot;SIP_T_LOGO&quot;:&quot;http://i1.itc.cn/20130624/83e_01580269_5a5f_1526_74cc_c6bf0064c28e_1.jpg&quot;,&quot;SIP_C_114&quot;:&quot;%2d%2d%2d&quot;,&quot;SIP_C_117&quot;:&quot;7005&quot;,&quot;SIP_C_305&quot;:&quot;%2d&quot;,&quot;SIP_C_304&quot;:&quot;%2d%2d%2d&quot;,&quot;SIP_C_118&quot;:&quot;2040&quot;,&quot;SIP_C_303&quot;:&quot;%u67f4%u6cb9%u673a&quot;,&quot;SIP_C_115&quot;:&quot;%u6574%u8f663%u5e74%2f6%u4e07%u516c%u91cc&quot;,&quot;SIP_C_116&quot;:&quot;%2d%2d%2d&quot;,&quot;model_engine_type&quot;:2,&quot;SIP_C_120&quot;:&quot;3935&quot;,&quot;overseas&quot;:false,&quot;SIP_T_PRICE&quot;:32.0,&quot;SIP_C_261&quot;:&quot;%u25cf&quot;,&quot;SIP_T_ID&quot;:127870,&quot;SIP_T_GEAR&quot;:&quot;M&quot;,&quot;SIP_C_124&quot;:&quot;%u5ba2%u8f66&quot;,&quot;SIP_C_125&quot;:&quot;2&quot;,&quot;SIP_C_126&quot;:&quot;10%2d23&quot;,&quot;SIP_C_127&quot;:&quot;90&quot;,&quot;SIP_C_170&quot;:&quot;%2d&quot;,&quot;SIP_C_329&quot;:&quot;120&quot;,&quot;SIP_C_171&quot;:&quot;%u673a%u68b0%u6db2%u538b%u52a9%u529b%u8f6c%u5411&quot;,&quot;SIP_C_322&quot;:&quot;%2d&quot;,&quot;SIP_T_MODELNAME&quot;:&quot;%u5b89%u51ef%u5ba2%u8f66%20%u5b9d%u65af%u901a&quot;,&quot;SIP_C_321&quot;:&quot;%2d&quot;,&quot;SIP_C_320&quot;:&quot;%u624b%u52a8&quot;,&quot;SIP_C_185&quot;:&quot;%u25cf&quot;,&quot;SIP_C_283&quot;:&quot;%u25cf&quot;,&quot;SIP_C_318&quot;:&quot;%u5364%u7d20&quot;,&quot;SIP_C_108&quot;:&quot;5%u6863%u624b%u52a8&quot;,&quot;SIP_C_317&quot;:&quot;%2d&quot;,&quot;SIP_C_285&quot;:&quot;%u25cf&quot;,&quot;SIP_C_314&quot;:&quot;%2d&quot;,&quot;SIP_C_104&quot;:&quot;%u6c5f%u6dee%u6c7d%u8f66&quot;,&quot;SIP_C_313&quot;:&quot;%2d&quot;,&quot;SIP_C_105&quot;:&quot;%u5176%u4ed6%u8f66%u578b&quot;,&quot;SIP_C_316&quot;:&quot;%2d&quot;,&quot;SIP_C_106&quot;:&quot;2%u95e810%2d23%u5ea7%u5ba2%u8f66&quot;,&quot;SIP_C_315&quot;:&quot;%2d&quot;,&quot;SIP_C_107&quot;:&quot;3%2e0T%20163%u9a6c%u529bL4&quot;,&quot;SIP_C_310&quot;:&quot;%2d&quot;,&quot;SIP_C_312&quot;:&quot;%2d&quot;,&quot;SIP_C_102&quot;:&quot;32%2e0%u4e07%u5143&quot;,&quot;SIP_C_103&quot;:&quot;32%2e0%7e32%2e0%u4e07%u5143&quot;,&quot;SIP_C_150&quot;:&quot;%u7f38%u5185%u76f4%u55b7&quot;,&quot;SIP_C_294&quot;:&quot;%2d%2d%2f%2d%2d%2f%2d%2d&quot;,&quot;SIP_C_297&quot;:&quot;163&quot;,&quot;SIP_C_291&quot;:&quot;%2d%2d%2d&quot;,&quot;SIP_C_151&quot;:&quot;%u94dd%u5408%u91d1&quot;,&quot;SIP_C_293&quot;:&quot;7005x2040x2645&quot;,&quot;SIP_C_152&quot;:&quot;%u94f8%u94c1&quot;,&quot;SIP_C_292&quot;:&quot;%2d%2d%2d&quot;,&quot;SIP_T_DISPL&quot;:3.0,&quot;SIP_C_158&quot;:&quot;%u624b%u52a8&quot;,&quot;SIP_C_157&quot;:&quot;5&quot;,&quot;SIP_C_156&quot;:&quot;5%u6863%u624b%u52a8&quot;,&quot;SIP_C_155&quot;:&quot;%u56fdIV&quot;,&quot;SIP_C_298&quot;:&quot;120%2f3800&quot;,&quot;SIP_C_299&quot;:&quot;362%2f1600%2d2200&quot;,&quot;SIP_C_159&quot;:&quot;%u4e2d%u7f6e%u540e%u9a71&quot;,&quot;SIP_C_224&quot;:&quot;%u771f%u76ae&quot;,&quot;SIP_C_160&quot;:&quot;%u9ea6%u5f17%u900a%u5f0f%u72ec%u7acb%u60ac%u6302&quot;,&quot;SIP_C_161&quot;:&quot;%u94a2%u677f%u5f39%u7c27%u7ed3%u6784&quot;,&quot;SIP_C_162&quot;:&quot;%u627f%u8f7d%u5f0f%u8f66%u8eab&quot;,&quot;SIP_C_163&quot;:&quot;7%2e00%20R16&quot;,&quot;SIP_C_164&quot;:&quot;7%2e00%20R16&quot;,&quot;SIP_C_165&quot;:&quot;%u94a2%u5236&quot;,&quot;nameDomain&quot;:&quot;4094&quot;,&quot;SIP_C_167&quot;:&quot;%u901a%u98ce%u76d8%u5f0f&quot;,&quot;SIP_C_166&quot;:&quot;%u5168%u5c3a%u5bf8%u5907%u80ce&quot;,&quot;SIP_C_169&quot;:&quot;%u624b%u5239%u5f0f%u5236%u52a8&quot;,&quot;SIP_C_168&quot;:&quot;%u9f13%u5f0f&quot;,&quot;SIP_T_MODELID&quot;:4094,&quot;SIP_T_STA&quot;:1,&quot;SIP_C_335&quot;:&quot;6%u4e07&quot;,&quot;SIP_C_333&quot;:&quot;1600&quot;,&quot;SIP_C_334&quot;:&quot;2200&quot;,&quot;SIP_C_332&quot;:&quot;362&quot;,&quot;SIP_T_YEAR&quot;:2014,&quot;SIP_C_330&quot;:&quot;3800&quot;,&quot;SIP_C_139&quot;:&quot;4&quot;,&quot;SIP_C_138&quot;:&quot;%u6da1%u8f6e%u589e%u538b&quot;,&quot;SIP_C_137&quot;:&quot;2968&quot;,&quot;SIP_C_136&quot;:&quot;3%2e0&quot;,&quot;SIP_C_135&quot;:&quot;NGD3%2e0%2dC3HA&quot;,&quot;SIP_C_134&quot;:&quot;3%2e0T%20163%u9a6c%u529bL4&quot;,&quot;SIP_C_249&quot;:&quot;0&quot;,&quot;SIP_C_140&quot;:&quot;%u76f4%u5217&quot;,&quot;SIP_C_141&quot;:&quot;4&quot;,&quot;SIP_C_347&quot;:&quot;%u5364%u7d20&quot;,&quot;SIP_C_142&quot;:&quot;%u53cc%u9876%u7f6e&quot;,&quot;brandNameDomain&quot;:&quot;ak-2171&quot;,&quot;SIP_C_149&quot;:&quot;%u67f4%u6cb9&quot;,&quot;SIP_C_148&quot;:&quot;40%2e0&quot;,&quot;SIP_T_NAME&quot;:&quot;3%2e0T%20VIP%u7248&quot;,&quot;SIP_C_241&quot;:&quot;%u25cf&quot;&#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§ç¼–ç ç›¸ä¿¡å¤§å®¶çœ‹ç€å¾ˆç†Ÿæ‚‰ï¼Œå°±åƒæˆ‘ä»¬æŠŠåŒ…å«ä¸­æ–‡çš„urlåœ°å€å¤åˆ¶ç²˜è´´ä¸‹æ¥çš„ç»“æœï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆå¯¹è¿™ç§æ•°æ®è¿›è¡Œè§£ç å‘¢ï¼Ÿ</p>
<p>ä½¿ç”¨è¿™ç§æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#å¯¹strå…ˆè¿›è¡Œunquote urlè§£ç ï¼Œå†è¿›è¡Œeval unicodeè§£ç </span></div><div class="line"><span class="comment">#å¤„ç†æ•°æ®æ—¶åªéœ€è¦æˆ‘ä»¬æŠŠkey-valueå¯¹ä¸­çš„valueä¾æ¬¡ä½œä¸ºå‚æ•°ä¼ ç»™deUnicodeå³å¯</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">deUnicode</span><span class="params">(str)</span>:</span></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        ans = eval(<span class="string">'"%s"'</span> % unquote(str).replace(<span class="string">'%'</span>, <span class="string">'\\'</span>))</div><div class="line">        <span class="keyword">return</span> ans</div><div class="line">    <span class="keyword">except</span> SyntaxError <span class="keyword">as</span> e:</div><div class="line">        <span class="keyword">return</span> str</div></pre></td></tr></table></figure>
<h3 id="5ã€requestsé€šè¿‡postæäº¤è¡¨å•æ•°æ®ï¼ˆä¸€èˆ¬ç”¨äºæ¨¡æ‹Ÿç™»å½•ï¼‰"><a href="#5ã€requestsé€šè¿‡postæäº¤è¡¨å•æ•°æ®ï¼ˆä¸€èˆ¬ç”¨äºæ¨¡æ‹Ÿç™»å½•ï¼‰" class="headerlink" title="5ã€requestsé€šè¿‡postæäº¤è¡¨å•æ•°æ®ï¼ˆä¸€èˆ¬ç”¨äºæ¨¡æ‹Ÿç™»å½•ï¼‰"></a>5ã€requestsé€šè¿‡postæäº¤è¡¨å•æ•°æ®ï¼ˆä¸€èˆ¬ç”¨äºæ¨¡æ‹Ÿç™»å½•ï¼‰</h3><p>requestsçš„postå®ç°ä¾èµ–äºç»´æŒä¸€ä¸ªsessionï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨sessionå­˜åœ¨æœŸé—´ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ç™»å½•çš„èº«ä»½æ¥è·å–å…¶ä»–éœ€è¦ç™»å½•åæ‰èƒ½è·å–çš„é¡µé¢æºç ã€‚</p>
<p>ç®€å•ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">url = <span class="string">''</span></div><div class="line">datas = urllib.parse.urlencode(&#123;</div><div class="line">   <span class="string">'data-key'</span> : <span class="string">'data-value'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line">headers = dict(&#123;</div><div class="line">    <span class="string">'header-key'</span> : <span class="string">'header-value'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line">session = requests.session()</div><div class="line">session.post(url, datas, headers=headers)</div><div class="line"></div><div class="line">res = session.get(other url).text</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰åœ¨&lt;a href=&quot;http://www.codeceo.com/article/python-spider-skills.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç å†œç½‘&lt;/a&gt;çœ‹è¿‡pythonçš„çˆ¬è™«å°æŠ€å·§ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ€»ç»“åœ°ä¸å¤Ÿå…¨é¢ï¼Œè€Œ
    
    </summary>
    
      <category term="coding" scheme="http://blog.yinwoods.work/categories/coding/"/>
    
    
      <category term="python, çˆ¬è™«" scheme="http://blog.yinwoods.work/tags/python-%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
</feed>
